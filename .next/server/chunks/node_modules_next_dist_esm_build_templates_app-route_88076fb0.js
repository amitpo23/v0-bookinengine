module.exports=[857617,e=>{"use strict";var t=e.i(747909),o=e.i(174017),a=e.i(996250),r=e.i(759756),n=e.i(561916),i=e.i(114444),l=e.i(837092),s=e.i(869741),d=e.i(316795),c=e.i(487718),p=e.i(995169),u=e.i(47587),g=e.i(666012),f=e.i(570101),h=e.i(626937),v=e.i(10372),x=e.i(193695);e.i(52474);var m=e.i(257297),b=e.i(89171),y=e.i(323831);async function w(e){var t;let o,a,r,n=e.nextUrl.searchParams,i=parseInt(n.get("count")||"100"),l=n.get("level"),s=n.get("category"),d=n.get("format")||"json",c={};l&&(c.level=l),s&&(c.category=s);let p=y.apiLogger.getRecentLogs(i,Object.keys(c).length>0?c:void 0);return"html"===d?new b.NextResponse((o={debug:"#888",info:"#17a2b8",warn:"#ffc107",error:"#dc3545"},a={api:"ğŸŒ",medici:"ğŸ¨",booking:"ğŸ“‹",auth:"ğŸ”",system:"âš™ï¸"},r=(t=p).map(e=>{let t=new Date(e.timestamp).toLocaleString("he-IL"),r=a[e.category]||"ğŸ“",n=o[e.level];return`
      <div class="log-entry log-${e.level}">
        <div class="log-header">
          <span class="log-time">${t}</span>
          <span class="log-icon">${r}</span>
          <span class="log-level" style="background: ${n}">${e.level.toUpperCase()}</span>
          <span class="log-action">${e.action}</span>
          ${e.method?`<span class="log-method method-${e.method.toLowerCase()}">${e.method}</span>`:""}
          ${e.endpoint?`<span class="log-endpoint">${e.endpoint}</span>`:""}
          ${e.statusCode?`<span class="log-status status-${Math.floor(e.statusCode/100)}xx">${e.statusCode}</span>`:""}
          ${e.duration?`<span class="log-duration">${e.duration}ms</span>`:""}
        </div>
        ${e.error?`<div class="log-error">âŒ ${e.error}</div>`:""}
        ${e.requestBody?`<details class="log-details"><summary>Request Body</summary><pre>${JSON.stringify(e.requestBody,null,2)}</pre></details>`:""}
        ${e.responseBody?`<details class="log-details"><summary>Response Body</summary><pre>${JSON.stringify(e.responseBody,null,2)}</pre></details>`:""}
      </div>
    `}).join(""),`
<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>API Logs - Booking Engine</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { 
      font-family: 'Segoe UI', Tahoma, sans-serif; 
      background: #1a1a2e; 
      color: #eee;
      padding: 20px;
    }
    h1 { 
      color: #00d4ff; 
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .filters {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    .filters select, .filters input, .filters button {
      padding: 8px 12px;
      border-radius: 6px;
      border: 1px solid #333;
      background: #2a2a4a;
      color: #eee;
    }
    .filters button {
      background: #00d4ff;
      color: #000;
      cursor: pointer;
      font-weight: bold;
    }
    .filters button:hover { background: #00b8e6; }
    .stats {
      display: flex;
      gap: 20px;
      margin-bottom: 20px;
    }
    .stat {
      background: #2a2a4a;
      padding: 15px 20px;
      border-radius: 8px;
      text-align: center;
    }
    .stat-value { font-size: 24px; font-weight: bold; color: #00d4ff; }
    .stat-label { font-size: 12px; color: #888; }
    .logs-container {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .log-entry {
      background: #2a2a4a;
      border-radius: 8px;
      padding: 12px;
      border-right: 4px solid #333;
    }
    .log-entry.log-error { border-right-color: #dc3545; }
    .log-entry.log-warn { border-right-color: #ffc107; }
    .log-entry.log-info { border-right-color: #17a2b8; }
    .log-entry.log-debug { border-right-color: #888; }
    .log-header {
      display: flex;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
    }
    .log-time { color: #888; font-size: 12px; }
    .log-icon { font-size: 16px; }
    .log-level {
      padding: 2px 8px;
      border-radius: 4px;
      font-size: 10px;
      font-weight: bold;
      color: #fff;
    }
    .log-action { font-weight: 500; }
    .log-method {
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 11px;
      font-weight: bold;
    }
    .method-get { background: #28a745; color: #fff; }
    .method-post { background: #007bff; color: #fff; }
    .method-put { background: #ffc107; color: #000; }
    .method-delete { background: #dc3545; color: #fff; }
    .log-endpoint { color: #aaa; font-family: monospace; font-size: 13px; }
    .log-status {
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 11px;
      font-weight: bold;
    }
    .status-2xx { background: #28a745; color: #fff; }
    .status-3xx { background: #17a2b8; color: #fff; }
    .status-4xx { background: #ffc107; color: #000; }
    .status-5xx { background: #dc3545; color: #fff; }
    .log-duration { color: #ff9f43; font-size: 12px; }
    .log-error {
      margin-top: 8px;
      padding: 8px;
      background: rgba(220, 53, 69, 0.2);
      border-radius: 4px;
      color: #ff6b6b;
    }
    .log-details {
      margin-top: 8px;
    }
    .log-details summary {
      cursor: pointer;
      color: #888;
      font-size: 12px;
    }
    .log-details pre {
      margin-top: 8px;
      padding: 10px;
      background: #1a1a2e;
      border-radius: 4px;
      overflow-x: auto;
      font-size: 11px;
      max-height: 200px;
      overflow-y: auto;
    }
    .refresh-btn {
      position: fixed;
      bottom: 20px;
      left: 20px;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: #00d4ff;
      color: #000;
      border: none;
      cursor: pointer;
      font-size: 20px;
      box-shadow: 0 4px 12px rgba(0,212,255,0.4);
    }
    .auto-refresh {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .auto-refresh input { width: 16px; height: 16px; }
  </style>
</head>
<body>
  <h1>ğŸ“Š API Logs Dashboard</h1>
  
  <div class="filters">
    <select id="levelFilter">
      <option value="">×›×œ ×”×¨××•×ª</option>
      <option value="debug">Debug</option>
      <option value="info">Info</option>
      <option value="warn">Warning</option>
      <option value="error">Error</option>
    </select>
    <select id="categoryFilter">
      <option value="">×›×œ ×”×§×˜×’×•×¨×™×•×ª</option>
      <option value="api">API</option>
      <option value="medici">Medici</option>
      <option value="booking">Booking</option>
      <option value="auth">Auth</option>
      <option value="system">System</option>
    </select>
    <input type="number" id="countFilter" value="100" min="10" max="500" style="width: 80px;">
    <button onclick="applyFilters()">×¡× ×Ÿ</button>
    <button onclick="location.reload()">ğŸ”„ ×¨×¢× ×Ÿ</button>
    <div class="auto-refresh">
      <input type="checkbox" id="autoRefresh">
      <label for="autoRefresh">×¨×¢× ×•×Ÿ ××•×˜×•××˜×™</label>
    </div>
  </div>
  
  <div class="stats">
    <div class="stat">
      <div class="stat-value">${t.length}</div>
      <div class="stat-label">×¡×”"×› ×œ×•×’×™×</div>
    </div>
    <div class="stat">
      <div class="stat-value">${t.filter(e=>"error"===e.level).length}</div>
      <div class="stat-label">×©×’×™××•×ª</div>
    </div>
    <div class="stat">
      <div class="stat-value">${t.filter(e=>"medici"===e.category).length}</div>
      <div class="stat-label">×§×¨×™××•×ª Medici</div>
    </div>
    <div class="stat">
      <div class="stat-value">${t.filter(e=>e.duration).reduce((e,t)=>e+(t.duration||0),0)/Math.max(t.filter(e=>e.duration).length,1)|0}ms</div>
      <div class="stat-label">×–××Ÿ ×××•×¦×¢</div>
    </div>
  </div>
  
  <div class="logs-container">
    ${r||'<div style="text-align: center; padding: 40px; color: #888;">××™×Ÿ ×œ×•×’×™× ×œ×”×¦×’×”</div>'}
  </div>
  
  <script>
    function applyFilters() {
      const level = document.getElementById('levelFilter').value;
      const category = document.getElementById('categoryFilter').value;
      const count = document.getElementById('countFilter').value;
      
      let url = '/api/logs?format=html';
      if (level) url += '&level=' + level;
      if (category) url += '&category=' + category;
      if (count) url += '&count=' + count;
      
      window.location.href = url;
    }
    
    // Auto-refresh
    document.getElementById('autoRefresh').addEventListener('change', function() {
      if (this.checked) {
        window.refreshInterval = setInterval(() => location.reload(), 5000);
      } else {
        clearInterval(window.refreshInterval);
      }
    });
  </script>
</body>
</html>
  `),{headers:{"Content-Type":"text/html"}}):b.NextResponse.json({success:!0,count:p.length,logs:p})}async function R(e){let{count:t=100,level:o,category:a,action:r,from:n,to:i}=await e.json(),l=y.apiLogger.getRecentLogs(2*t);if(o&&(l=l.filter(e=>e.level===o)),a&&(l=l.filter(e=>e.category===a)),r&&(l=l.filter(e=>e.action.toLowerCase().includes(r.toLowerCase()))),n){let e=new Date(n);l=l.filter(t=>new Date(t.timestamp)>=e)}if(i){let e=new Date(i);l=l.filter(t=>new Date(t.timestamp)<=e)}return b.NextResponse.json({success:!0,count:Math.min(l.length,t),logs:l.slice(0,t)})}e.s(["GET",()=>w,"POST",()=>R],214492);var E=e.i(214492);let C=new t.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/logs/route",pathname:"/api/logs",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/app/api/logs/route.ts",nextConfigOutput:"",userland:E}),{workAsyncStorage:k,workUnitAsyncStorage:$,serverHooks:A}=C;function I(){return(0,a.patchFetch)({workAsyncStorage:k,workUnitAsyncStorage:$})}async function T(e,t,a){C.isDev&&(0,r.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let b="/api/logs/route";b=b.replace(/\/index$/,"")||"/";let y=await C.prepare(e,t,{srcPage:b,multiZoneDraftMode:!1});if(!y)return t.statusCode=400,t.end("Bad Request"),null==a.waitUntil||a.waitUntil.call(a,Promise.resolve()),null;let{buildId:w,params:R,nextConfig:E,parsedUrl:k,isDraftMode:$,prerenderManifest:A,routerServerContext:I,isOnDemandRevalidate:T,revalidateOnlyGenerated:P,resolvedPathname:N,clientReferenceManifest:O,serverActionsManifest:S}=y,D=(0,s.normalizeAppPath)(b),M=!!(A.dynamicRoutes[D]||A.routes[N]),U=async()=>((null==I?void 0:I.render404)?await I.render404(e,t,k,!1):t.end("This page could not be found"),null);if(M&&!$){let e=!!A.routes[N],t=A.dynamicRoutes[D];if(t&&!1===t.fallback&&!e){if(E.experimental.adapterPath)return await U();throw new x.NoFallbackError}}let _=null;!M||C.isDev||$||(_="/index"===(_=N)?"/":_);let q=!0===C.isDev||!M,B=M&&!q;S&&O&&(0,i.setReferenceManifestsSingleton)({page:b,clientReferenceManifest:O,serverActionsManifest:S,serverModuleMap:(0,l.createServerModuleMap)({serverActionsManifest:S})});let F=e.method||"GET",H=(0,n.getTracer)(),L=H.getActiveScopeSpan(),z={params:R,prerenderManifest:A,renderOpts:{experimental:{authInterrupts:!!E.experimental.authInterrupts},cacheComponents:!!E.cacheComponents,supportsDynamicResponse:q,incrementalCache:(0,r.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:E.cacheLife,waitUntil:a.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,o,a)=>C.onRequestError(e,t,a,I)},sharedContext:{buildId:w}},j=new d.NodeNextRequest(e),K=new d.NodeNextResponse(t),G=c.NextRequestAdapter.fromNodeNextRequest(j,(0,c.signalFromNodeResponse)(t));try{let i=async e=>C.handle(G,z).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let o=H.getRootSpanAttributes();if(!o)return;if(o.get("next.span_type")!==p.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${o.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let a=o.get("next.route");if(a){let t=`${F} ${a}`;e.setAttributes({"next.route":a,"http.route":a,"next.span_name":t}),e.updateName(t)}else e.updateName(`${F} ${b}`)}),l=!!(0,r.getRequestMeta)(e,"minimalMode"),s=async r=>{var n,s;let d=async({previousCacheEntry:o})=>{try{if(!l&&T&&P&&!o)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let n=await i(r);e.fetchMetrics=z.renderOpts.fetchMetrics;let s=z.renderOpts.pendingWaitUntil;s&&a.waitUntil&&(a.waitUntil(s),s=void 0);let d=z.renderOpts.collectedTags;if(!M)return await (0,g.sendResponse)(j,K,n,z.renderOpts.pendingWaitUntil),null;{let e=await n.blob(),t=(0,f.toNodeOutgoingHttpHeaders)(n.headers);d&&(t[v.NEXT_CACHE_TAGS_HEADER]=d),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let o=void 0!==z.renderOpts.collectedRevalidate&&!(z.renderOpts.collectedRevalidate>=v.INFINITE_CACHE)&&z.renderOpts.collectedRevalidate,a=void 0===z.renderOpts.collectedExpire||z.renderOpts.collectedExpire>=v.INFINITE_CACHE?void 0:z.renderOpts.collectedExpire;return{value:{kind:m.CachedRouteKind.APP_ROUTE,status:n.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:o,expire:a}}}}catch(t){throw(null==o?void 0:o.isStale)&&await C.onRequestError(e,t,{routerKind:"App Router",routePath:b,routeType:"route",revalidateReason:(0,u.getRevalidateReason)({isStaticGeneration:B,isOnDemandRevalidate:T})},I),t}},c=await C.handleResponse({req:e,nextConfig:E,cacheKey:_,routeKind:o.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:A,isRoutePPREnabled:!1,isOnDemandRevalidate:T,revalidateOnlyGenerated:P,responseGenerator:d,waitUntil:a.waitUntil,isMinimalMode:l});if(!M)return null;if((null==c||null==(n=c.value)?void 0:n.kind)!==m.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==c||null==(s=c.value)?void 0:s.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});l||t.setHeader("x-nextjs-cache",T?"REVALIDATED":c.isMiss?"MISS":c.isStale?"STALE":"HIT"),$&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let p=(0,f.fromNodeOutgoingHttpHeaders)(c.value.headers);return l&&M||p.delete(v.NEXT_CACHE_TAGS_HEADER),!c.cacheControl||t.getHeader("Cache-Control")||p.get("Cache-Control")||p.set("Cache-Control",(0,h.getCacheControlHeader)(c.cacheControl)),await (0,g.sendResponse)(j,K,new Response(c.value.body,{headers:p,status:c.value.status||200})),null};L?await s(L):await H.withPropagatedContext(e.headers,()=>H.trace(p.BaseServerSpan.handleRequest,{spanName:`${F} ${b}`,kind:n.SpanKind.SERVER,attributes:{"http.method":F,"http.target":e.url}},s))}catch(t){if(t instanceof x.NoFallbackError||await C.onRequestError(e,t,{routerKind:"App Router",routePath:D,routeType:"route",revalidateReason:(0,u.getRevalidateReason)({isStaticGeneration:B,isOnDemandRevalidate:T})}),M)throw t;return await (0,g.sendResponse)(j,K,new Response(null,{status:500})),null}}e.s(["handler",()=>T,"patchFetch",()=>I,"routeModule",()=>C,"serverHooks",()=>A,"workAsyncStorage",()=>k,"workUnitAsyncStorage",()=>$],857617)}];

//# sourceMappingURL=node_modules_next_dist_esm_build_templates_app-route_88076fb0.js.map