(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,232189,(e,s,t)=>{"use strict";s.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},865156,(e,s,t)=>{"use strict";var r=e.r(232189);function a(){}function n(){}n.resetWarningCache=a,s.exports=function(){function e(e,s,t,a,n,l){if(l!==r){var i=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function s(){return e}e.isRequired=e;var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:s,element:e,elementType:e,instanceOf:s,node:e,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:a};return t.PropTypes=t,t}},745009,(e,s,t)=>{s.exports=e.r(865156)()},507627,e=>{"use strict";var s,t=e.i(843476),r=e.i(271645),a=e.i(41883),n=e.i(502942),l=e.i(6113),i=e.i(167881),o=e.i(59377),c=e.i(23750),d=e.i(127341),h=e.i(647163),m=e.i(16218);let x=()=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),(0,t.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,t.jsx)("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),(0,t.jsx)("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),u=()=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,t.jsx)("path",{d:"M5 12h14"})}),p=()=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("path",{d:"M5 12h14"}),(0,t.jsx)("path",{d:"M12 5v14"})]}),g=()=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,t.jsx)("path",{d:"m21 21-4.3-4.3"})]}),j=()=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"}),(0,t.jsx)("circle",{cx:"12",cy:"10",r:"3"})]}),f=()=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2"}),(0,t.jsx)("path",{d:"M9 22v-4h6v4"}),(0,t.jsx)("path",{d:"M8 6h.01"}),(0,t.jsx)("path",{d:"M16 6h.01"}),(0,t.jsx)("path",{d:"M12 6h.01"}),(0,t.jsx)("path",{d:"M12 10h.01"}),(0,t.jsx)("path",{d:"M12 14h.01"}),(0,t.jsx)("path",{d:"M16 10h.01"}),(0,t.jsx)("path",{d:"M16 14h.01"}),(0,t.jsx)("path",{d:"M8 10h.01"}),(0,t.jsx)("path",{d:"M8 14h.01"})]}),v=()=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-spin",children:(0,t.jsx)("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})});function b({onSearch:e}){let{search:s,setSearch:b,setCurrentStep:w,setSearchResults:N,setIsSearching:y,setSearchError:k,isSearching:C,searchError:S}=(0,a.useBooking)(),{t:L,locale:I,dir:B}=(0,n.useI18n)(),[P,E]=(0,r.useState)(!1),[M,O]=(0,r.useState)("city"),[T,D]=(0,r.useState)(""),A=async()=>{if(!T.trim())return void k("he"===I?"יש להזין עיר או שם מלון":"Please enter a city or hotel name");if(!s.checkIn||!s.checkOut)return void k("he"===I?"יש לבחור תאריכי צ'ק-אין וצ'ק-אאוט":"Please select check-in and check-out dates");y(!0),k(null);try{let t=(0,l.formatDateForApi)(s.checkIn),r=(0,l.formatDateForApi)(s.checkOut),a={dateFrom:t,dateTo:r,adults:s.adults,children:s.childrenAges||[],limit:20};"city"===M?a.city=T:a.hotelName=T,console.log("[v0] ====== SEARCH DEBUG ======"),console.log("[v0] Check-in Date object:",s.checkIn),console.log("[v0] Check-out Date object:",s.checkOut),console.log("[v0] Formatted dateFrom:",t),console.log("[v0] Formatted dateTo:",r),console.log("[v0] Full search params:",JSON.stringify(a,null,2));let n=await fetch("/api/hotels/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});console.log("[v0] Response status:",n.status);let i=await n.json();if(console.log("[v0] Full response data:",JSON.stringify(i,null,2)),!n.ok)throw Error(i.error||"Search failed");let o=i.data||i.results||[];N(o),0===o.length?k("he"===I?"לא נמצאו תוצאות":"No results found"):(b({...s,city:"city"===M?T:"",hotelName:"hotel"===M?T:""}),w(2),e?.())}catch(e){console.log("[v0] Search error:",e),k(e.message||"Failed to search")}finally{y(!1)}};return(0,t.jsxs)("div",{className:"bg-card rounded-xl border border-border p-4 shadow-lg",dir:B,children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:["he"===I?"חיפוש לפי":"Search by",":"]}),(0,t.jsx)(d.Tabs,{value:M,onValueChange:e=>O(e),children:(0,t.jsxs)(d.TabsList,{className:"h-8",children:[(0,t.jsxs)(d.TabsTrigger,{value:"city",className:"text-xs px-3 h-7 flex items-center gap-1",children:[(0,t.jsx)(j,{}),"he"===I?"עיר":"City"]}),(0,t.jsxs)(d.TabsTrigger,{value:"hotel",className:"text-xs px-3 h-7 flex items-center gap-1",children:[(0,t.jsx)(f,{}),"he"===I?"שם מלון":"Hotel Name"]})]})})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:(0,h.cn)("absolute top-1/2 -translate-y-1/2 text-muted-foreground","rtl"===B?"right-3":"left-3"),children:(0,t.jsx)(g,{})}),(0,t.jsx)(c.Input,{value:T,onChange:e=>D(e.target.value),placeholder:"city"===M?"he"===I?"הזן שם עיר (למשל: Dubai, Paris)":"Enter city name (e.g., Dubai, Paris)":"he"===I?"הזן שם מלון (למשל: Dizengoff Inn)":"Enter hotel name (e.g., Dizengoff Inn)",className:(0,h.cn)("h-12","rtl"===B?"pr-10":"pl-10"),onKeyDown:e=>"Enter"===e.key&&A()})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsx)(m.DatePickerInput,{value:s.checkIn,onChange:e=>b({...s,checkIn:e}),minDate:new Date,label:L("checkIn"),placeholder:L("selectDate"),dir:B}),(0,t.jsx)(m.DatePickerInput,{value:s.checkOut,onChange:e=>b({...s,checkOut:e}),minDate:s.checkIn?new Date(s.checkIn.getTime()+864e5):new Date,label:L("checkOut"),placeholder:L("selectDate"),dir:B}),(0,t.jsxs)(o.Popover,{open:P,onOpenChange:E,children:[(0,t.jsx)(o.PopoverTrigger,{asChild:!0,children:(0,t.jsxs)(i.Button,{variant:"outline",className:(0,h.cn)("w-full justify-start h-14 px-4 bg-transparent","rtl"===B?"text-right":"text-left"),children:[(0,t.jsxs)("div",{className:(0,h.cn)("flex flex-col gap-0.5 flex-1","items-start"),children:[(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:L("guests")}),(0,t.jsxs)("span",{className:"font-medium",children:[s.adults," ",L("adults"),s.children>0?`, ${s.children} ${L("children")}`:""]})]}),(0,t.jsx)(x,{})]})}),(0,t.jsx)(o.PopoverContent,{className:"w-72",align:"start",children:(0,t.jsxs)("div",{className:"space-y-4",dir:B,children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:L("adults")}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:L("adultsAge")})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(i.Button,{variant:"outline",size:"icon",className:"h-8 w-8 bg-transparent",onClick:()=>b({...s,adults:Math.max(1,s.adults-1)}),disabled:s.adults<=1,children:(0,t.jsx)(u,{})}),(0,t.jsx)("span",{className:"w-8 text-center font-medium",children:s.adults}),(0,t.jsx)(i.Button,{variant:"outline",size:"icon",className:"h-8 w-8 bg-transparent",onClick:()=>b({...s,adults:Math.min(10,s.adults+1)}),disabled:s.adults>=10,children:(0,t.jsx)(p,{})})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:L("children")}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:L("childrenAges")})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(i.Button,{variant:"outline",size:"icon",className:"h-8 w-8 bg-transparent",onClick:()=>b({...s,children:Math.max(0,s.children-1)}),disabled:s.children<=0,children:(0,t.jsx)(u,{})}),(0,t.jsx)("span",{className:"w-8 text-center font-medium",children:s.children}),(0,t.jsx)(i.Button,{variant:"outline",size:"icon",className:"h-8 w-8 bg-transparent",onClick:()=>b({...s,children:Math.min(6,s.children+1)}),disabled:s.children>=6,children:(0,t.jsx)(p,{})})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{children:(0,t.jsx)("p",{className:"font-medium",children:L("rooms")})}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(i.Button,{variant:"outline",size:"icon",className:"h-8 w-8 bg-transparent",onClick:()=>b({...s,rooms:Math.max(1,s.rooms-1)}),disabled:s.rooms<=1,children:(0,t.jsx)(u,{})}),(0,t.jsx)("span",{className:"w-8 text-center font-medium",children:s.rooms}),(0,t.jsx)(i.Button,{variant:"outline",size:"icon",className:"h-8 w-8 bg-transparent",onClick:()=>b({...s,rooms:Math.min(5,s.rooms+1)}),disabled:s.rooms>=5,children:(0,t.jsx)(p,{})})]})]}),(0,t.jsx)(i.Button,{className:"w-full",onClick:()=>E(!1),children:L("confirm")})]})})]}),(0,t.jsx)(i.Button,{className:"h-14 text-base font-semibold",onClick:A,disabled:C,children:C?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v,{}),(0,t.jsx)("span",{className:"ml-2",children:"he"===I?"מחפש...":"Searching..."})]}):L("searchAvailability")})]}),S&&(0,t.jsx)("div",{className:"mt-4 p-3 bg-destructive/10 border border-destructive/20 rounded-lg text-destructive text-sm",children:S})]})}var w=e.i(657688),N=e.i(427250),y=e.i(994179);let k=e=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:(0,t.jsx)("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),C=e=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:(0,t.jsx)("path",{d:"M20 6 9 17l-5-5"})}),S=e=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:(0,t.jsx)("path",{d:"m6 9 6 6 6-6"})}),L=e=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:(0,t.jsx)("path",{d:"m18 15-6-6-6 6"})}),I=e=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[(0,t.jsx)("path",{d:"M18 6 6 18"}),(0,t.jsx)("path",{d:"m6 6 12 12"})]}),B=e=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[(0,t.jsx)("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),(0,t.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,t.jsx)("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),(0,t.jsx)("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),P=e=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[(0,t.jsx)("path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"}),(0,t.jsx)("circle",{cx:"12",cy:"10",r:"3"})]}),E=e=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:(0,t.jsx)("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),M=e=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[(0,t.jsx)("path",{d:"M10 2v2"}),(0,t.jsx)("path",{d:"M14 2v2"}),(0,t.jsx)("path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1"}),(0,t.jsx)("path",{d:"M6 2v2"})]}),O=e=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[(0,t.jsx)("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),(0,t.jsx)("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]}),T=e=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:(0,t.jsx)("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),D=e=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[(0,t.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,t.jsx)("path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"}),(0,t.jsx)("path",{d:"M2 12h20"})]}),A=e=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[(0,t.jsx)("path",{d:"M2 4v16"}),(0,t.jsx)("path",{d:"M2 8h18a2 2 0 0 0 2 2v10"}),(0,t.jsx)("path",{d:"M2 17h20"}),(0,t.jsx)("path",{d:"M6 8v9"})]}),W=e=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[(0,t.jsx)("path",{d:"M8 3H5a2 2 0 0 0-2 2v3"}),(0,t.jsx)("path",{d:"M21 8V5a2 2 0 0 0-2-2h-3"}),(0,t.jsx)("path",{d:"M3 16v3a2 2 0 0 0 2 2h3"}),(0,t.jsx)("path",{d:"M16 21h3a2 2 0 0 0 2-2v-3"})]}),F=e=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[(0,t.jsx)("path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"}),(0,t.jsx)("path",{d:"M7 2v20"}),(0,t.jsx)("path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"})]}),R=e=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[(0,t.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,t.jsx)("polyline",{points:"12 6 12 12 16 14"})]}),$=e=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:(0,t.jsx)("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})});var H=e.i(630374);function q({room:e}){let{addRoom:s,nights:l,hotel:o}=(0,a.useBooking)(),{t:c,locale:d,dir:m}=(0,n.useI18n)(),[x,u]=(0,r.useState)(!0),[p,g]=(0,r.useState)(0),[j,f]=(0,r.useState)(!1),v=(0,N.getRoomRatePlans)(e.id),b=e=>new Intl.NumberFormat("he"===d?"he-IL":"en-US",{style:"currency",currency:o?.currency||"ILS",minimumFractionDigits:0}).format(e),k=1===l?c("night"):c("nights");return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"bg-card rounded-xl border border-border overflow-hidden shadow-sm hover:shadow-md transition-shadow",dir:m,children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row",children:[(0,t.jsxs)("div",{className:"relative w-full md:w-72 h-48 md:h-auto flex-shrink-0",children:[(0,t.jsx)(w.default,{src:e.images[p]||"/placeholder.svg",alt:e.name,fill:!0,className:"object-cover cursor-pointer",onClick:()=>f(!0)}),e.images.length>1&&(0,t.jsx)("div",{className:"absolute bottom-2 left-2 flex gap-1",children:e.images.map((e,s)=>(0,t.jsx)("button",{className:(0,h.cn)("w-2 h-2 rounded-full transition-colors",s===p?"bg-white":"bg-white/50"),onClick:()=>g(s)},s))}),e.available<=3&&(0,t.jsx)(y.Badge,{className:(0,h.cn)("absolute top-2 bg-red-500 hover:bg-red-500","rtl"===m?"right-2":"left-2"),children:c("roomsLeft",{count:e.available})})]}),(0,t.jsxs)("div",{className:"flex-1 p-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-foreground",children:e.name}),(0,t.jsx)("button",{onClick:()=>u(!x),className:"text-muted-foreground hover:text-foreground md:hidden",children:x?(0,t.jsx)(L,{className:"h-5 w-5"}):(0,t.jsx)(S,{className:"h-5 w-5"})})]}),(0,t.jsx)("p",{className:"text-muted-foreground text-sm mb-3 line-clamp-2",children:e.description}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-muted-foreground mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(B,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:c("upToGuests",{count:e.maxGuests})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(W,{className:"h-4 w-4"}),(0,t.jsxs)("span",{children:[e.size," ",c("sqm")]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(A,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:e.bedType})]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[e.amenities.slice(0,5).map(e=>(0,t.jsx)(y.Badge,{variant:"outline",className:"text-xs",children:e},e)),e.amenities.length>5&&(0,t.jsxs)(y.Badge,{variant:"outline",className:"text-xs",children:["+",e.amenities.length-5]})]})]})]}),x&&(0,t.jsx)("div",{className:"border-t border-border",children:(0,t.jsx)("div",{className:"divide-y divide-border",children:v.map(r=>(0,t.jsx)("div",{className:"p-4 hover:bg-muted/30 transition-colors",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("h4",{className:"font-semibold text-foreground",children:r.name}),(e=>{switch(e){case"free":return(0,t.jsx)(y.Badge,{variant:"secondary",className:"bg-green-100 text-green-700 hover:bg-green-100",children:c("freeCancellation")});case"non-refundable":return(0,t.jsx)(y.Badge,{variant:"secondary",className:"bg-amber-100 text-amber-700 hover:bg-amber-100",children:c("nonRefundable")});case"partial":return(0,t.jsx)(y.Badge,{variant:"secondary",className:"bg-blue-100 text-blue-700 hover:bg-blue-100",children:c("partialRefund")})}})(r.cancellationPolicy)]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-2",children:[(e=>{switch(e){case"breakfast":return(0,t.jsx)(M,{className:"h-4 w-4"});case"half-board":case"full-board":case"all-inclusive":return(0,t.jsx)(F,{className:"h-4 w-4"});default:return null}})(r.mealPlan),(0,t.jsx)("span",{children:(e=>{switch(e){case"room-only":return c("roomOnly");case"breakfast":return c("breakfast");case"half-board":return c("halfBoard");case"full-board":return c("fullBoard");case"all-inclusive":return c("allInclusive")}})(r.mealPlan)})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-x-4 gap-y-1",children:r.includes.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[(0,t.jsx)(C,{className:"h-3 w-3 text-green-600"}),(0,t.jsx)("span",{children:e})]},e))})]}),(0,t.jsxs)("div",{className:(0,h.cn)("flex items-center gap-4 md:flex-col","rtl"===m?"md:items-start":"md:items-end"),children:[(0,t.jsxs)("div",{className:"rtl"===m?"text-left md:text-left":"text-right md:text-right",children:[r.originalPrice&&(0,t.jsx)("div",{className:"text-sm text-muted-foreground line-through",children:b(r.originalPrice*l)}),(0,t.jsx)("div",{className:"text-2xl font-bold text-foreground",children:b(r.price*l)}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:c("forNights",{count:l,nightsText:k})})]}),(0,t.jsx)(i.Button,{onClick:()=>s({room:e,ratePlan:r,quantity:1}),className:"min-w-[100px]",children:c("select")})]})]})},r.id))})})]}),(0,t.jsx)(H.Dialog,{open:j,onOpenChange:f,children:(0,t.jsxs)(H.DialogContent,{className:"max-w-4xl",children:[(0,t.jsx)(H.DialogHeader,{children:(0,t.jsx)(H.DialogTitle,{children:e.name})}),(0,t.jsx)("div",{className:"relative aspect-video",children:(0,t.jsx)(w.default,{src:e.images[p]||"/placeholder.svg",alt:e.name,fill:!0,className:"object-cover rounded-lg"})}),(0,t.jsx)("div",{className:"flex gap-2 overflow-x-auto py-2",children:e.images.map((e,s)=>(0,t.jsx)("button",{onClick:()=>g(s),className:(0,h.cn)("relative w-20 h-14 rounded-md overflow-hidden flex-shrink-0 ring-2 transition-all",s===p?"ring-primary":"ring-transparent hover:ring-muted-foreground"),children:(0,t.jsx)(w.default,{src:e||"/placeholder.svg",alt:"",fill:!0,className:"object-cover"})},s))})]})})]})}function U({showContinue:e=!0,onContinue:s,className:o}){let{hotel:c,search:d,selectedRooms:m,removeRoom:x,updateRoomQuantity:u,nights:p,totalPrice:g,setCurrentStep:j}=(0,a.useBooking)(),{t:f,locale:v,dir:b}=(0,n.useI18n)(),[N,y]=(0,r.useState)(!0),k=e=>new Intl.NumberFormat("he"===v?"he-IL":"en-US",{style:"currency",currency:c?.currency||"ILS",minimumFractionDigits:0}).format(e),C=Math.round(.05*g),S=g-C,L=1===p?"he"===v?"לילה":"night":"he"===v?"לילות":"nights",B=m[0]?.room?.images?.[0]||"/luxury-hotel-pool.png";return 0===m.length?(0,t.jsxs)("div",{className:(0,h.cn)("bg-white rounded-xl border border-gray-200 p-6 shadow-sm",o),dir:b,children:[(0,t.jsx)("h3",{className:"font-semibold text-lg mb-4 text-gray-900",children:"he"===v?"סיכום הזמנה":"Booking Summary"}),(0,t.jsx)("p",{className:"text-gray-500 text-sm text-center py-8",children:"he"===v?"טרם נבחרו חדרים":"No rooms selected"})]}):(0,t.jsxs)("div",{className:(0,h.cn)("bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",o),dir:b,children:[(0,t.jsx)("div",{className:"relative h-48 w-full",children:(0,t.jsx)(w.default,{src:B||"/placeholder.svg",alt:c?.name||"Hotel",fill:!0,className:"object-cover"})}),(0,t.jsxs)("div",{className:"p-4 border-b border-gray-100",children:[(0,t.jsx)("h3",{className:"font-bold text-lg text-gray-900 mb-2",children:"he"===v?"סיכום הזמנה":"Booking Summary"}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[(0,t.jsx)("span",{className:"font-medium",children:c?.name||"המלון"}),(0,t.jsxs)("span",{children:[(0,l.formatDate)(d.checkIn,v)," - ",(0,l.formatDate)(d.checkOut,v)]})]}),(0,t.jsx)("div",{className:"text-sm text-gray-500 mt-1",children:`${p} ${L}`})]}),(0,t.jsx)("div",{className:"p-4 space-y-3",children:m.map((e,s)=>(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"bg-blue-600 text-white text-xs font-bold px-2 py-1 rounded",children:"he"===v?`חדר ${s+1}`:`Room ${s+1}`}),(0,t.jsx)("span",{className:"text-xs text-amber-600 font-medium",children:"he"===v?"הנחה למזמינים באתר":"Website discount"})]}),(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",className:"h-6 w-6 text-gray-400 hover:text-red-500",onClick:()=>x(e.room.id,e.ratePlan.id),children:(0,t.jsx)(I,{className:"h-4 w-4"})})]}),(0,t.jsxs)("p",{className:"text-sm text-gray-700 mt-2",children:[e.room.name,", ",e.ratePlan.name]}),(0,t.jsxs)("p",{className:"text-lg font-bold text-gray-900 mt-1",children:["he"===v?"מחיר:":"Price:"," ",k(e.ratePlan.price*e.quantity*p)]})]},`${e.room.id}-${e.ratePlan.id}`))}),N&&(0,t.jsx)("div",{className:"mx-4 mb-4 bg-amber-50 border border-amber-200 rounded-lg p-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{children:(0,t.jsx)("p",{className:"text-sm font-medium text-amber-800",children:"he"===v?`הצטרפות לחוג השמש תחסוך לך ${k(C)}`:`Join the club to save ${k(C)}`})}),(0,t.jsx)(i.Button,{size:"sm",className:"bg-amber-500 hover:bg-amber-600 text-white rounded-full px-4",children:"he"===v?"חוג השמש":"Sun Club"})]})}),(0,t.jsxs)("div",{className:"p-4 border-t border-gray-100 space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"he"===v?"מחיר באתר":"Website price"}),(0,t.jsx)("span",{className:"text-gray-900 font-medium",children:k(g)})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"he"===v?"מחיר מועדון":"Club price"}),(0,t.jsx)("span",{className:"text-blue-600 font-bold",children:k(S)})]})]}),e&&(0,t.jsx)("div",{className:"p-4 pt-0",children:(0,t.jsx)(i.Button,{className:"w-full bg-blue-600 hover:bg-blue-700",size:"lg",onClick:()=>{j(3),s?.()},children:"he"===v?"המשך להזמנה":"Continue to booking"})})]})}var _=e.i(10708),z=e.i(184762),V=e.i(62870),G=e.i(970065);function J({onSubmit:e}){let{hotel:s}=(0,a.useBooking)(),{t:l,locale:o,dir:d}=(0,n.useI18n)(),[h,m]=(0,r.useState)({firstName:"",lastName:"",email:"",phone:"",country:"IL",specialRequests:"",arrivalTime:"",firstNameHe:"",lastNameHe:"",firstNameEn:"",lastNameEn:""}),[x,u]=(0,r.useState)({}),p=(e,s)=>{m(t=>({...t,[e]:s})),x[e]&&u(s=>({...s,[e]:void 0}))};return(0,t.jsx)("form",{onSubmit:s=>{let t,r;s.preventDefault(),t={},r="he"===o?"שדה חובה":"Required",h.firstNameHe?.trim()||(t.firstNameHe=r),h.lastNameHe?.trim()||(t.lastNameHe=r),h.firstNameEn?.trim()||(t.firstNameEn=r),h.lastNameEn?.trim()||(t.lastNameEn=r),h.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h.email)||(t.email="he"===o?"אימייל לא תקין":"Invalid email"):t.email=r,h.phone.trim()?/^[0-9+\-\s()]{9,}$/.test(h.phone)||(t.phone="he"===o?"טלפון לא תקין":"Invalid phone"):t.phone=r,u(t),0===Object.keys(t).length&&e({...h,firstName:h.firstNameEn||h.firstNameHe||"",lastName:h.lastNameEn||h.lastNameHe||""})},dir:d,children:(0,t.jsxs)(G.Card,{className:"border-0 shadow-none bg-transparent",children:[(0,t.jsxs)(G.CardHeader,{className:"px-0",children:[(0,t.jsx)(G.CardTitle,{className:"text-xl text-gray-900",children:"he"===o?"פרטים אישיים":"Personal Details"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"he"===o?"השדות המסומנים בכוכבית הינם שדות חובה":"Fields marked with asterisk are required"})]}),(0,t.jsxs)(G.CardContent,{className:"px-0 space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"font-medium text-gray-900",children:"he"===o?"שם בעברית":"Name in Hebrew"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(_.Label,{htmlFor:"firstNameHe",className:"text-gray-700",children:["he"===o?"שם פרטי":"First Name"," *"]}),(0,t.jsx)(c.Input,{id:"firstNameHe",value:h.firstNameHe,onChange:e=>p("firstNameHe",e.target.value),className:x.firstNameHe?"border-red-500":"border-gray-300",placeholder:"he"===o?"הזן שם פרטי":"Enter first name"}),x.firstNameHe&&(0,t.jsx)("p",{className:"text-xs text-red-500",children:x.firstNameHe})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(_.Label,{htmlFor:"lastNameHe",className:"text-gray-700",children:["he"===o?"שם משפחה":"Last Name"," *"]}),(0,t.jsx)(c.Input,{id:"lastNameHe",value:h.lastNameHe,onChange:e=>p("lastNameHe",e.target.value),className:x.lastNameHe?"border-red-500":"border-gray-300",placeholder:"he"===o?"הזן שם משפחה":"Enter last name"}),x.lastNameHe&&(0,t.jsx)("p",{className:"text-xs text-red-500",children:x.lastNameHe})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"font-medium text-gray-900",children:"he"===o?"שם באנגלית":"Name in English"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(_.Label,{htmlFor:"firstNameEn",className:"text-gray-700",children:["he"===o?"שם פרטי":"First Name"," *"]}),(0,t.jsx)(c.Input,{id:"firstNameEn",value:h.firstNameEn,onChange:e=>p("firstNameEn",e.target.value),className:x.firstNameEn?"border-red-500":"border-gray-300",placeholder:"Enter first name",dir:"ltr"}),x.firstNameEn&&(0,t.jsx)("p",{className:"text-xs text-red-500",children:x.firstNameEn})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(_.Label,{htmlFor:"lastNameEn",className:"text-gray-700",children:["he"===o?"שם משפחה":"Last Name"," *"]}),(0,t.jsx)(c.Input,{id:"lastNameEn",value:h.lastNameEn,onChange:e=>p("lastNameEn",e.target.value),className:x.lastNameEn?"border-red-500":"border-gray-300",placeholder:"Enter last name",dir:"ltr"}),x.lastNameEn&&(0,t.jsx)("p",{className:"text-xs text-red-500",children:x.lastNameEn})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"font-medium text-gray-900",children:"he"===o?"פרטי התקשרות":"Contact Details"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(_.Label,{htmlFor:"email",className:"text-gray-700 flex items-center gap-1",children:[(0,t.jsx)(O,{className:"h-4 w-4"}),"he"===o?'דוא"ל':"Email"," *"]}),(0,t.jsx)(c.Input,{id:"email",type:"email",value:h.email,onChange:e=>p("email",e.target.value),className:x.email?"border-red-500":"border-gray-300",placeholder:"example@email.com",dir:"ltr"}),x.email&&(0,t.jsx)("p",{className:"text-xs text-red-500",children:x.email})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(_.Label,{htmlFor:"phone",className:"text-gray-700 flex items-center gap-1",children:[(0,t.jsx)(T,{className:"h-4 w-4"}),"he"===o?"טלפון":"Phone"," *"]}),(0,t.jsx)(c.Input,{id:"phone",type:"tel",value:h.phone,onChange:e=>p("phone",e.target.value),className:x.phone?"border-red-500":"border-gray-300",placeholder:"050-1234567",dir:"ltr"}),x.phone&&(0,t.jsx)("p",{className:"text-xs text-red-500",children:x.phone})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(_.Label,{className:"text-gray-700 flex items-center gap-1",children:[(0,t.jsx)(D,{className:"h-4 w-4"}),"he"===o?"מדינה":"Country"]}),(0,t.jsxs)(V.Select,{value:h.country,onValueChange:e=>p("country",e),children:[(0,t.jsx)(V.SelectTrigger,{className:"border-gray-300",children:(0,t.jsx)(V.SelectValue,{})}),(0,t.jsx)(V.SelectContent,{children:[{code:"IL",name:"he"===o?"ישראל":"Israel"},{code:"US",name:"he"===o?'ארה"ב':"USA"},{code:"GB",name:"he"===o?"בריטניה":"UK"},{code:"DE",name:"he"===o?"גרמניה":"Germany"},{code:"FR",name:"he"===o?"צרפת":"France"}].map(e=>(0,t.jsx)(V.SelectItem,{value:e.code,children:e.name},e.code))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(_.Label,{className:"text-gray-700 flex items-center gap-1",children:[(0,t.jsx)(R,{className:"h-4 w-4"}),"he"===o?"שעת הגעה משוערת":"Estimated Arrival"]}),(0,t.jsxs)(V.Select,{value:h.arrivalTime,onValueChange:e=>p("arrivalTime",e),children:[(0,t.jsx)(V.SelectTrigger,{className:"border-gray-300",children:(0,t.jsx)(V.SelectValue,{placeholder:"he"===o?"בחר שעה":"Select time"})}),(0,t.jsx)(V.SelectContent,{children:["14:00 - 15:00","15:00 - 16:00","16:00 - 17:00","17:00 - 18:00","18:00 - 19:00","19:00 - 20:00","20:00+"].map(e=>(0,t.jsx)(V.SelectItem,{value:e,children:e},e))})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(_.Label,{htmlFor:"specialRequests",className:"text-gray-700 flex items-center gap-1",children:[(0,t.jsx)($,{className:"h-4 w-4"}),"he"===o?"בקשות מיוחדות":"Special Requests"]}),(0,t.jsx)(z.Textarea,{id:"specialRequests",value:h.specialRequests,onChange:e=>p("specialRequests",e.target.value),placeholder:"he"===o?"בקשות מיוחדות (אופציונלי)":"Special requests (optional)",rows:3,className:"border-gray-300"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"he"===o?"בקשות מיוחדות כפופות לזמינות ואינן מובטחות":"Special requests are subject to availability and not guaranteed"})]}),(0,t.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 text-sm",children:[(0,t.jsx)("p",{className:"font-medium text-blue-900 mb-2",children:"he"===o?`מדיניות כניסה - ${s?.name||"המלון"}`:`Check-in Policy - ${s?.name||"Hotel"}`}),(0,t.jsxs)("p",{className:"text-blue-700",children:["he"===o?"צ'ק-אין":"Check-in",": ",s?.policies?.checkIn||"15:00"," |"," ","he"===o?"צ'ק-אאוט":"Check-out",": ",s?.policies?.checkOut||"11:00"]})]}),(0,t.jsx)(i.Button,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700",size:"lg",children:"he"===o?"המשך לתשלום":"Continue to Payment"})]})]})})}e.i(247167);var K="clover",Y="https://js.stripe.com",Z="".concat(Y,"/").concat(K,"/stripe.js"),Q=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,X=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,ee=function(){for(var e=document.querySelectorAll('script[src^="'.concat(Y,'"]')),s=0;s<e.length;s++){var t,r=e[s];if(t=r.src,Q.test(t)||X.test(t))return r}return null},es=function(e){var s=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",t=document.createElement("script");t.src="".concat(Z).concat(s);var r=document.head||document.body;if(!r)throw Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(t),t},et=function(e,s){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"8.5.3",startTime:s})},er=null,ea=null,en=null,el=function(e,s,t){if(null===e)return null;var r,a=s[0].match(/^pk_test/),n=3===(r=e.version)?"v3":r;a&&n!==K&&console.warn("Stripe.js@".concat(n," was loaded on the page, but @stripe/stripe-js@").concat("8.5.3"," expected Stripe.js@").concat(K,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var l=e.apply(void 0,s);return et(l,t),l},ei=!1,eo=function(){return s?s:s=(null!==er?er:(er=new Promise(function(e,s){if("undefined"==typeof window||"undefined"==typeof document)return void e(null);if(window.Stripe,window.Stripe)return void e(window.Stripe);try{var t,r=ee();r?r&&null!==en&&null!==ea&&(r.removeEventListener("load",en),r.removeEventListener("error",ea),null==(t=r.parentNode)||t.removeChild(r),r=es(null)):r=es(null),en=function(){window.Stripe?e(window.Stripe):s(Error("Stripe.js not available"))},ea=function(e){s(Error("Failed to load Stripe.js",{cause:e}))},r.addEventListener("load",en),r.addEventListener("error",ea)}catch(e){s(e);return}})).catch(function(e){return er=null,Promise.reject(e)})).catch(function(e){return s=null,Promise.reject(e)})};Promise.resolve().then(function(){return eo()}).catch(function(e){ei||console.warn(e)});var ec=e.i(745009);function ed(e,s){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),t.push.apply(t,r)}return t}function eh(e){for(var s=1;s<arguments.length;s++){var t=null!=arguments[s]?arguments[s]:{};s%2?ed(Object(t),!0).forEach(function(s){ex(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ed(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function em(e){return(em="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ex(e,s,t){return s in e?Object.defineProperty(e,s,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[s]=t,e}function eu(e,s){return function(e){if(Array.isArray(e))return e}(e)||function(e,s){var t,r,a=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=a){var n=[],l=!0,i=!1;try{for(a=a.call(e);!(l=(t=a.next()).done)&&(n.push(t.value),!s||n.length!==s);l=!0);}catch(e){i=!0,r=e}finally{try{l||null==a.return||a.return()}finally{if(i)throw r}}return n}}(e,s)||function(e,s){if(e){if("string"==typeof e)return ep(e,s);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ep(e,s)}}(e,s)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ep(e,s){(null==s||s>e.length)&&(s=e.length);for(var t=0,r=Array(s);t<s;t++)r[t]=e[t];return r}var eg=function(e,s,t){var a=!!t,n=r.default.useRef(t);r.default.useEffect(function(){n.current=t},[t]),r.default.useEffect(function(){if(!a||!e)return function(){};var t=function(){n.current&&n.current.apply(n,arguments)};return e.on(s,t),function(){e.off(s,t)}},[a,s,e,n])},ej=function(e){var s=r.default.useRef(e);return r.default.useEffect(function(){s.current=e},[e]),s.current},ef=function(e){return null!==e&&"object"===em(e)},ev="[object Object]",eb=function e(s,t){if(!ef(s)||!ef(t))return s===t;var r=Array.isArray(s);if(r!==Array.isArray(t))return!1;var a=Object.prototype.toString.call(s)===ev;if(a!==(Object.prototype.toString.call(t)===ev))return!1;if(!a&&!r)return s===t;var n=Object.keys(s),l=Object.keys(t);if(n.length!==l.length)return!1;for(var i={},o=0;o<n.length;o+=1)i[n[o]]=!0;for(var c=0;c<l.length;c+=1)i[l[c]]=!0;var d=Object.keys(i);return d.length===n.length&&d.every(function(r){return e(s[r],t[r])})},ew=function(e,s,t){return ef(e)?Object.keys(e).reduce(function(r,a){var n=!ef(s)||!eb(e[a],s[a]);return t.includes(a)?(n&&console.warn("Unsupported prop change: options.".concat(a," is not a mutable property.")),r):n?eh(eh({},r||{}),{},ex({},a,e[a])):r},null):null},eN="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",ey=function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:eN;if(null===e||ef(e)&&"function"==typeof e.elements&&"function"==typeof e.createToken&&"function"==typeof e.createPaymentMethod&&"function"==typeof e.confirmCardPayment)return e;throw Error(s)},ek=function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:eN;if(ef(e)&&"function"==typeof e.then)return{tag:"async",stripePromise:Promise.resolve(e).then(function(e){return ey(e,s)})};var t=ey(e,s);return null===t?{tag:"empty"}:{tag:"sync",stripe:t}},eC=function(e){e&&e._registerWrapper&&e.registerAppInfo&&(e._registerWrapper({name:"react-stripe-js",version:"5.4.1"}),e.registerAppInfo({name:"react-stripe-js",version:"5.4.1",url:"https://stripe.com/docs/stripe-js/react"}))},eS=r.default.createContext(null);eS.displayName="ElementsContext";var eL=function(e,s){if(!e)throw Error("Could not find Elements context; You need to wrap the part of your app that ".concat(s," in an <Elements> provider."));return e},eI=function(e){var s=e.stripe,t=e.options,a=e.children,n=r.default.useMemo(function(){return ek(s)},[s]),l=eu(r.default.useState(function(){return{stripe:"sync"===n.tag?n.stripe:null,elements:"sync"===n.tag?n.stripe.elements(t):null}}),2),i=l[0],o=l[1];r.default.useEffect(function(){var e=!0,s=function(e){o(function(s){return s.stripe?s:{stripe:e,elements:e.elements(t)}})};return"async"!==n.tag||i.stripe?"sync"!==n.tag||i.stripe||s(n.stripe):n.stripePromise.then(function(t){t&&e&&s(t)}),function(){e=!1}},[n,i,t]);var c=ej(s);r.default.useEffect(function(){null!==c&&c!==s&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[c,s]);var d=ej(t);return r.default.useEffect(function(){if(i.elements){var e=ew(t,d,["clientSecret","fonts"]);e&&i.elements.update(e)}},[t,d,i.elements]),r.default.useEffect(function(){eC(i.stripe)},[i.stripe]),r.default.createElement(eS.Provider,{value:i},a)};eI.propTypes={stripe:ec.default.any,options:ec.default.object};ec.default.func.isRequired;var eB=r.default.createContext(null);eB.displayName="CheckoutContext",ec.default.any,ec.default.shape({clientSecret:ec.default.oneOfType([ec.default.string,ec.default.instanceOf(Promise)]).isRequired,elementsOptions:ec.default.object}).isRequired;var eP=function(e){var s=r.default.useContext(eB),t=r.default.useContext(eS);if(!s)return eL(t,e);if(!t)return s;throw Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."))},eE=["mode"],eM=function(e,s){var t="".concat(e.charAt(0).toUpperCase()+e.slice(1),"Element"),a=s?function(e){eP("mounts <".concat(t,">"));var s=e.id,a=e.className;return r.default.createElement("div",{id:s,className:a})}:function(s){var a,n=s.id,l=s.className,i=s.options,o=void 0===i?{}:i,c=s.onBlur,d=s.onFocus,h=s.onReady,m=s.onChange,x=s.onEscape,u=s.onClick,p=s.onLoadError,g=s.onLoaderStart,j=s.onNetworksChange,f=s.onConfirm,v=s.onCancel,b=s.onShippingAddressChange,w=s.onShippingRateChange,N=s.onSavedPaymentMethodRemove,y=s.onSavedPaymentMethodUpdate,k=eP("mounts <".concat(t,">")),C="elements"in k?k.elements:null,S="checkoutState"in k?k.checkoutState:null,L=(null==S?void 0:S.type)==="success"||(null==S?void 0:S.type)==="loading"?S.sdk:null,I=eu(r.default.useState(null),2),B=I[0],P=I[1],E=r.default.useRef(null),M=r.default.useRef(null);eg(B,"blur",c),eg(B,"focus",d),eg(B,"escape",x),eg(B,"click",u),eg(B,"loaderror",p),eg(B,"loaderstart",g),eg(B,"networkschange",j),eg(B,"confirm",f),eg(B,"cancel",v),eg(B,"shippingaddresschange",b),eg(B,"shippingratechange",w),eg(B,"savedpaymentmethodremove",N),eg(B,"savedpaymentmethodupdate",y),eg(B,"change",m),h&&(a="expressCheckout"===e?h:function(){h(B)}),eg(B,"ready",a),r.default.useLayoutEffect(function(){if(null===E.current&&null!==M.current&&(C||L)){var s=null;if(L)switch(e){case"paymentForm":s=L.createPaymentFormElement();break;case"payment":s=L.createPaymentElement(o);break;case"address":if("mode"in o){var r=o.mode,a=function(e,s){if(null==e)return{};var t,r,a=function(e,s){if(null==e)return{};var t,r,a={},n=Object.keys(e);for(r=0;r<n.length;r++)t=n[r],s.indexOf(t)>=0||(a[t]=e[t]);return a}(e,s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)t=n[r],!(s.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}(o,eE);if("shipping"===r)s=L.createShippingAddressElement(a);else if("billing"===r)s=L.createBillingAddressElement(a);else throw Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":s=L.createExpressCheckoutElement(o);break;case"currencySelector":s=L.createCurrencySelectorElement();break;case"taxId":s=L.createTaxIdElement(o);break;default:throw Error("Invalid Element type ".concat(t,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else C&&(s=C.create(e,o));E.current=s,P(s),s&&s.mount(M.current)}},[C,L,o]);var O=ej(o);return r.default.useEffect(function(){if(E.current){var e=ew(o,O,["paymentRequest"]);e&&"update"in E.current&&E.current.update(e)}},[o,O]),r.default.useLayoutEffect(function(){return function(){if(E.current&&"function"==typeof E.current.destroy)try{E.current.destroy(),E.current=null}catch(e){}}},[]),r.default.createElement("div",{id:n,className:l,ref:M})};return a.propTypes={id:ec.default.string,className:ec.default.string,onChange:ec.default.func,onBlur:ec.default.func,onFocus:ec.default.func,onReady:ec.default.func,onEscape:ec.default.func,onClick:ec.default.func,onLoadError:ec.default.func,onLoaderStart:ec.default.func,onNetworksChange:ec.default.func,onConfirm:ec.default.func,onCancel:ec.default.func,onShippingAddressChange:ec.default.func,onShippingRateChange:ec.default.func,onSavedPaymentMethodRemove:ec.default.func,onSavedPaymentMethodUpdate:ec.default.func,options:ec.default.object},a.displayName=t,a.__elementType=e,a},eO="undefined"==typeof window;r.default.createContext(null).displayName="EmbeddedCheckoutProviderContext",eM("auBankAccount",eO),eM("card",eO),eM("cardNumber",eO),eM("cardExpiry",eO),eM("cardCvc",eO),eM("iban",eO);var eT=eM("payment",eO);eM("expressCheckout",eO),eM("paymentRequestButton",eO),eM("linkAuthentication",eO),eM("address",eO),eM("shippingAddress",eO),eM("paymentMethodMessaging",eO),eM("taxId",eO);var eD=e.i(625959),eA=e.i(781947);let eW=({className:e})=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[(0,t.jsx)("rect",{width:"20",height:"14",x:"2",y:"5",rx:"2"}),(0,t.jsx)("line",{x1:"2",x2:"22",y1:"10",y2:"10"})]}),eF=({className:e})=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[(0,t.jsx)("rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}),(0,t.jsx)("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),eR=({className:e})=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:(0,t.jsx)("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"})}),e$=({className:e})=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[(0,t.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,t.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"12"}),(0,t.jsx)("line",{x1:"12",x2:"12.01",y1:"16",y2:"16"})]}),eH=({className:e})=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:(0,t.jsx)("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),eq=function(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];ei=!0;var r=Date.now();return eo().then(function(e){return el(e,s,r)})}("pk_test_demo_stripe_key");function eU({onSuccess:e,onError:s}){var l;let o=eP("calls useStripe()").stripe,c=(l="calls useElements()",eL(r.default.useContext(eS),l)).elements,{hotel:d,totalPrice:h}=(0,a.useBooking)(),{t:m,locale:x,dir:u}=(0,n.useI18n)(),[p,g]=(0,r.useState)(!1),[j,f]=(0,r.useState)(!1),[v,b]=(0,r.useState)(null),w=.17*h,N=h+w,y=e=>new Intl.NumberFormat("he"===x?"he-IL":"en-US",{style:"currency",currency:d?.currency||"ILS",minimumFractionDigits:0}).format(e),k=async t=>{if(t.preventDefault(),!o||!c)return;if(!j)return void b(m("mustAgreeTerms"));g(!0),b(null);let{error:r,paymentIntent:a}=await o.confirmPayment({elements:c,confirmParams:{return_url:`${window.location.origin}/booking/confirmation`},redirect:"if_required"});r?(b(r.message||m("paymentError")),s(r.message||"Payment failed"),g(!1)):a&&"succeeded"===a.status&&e(a.id)};return(0,t.jsx)("form",{onSubmit:k,dir:u,children:(0,t.jsxs)(G.Card,{children:[(0,t.jsx)(G.CardHeader,{children:(0,t.jsxs)(G.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(eW,{className:"h-5 w-5"}),m("securePayment")]})}),(0,t.jsxs)(G.CardContent,{className:"space-y-6",children:[(0,t.jsx)("div",{className:"p-4 border rounded-lg bg-background",children:(0,t.jsx)(eT,{options:{layout:"tabs",defaultValues:{billingDetails:{address:{country:"IL"}}}}})}),v&&(0,t.jsxs)(eA.Alert,{variant:"destructive",children:[(0,t.jsx)(e$,{className:"h-4 w-4"}),(0,t.jsx)(eA.AlertDescription,{children:v})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg",children:[(0,t.jsx)(eR,{className:"h-8 w-8 text-green-600 shrink-0"}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("p",{className:"font-medium",children:m("securePaymentStripe")}),(0,t.jsx)("p",{className:"text-muted-foreground",children:m("encryptedSecure")})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-center gap-3 py-2",children:[(0,t.jsx)("img",{src:"/visa-card-logo.png",alt:"Visa",className:"h-6"}),(0,t.jsx)("img",{src:"/mastercard-logo.png",alt:"Mastercard",className:"h-6"}),(0,t.jsx)("img",{src:"/generic-credit-card-logo.png",alt:"Amex",className:"h-6"}),(0,t.jsx)("img",{src:"/apple-pay-logo.png",alt:"Apple Pay",className:"h-6"})]}),(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)(eD.Checkbox,{id:"terms",checked:j,onCheckedChange:e=>{f(!0===e),v===m("mustAgreeTerms")&&b(null)}}),(0,t.jsx)("div",{className:"space-y-1",children:(0,t.jsxs)(_.Label,{htmlFor:"terms",className:"text-sm cursor-pointer",children:[m("termsAgree"),(0,t.jsx)("a",{href:"#",className:"text-primary hover:underline mx-1",children:m("bookingTerms")}),m("and"),(0,t.jsx)("a",{href:"#",className:`text-primary hover:underline ${"rtl"===u?"mr-1":"ml-1"}`,children:m("cancellationPolicy")})]})})]}),(0,t.jsxs)("div",{className:"border-t pt-4",children:[(0,t.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{children:m("subtotal")}),(0,t.jsx)("span",{children:y(h)})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{children:m("vat")}),(0,t.jsx)("span",{children:y(w)})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center pt-2 border-t",children:[(0,t.jsx)("span",{className:"text-lg font-medium",children:m("totalToPay")}),(0,t.jsx)("span",{className:"text-2xl font-bold text-primary",children:y(N)})]})]}),(0,t.jsx)(i.Button,{type:"submit",className:"w-full",size:"lg",disabled:p||!o||!c,children:p?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eH,{className:`h-4 w-4 animate-spin ${"rtl"===u?"ml-2":"mr-2"}`}),m("processingPayment")]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eF,{className:`h-4 w-4 ${"rtl"===u?"ml-2":"mr-2"}`}),m("pay")," ",y(N)]})})]})]})]})})}function e_({onSuccess:e}){let{hotel:s,totalPrice:l,guestDetails:i,selectedRooms:o,search:c,nights:d}=(0,a.useBooking)(),{t:h,locale:m}=(0,n.useI18n)(),[x,u]=(0,r.useState)(null),[p,g]=(0,r.useState)(null),[j,f]=(0,r.useState)(!0),v=l+.17*l;return((0,r.useEffect)(()=>{let e=async()=>{try{let e=await fetch("/api/stripe/create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:v,currency:s?.currency||"ILS",customerEmail:i?.email,customerName:`${i?.firstName} ${i?.lastName}`,metadata:{hotel_id:s?.id,hotel_name:s?.name,check_in:c.checkIn?.toISOString(),check_out:c.checkOut?.toISOString(),nights:d,rooms:o.map(e=>e.room.name).join(", "),guest_email:i?.email,guest_phone:i?.phone}})}),t=await e.json();t.error?g(t.error):u(t.clientSecret)}catch(e){g(h("paymentFormError"))}finally{f(!1)}};v>0&&e()},[v,s,i,c,d,o,h]),j)?(0,t.jsx)(G.Card,{children:(0,t.jsx)(G.CardContent,{className:"py-12",children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4",children:[(0,t.jsx)(eH,{className:"h-8 w-8 animate-spin text-primary"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:h("loadingPaymentForm")})]})})}):p?(0,t.jsx)(G.Card,{children:(0,t.jsx)(G.CardContent,{className:"py-12",children:(0,t.jsxs)(eA.Alert,{variant:"destructive",children:[(0,t.jsx)(e$,{className:"h-4 w-4"}),(0,t.jsx)(eA.AlertDescription,{children:p})]})})}):x?(0,t.jsx)(eI,{stripe:eq,options:{clientSecret:x,appearance:{theme:"stripe",variables:{colorPrimary:"#0066cc",colorBackground:"#ffffff",colorText:"#1a1a1a",colorDanger:"#dc2626",fontFamily:"system-ui, sans-serif",borderRadius:"8px"},rules:{".Input":{border:"1px solid #e5e7eb",boxShadow:"none"},".Input:focus":{border:"1px solid #0066cc",boxShadow:"0 0 0 1px #0066cc"}}},locale:"he"===m?"he":"en"},children:(0,t.jsx)(eU,{onSuccess:e,onError:g})}):null}var ez=e.i(269035);let eV=({className:e})=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[(0,t.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,t.jsx)("path",{d:"m9 12 2 2 4-4"})]}),eG=({className:e})=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[(0,t.jsx)("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),(0,t.jsx)("line",{x1:"16",x2:"16",y1:"2",y2:"6"}),(0,t.jsx)("line",{x1:"8",x2:"8",y1:"2",y2:"6"}),(0,t.jsx)("line",{x1:"3",x2:"21",y1:"10",y2:"10"})]}),eJ=({className:e})=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:(0,t.jsx)("path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"})}),eK=({className:e})=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[(0,t.jsx)("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),(0,t.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,t.jsx)("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),(0,t.jsx)("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),eY=({className:e})=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[(0,t.jsx)("path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"}),(0,t.jsx)("circle",{cx:"12",cy:"10",r:"3"})]}),eZ=({className:e})=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[(0,t.jsx)("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),(0,t.jsx)("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]}),eQ=({className:e})=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:(0,t.jsx)("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),eX=({className:e})=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[(0,t.jsx)("polyline",{points:"6 9 6 2 18 2 18 9"}),(0,t.jsx)("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),(0,t.jsx)("rect",{width:"12",height:"8",x:"6",y:"14"})]}),e0=({className:e})=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[(0,t.jsx)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),(0,t.jsx)("polyline",{points:"7 10 12 15 17 10"}),(0,t.jsx)("line",{x1:"12",x2:"12",y1:"15",y2:"3"})]}),e2=({className:e})=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[(0,t.jsx)("rect",{width:"20",height:"14",x:"2",y:"5",rx:"2"}),(0,t.jsx)("line",{x1:"2",x2:"22",y1:"10",y2:"10"})]});function e1({confirmationNumber:e,paymentIntentId:s}){let{hotel:r,search:o,selectedRooms:c,guestDetails:d,nights:h,totalPrice:m}=(0,a.useBooking)(),{t:x,locale:u,dir:p}=(0,n.useI18n)(),g=.17*m,j=x(1===h?"night":"nights"),f=e=>new Intl.NumberFormat("he"===u?"he-IL":"en-US",{style:"currency",currency:r?.currency||"ILS",minimumFractionDigits:0}).format(e),v=e=>e.toLocaleDateString("he"===u?"he-IL":"en-US",{weekday:"long"});return(0,t.jsxs)("div",{className:"max-w-2xl mx-auto",dir:p,children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-green-100 mb-4",children:(0,t.jsx)(eV,{className:"h-10 w-10 text-green-600"})}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-foreground mb-2",children:x("bookingConfirmed")}),(0,t.jsxs)("p",{className:"text-muted-foreground",children:[x("confirmationSent")," ",(0,t.jsx)("span",{className:"font-medium",children:d?.email})]}),(0,t.jsx)("div",{className:"flex items-center justify-center gap-2 mt-3",children:(0,t.jsxs)(y.Badge,{variant:"secondary",className:"gap-1",children:[(0,t.jsx)(e2,{className:"h-3 w-3"}),x("paidViaStripe")]})})]}),(0,t.jsx)(G.Card,{className:"mb-6 border-2 border-primary/20 bg-primary/5",children:(0,t.jsxs)(G.CardContent,{className:"p-6 text-center",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:x("confirmationNumber")}),(0,t.jsx)("p",{className:"text-3xl font-bold text-primary tracking-wider",children:e}),s&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-2",children:[x("paymentId")," ",s.slice(0,20),"..."]})]})}),(0,t.jsx)(G.Card,{className:"mb-6",children:(0,t.jsxs)(G.CardContent,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-start gap-4 mb-6",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-foreground",children:r?.name}),(0,t.jsxs)("div",{className:"flex items-center gap-1 text-muted-foreground mt-1",children:[(0,t.jsx)(eY,{className:"h-4 w-4"}),(0,t.jsxs)("span",{className:"text-sm",children:[r?.address,", ",r?.city]})]})]}),(0,t.jsx)("div",{className:"flex",children:Array.from({length:r?.stars||0}).map((e,s)=>(0,t.jsx)("span",{className:"text-yellow-400",children:"★"},s))})]}),(0,t.jsx)(ez.Separator,{className:"mb-6"}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground mb-1",children:[(0,t.jsx)(eG,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"text-sm",children:x("checkIn")})]}),(0,t.jsx)("p",{className:"font-semibold",children:v(o.checkIn)}),(0,t.jsx)("p",{className:"text-sm",children:(0,l.formatDate)(o.checkIn,u)}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[x("from"),r?.policies.checkIn]})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2 text-muted-foreground mb-1",children:[(0,t.jsx)(eJ,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"text-sm",children:x("stayDuration")})]}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:h}),(0,t.jsx)("p",{className:"text-sm",children:j})]}),(0,t.jsxs)("div",{className:"rtl"===p?"text-left":"text-right",children:[(0,t.jsxs)("div",{className:`flex items-center gap-2 text-muted-foreground mb-1 ${"rtl"===p?"justify-start":"justify-end"}`,children:[(0,t.jsx)("span",{className:"text-sm",children:x("checkOut")}),(0,t.jsx)(eG,{className:"h-4 w-4"})]}),(0,t.jsx)("p",{className:`font-semibold ${"rtl"===p?"text-left":"text-right"}`,children:v(o.checkOut)}),(0,t.jsx)("p",{className:`text-sm ${"rtl"===p?"text-left":"text-right"}`,children:(0,l.formatDate)(o.checkOut,u)}),(0,t.jsxs)("p",{className:`text-xs text-muted-foreground mt-1 ${"rtl"===p?"text-left":"text-right"}`,children:[x("until")," ",r?.policies.checkOut]})]})]}),(0,t.jsx)(ez.Separator,{className:"mb-6"}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[(0,t.jsx)(eK,{className:"h-4 w-4"}),x("bookedRooms")]}),(0,t.jsx)("div",{className:"space-y-3",children:c.map(e=>(0,t.jsxs)("div",{className:"flex justify-between items-start bg-muted/30 p-3 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"font-medium",children:[e.quantity,"x ",e.room.name]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.ratePlan.name})]}),(0,t.jsx)("p",{className:"font-medium",children:f(e.ratePlan.price*e.quantity*h)})]},`${e.room.id}-${e.ratePlan.id}`))})]}),(0,t.jsx)(ez.Separator,{className:"mb-6"}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h3",{className:"font-semibold mb-3",children:x("guestDetails")}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-muted-foreground",children:x("guestName")}),(0,t.jsxs)("p",{className:"font-medium",children:[d?.firstName," ",d?.lastName]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-muted-foreground",children:x("email")}),(0,t.jsxs)("p",{className:"font-medium flex items-center gap-1",children:[(0,t.jsx)(eZ,{className:"h-3 w-3"}),d?.email]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-muted-foreground",children:x("phone")}),(0,t.jsxs)("p",{className:"font-medium flex items-center gap-1",children:[(0,t.jsx)(eQ,{className:"h-3 w-3"}),d?.phone]})]}),d?.arrivalTime&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-muted-foreground",children:x("estimatedArrival")}),(0,t.jsx)("p",{className:"font-medium",children:d.arrivalTime})]})]}),d?.specialRequests&&(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsx)("p",{className:"text-muted-foreground text-sm",children:x("specialRequests")}),(0,t.jsx)("p",{className:"text-sm bg-muted/30 p-2 rounded mt-1",children:d.specialRequests})]})]}),(0,t.jsx)(ez.Separator,{className:"mb-6"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:x("totalRooms")}),(0,t.jsx)("span",{children:f(m)})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:x("vat")}),(0,t.jsx)("span",{children:f(g)})]}),(0,t.jsx)(ez.Separator,{}),(0,t.jsxs)("div",{className:"flex justify-between text-lg font-bold",children:[(0,t.jsx)("span",{children:x("totalPaid")}),(0,t.jsx)("span",{className:"text-primary",children:f(m+g)})]})]})]})}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsxs)(i.Button,{variant:"outline",className:"flex-1 bg-transparent",onClick:()=>window.print(),children:[(0,t.jsx)(eX,{className:`h-4 w-4 ${"rtl"===p?"ml-2":"mr-2"}`}),x("printConfirmation")]}),(0,t.jsxs)(i.Button,{variant:"outline",className:"flex-1 bg-transparent",children:[(0,t.jsx)(e0,{className:`h-4 w-4 ${"rtl"===p?"ml-2":"mr-2"}`}),x("downloadPdf")]})]}),(0,t.jsxs)("p",{className:"text-center text-sm text-muted-foreground mt-6",children:[x("contactHelp")," ",(0,t.jsx)("a",{href:"tel:+97235555555",className:"text-primary hover:underline",children:"03-555-5555"})]})]})}let e4=({className:e})=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:(0,t.jsx)("polyline",{points:"20 6 9 17 4 12"})});function e6({currentStep:e}){let{locale:s,dir:r}=(0,n.useI18n)(),a=e<=2||3===e?1:4===e?2:3;return(0,t.jsx)("nav",{"aria-label":"Progress",className:"mb-8",dir:r,children:(0,t.jsx)("ol",{className:"flex items-center justify-center gap-0",children:("he"===s?[{id:1,name:"פרטים אישיים"},{id:2,name:"פרטי אשראי"},{id:3,name:"חופשה נעימה"}]:[{id:1,name:"Personal Details"},{id:2,name:"Payment"},{id:3,name:"Confirmation"}]).map((e,s)=>(0,t.jsxs)("li",{className:"relative flex flex-col items-center",children:[s>0&&(0,t.jsx)("div",{className:(0,h.cn)("absolute top-5 h-0.5 w-16 sm:w-24 md:w-32","rtl"===r?"right-1/2 translate-x-1/2 mr-8":"left-1/2 -translate-x-full -ml-8",e.id<=a?"bg-blue-600":"bg-gray-300")}),(0,t.jsx)("div",{className:"relative z-10",children:e.id<a?(0,t.jsx)("span",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-blue-600 text-white font-bold",children:(0,t.jsx)(e4,{className:"h-5 w-5"})}):e.id===a?(0,t.jsx)("span",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-blue-900 text-white font-bold text-lg",children:e.id}):(0,t.jsx)("span",{className:"flex h-10 w-10 items-center justify-center rounded-full border-2 border-gray-300 bg-white text-gray-400 font-bold text-lg",children:e.id})}),(0,t.jsx)("span",{className:(0,h.cn)("mt-2 text-sm font-medium text-center whitespace-nowrap",e.id===a?"text-blue-900":e.id<a?"text-blue-600":"text-gray-400"),children:e.name})]},e.id))})})}var e3=e.i(305935);let e5={1:"Room Only",2:"Bed & Breakfast",3:"Half Board",4:"Full Board",5:"All Inclusive"},e8={1:"Standard",2:"Superior",3:"Deluxe",4:"Suite",5:"Executive"},e7=({className:e})=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[(0,t.jsx)("path",{d:"M2 4v16"}),(0,t.jsx)("path",{d:"M2 8h18a2 2 0 0 1 2 2v10"}),(0,t.jsx)("path",{d:"M2 17h20"}),(0,t.jsx)("path",{d:"M6 8v9"})]}),e9=({className:e})=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[(0,t.jsx)("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),(0,t.jsx)("circle",{cx:"12",cy:"12",r:"3"})]}),se=({className:e})=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:(0,t.jsx)("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"})}),ss=({className:e})=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[(0,t.jsx)("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),(0,t.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,t.jsx)("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),(0,t.jsx)("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),st=({className:e})=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:(0,t.jsx)("path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"})}),sr=({className:e})=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:(0,t.jsx)("path",{d:"m15 18-6-6 6-6"})}),sa=({className:e})=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:(0,t.jsx)("path",{d:"m9 18 6-6-6-6"})}),sn=({className:e})=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[(0,t.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,t.jsx)("path",{d:"M12 16v-4"}),(0,t.jsx)("path",{d:"M12 8h.01"})]});function sl({images:e,roomName:s,optionNumber:a}){let[n,l]=(0,r.useState)(0),i=e.length>0?e:["/luxury-hotel-room.png"];return(0,t.jsxs)("div",{className:"relative w-full h-full group",children:[(0,t.jsx)(w.default,{src:i[n]||"/placeholder.svg",alt:`${s} - ${n+1}`,fill:!0,className:"object-cover"}),(0,t.jsxs)("div",{className:"absolute top-3 left-3 bg-blue-900/90 text-white px-3 py-1 rounded text-sm font-medium z-10",children:["אפשרות ",a]}),(0,t.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4 z-10",children:(0,t.jsx)("h3",{className:"text-xl font-bold text-white",children:s})}),i.length>1&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),l(e=>(e-1+i.length)%i.length)},className:"absolute left-3 top-1/2 -translate-y-1/2 w-10 h-10 rounded-full bg-white/90 hover:bg-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity z-20 shadow-lg",children:(0,t.jsx)(sr,{className:"h-5 w-5 text-gray-800"})}),(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),l(e=>(e+1)%i.length)},className:"absolute right-3 top-1/2 -translate-y-1/2 w-10 h-10 rounded-full bg-white/90 hover:bg-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity z-20 shadow-lg",children:(0,t.jsx)(sa,{className:"h-5 w-5 text-gray-800"})})]})]})}function si({room:e,hotel:s,optionNumber:a,onSelect:n,isSelecting:l,isPreBooking:o,locale:c,dir:d,nights:h,formatPrice:m,getBoardName:x,getCategoryName:u}){var p;let g,j,f,[v,b]=(0,r.useState)("bb"),w=e.roomName||u(e.categoryId);x(e.boardId);let N=e.buyPrice>0?e.buyPrice:(p=e,g=s.stars||3,j=(p.roomCategory||"standard").toLowerCase(),f=150+50*g,j.includes("suite")?f*=1.8:j.includes("deluxe")?f*=1.5:j.includes("superior")?f*=1.25:j.includes("family")&&(f*=1.4),Math.round(f)),C=Math.round(1.15*N),S=Math.round(.95*N),L=Math.round(.9*C),I="bb"===v?N:C,B="bb"===v?S:L,P={bbText:"he"===c?"לינה וא. בוקר":"Bed & Breakfast",hbText:"he"===c?"חצי פנסיון":"Half Board",sitePrice:"he"===c?"מחיר באתר":"Site Price",clubPrice:"he"===c?"מחיר מועדון":"Club Price",clubDiscount:"he"===c?"5% הנחת אתר":"5% Site Discount",options:"he"===c?"אפשרויות":"Options",board:"he"===c?"בסיס אירוח":"Board",bookNow:"he"===c?"הזמינו עכשיו":"Book Now",booking:"he"===c?"מזמין...":"Booking...",priceAfterDiscount:"he"===c?"המחירים לאחר חישוב ההנחות":"Prices after discounts",moreInfo:"he"===c?"למידע נוסף":"More info",moreAboutRoom:"he"===c?"עוד על החדר":"More about room",sqm:"he"===c?'מ"ר':"sqm",seaView:"he"===c?"צופה לים":"Sea View",upTo:"he"===c?"עד":"up to",guests:"he"===c?"אורחים":"guests",freeCancellation:"he"===c?"ביטול חינם":"Free Cancellation",reserveDiscount:"he"===c?"20% הנחה למשרתי מילואים":"20% Reserve Discount",payWithVoucher:"he"===c?"ניתן לשלם בשובר נופש מילואים של כאל":"Pay with vacation voucher"};return(0,t.jsx)(G.Card,{className:"overflow-hidden border-2 border-blue-100 shadow-lg hover:shadow-xl transition-shadow",children:(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row",children:[(0,t.jsx)("div",{className:"relative w-full lg:w-[380px] h-[280px] flex-shrink-0",children:(0,t.jsx)(sl,{images:s.images,roomName:w,optionNumber:a})}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-100 bg-gray-50/50",children:[(0,t.jsxs)("div",{className:"flex items-center gap-6 text-sm text-gray-600",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)(se,{className:"h-4 w-4"}),(0,t.jsxs)("span",{children:["39 ",P.sqm]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)(e7,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:w})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)(e9,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:P.seaView})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)(ss,{className:"h-4 w-4"}),(0,t.jsxs)("span",{children:[P.upTo," ",e.maxOccupancy||2," ",P.guests]})]})]}),(0,t.jsxs)("button",{className:"text-blue-600 hover:text-blue-800 text-sm flex items-center gap-1",children:[P.moreAboutRoom,(0,t.jsx)(sr,{className:"h-4 w-4"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 text-center text-sm font-medium bg-blue-900 text-white",children:[(0,t.jsx)("div",{className:"py-2.5 border-l border-blue-800",children:P.options}),(0,t.jsx)("div",{className:"py-2.5 border-l border-blue-800",children:P.board}),(0,t.jsx)("div",{className:"py-2.5 border-l border-blue-800",children:P.sitePrice}),(0,t.jsx)("div",{className:"py-2.5",children:P.clubPrice})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center border-b border-gray-200",children:[(0,t.jsxs)("div",{className:"p-4 border-l border-gray-200",children:[(0,t.jsx)("div",{className:"font-medium text-gray-800 mb-1",children:"he"===c?"הזמנה באתר":"Site Booking"}),(0,t.jsx)(y.Badge,{variant:"outline",className:"text-green-600 border-green-300 text-xs",children:P.freeCancellation})]}),(0,t.jsxs)("div",{className:"p-4 border-l border-gray-200 space-y-2",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("input",{type:"radio",name:`board-${e.roomId}-standard`,checked:"bb"===v,onChange:()=>b("bb"),className:"w-4 h-4 text-blue-600"}),(0,t.jsx)("span",{className:"text-sm",children:P.bbText})]}),(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("input",{type:"radio",name:`board-${e.roomId}-standard`,checked:"hb"===v,onChange:()=>b("hb"),className:"w-4 h-4 text-blue-600"}),(0,t.jsx)("span",{className:"text-sm",children:P.hbText})]})]}),(0,t.jsx)("div",{className:"p-4 border-l border-gray-200 text-center",children:(0,t.jsxs)("div",{className:"text-lg font-bold text-gray-400 line-through",children:[m(I,e.currency)," ₪"]})}),(0,t.jsxs)("div",{className:"p-4 text-center",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-1 text-sm text-gray-500 mb-1",children:[(0,t.jsx)(sn,{className:"h-3 w-3"}),(0,t.jsx)("span",{children:P.clubDiscount})]}),(0,t.jsxs)("div",{className:"text-xl font-bold text-blue-900",children:[m(B,e.currency)," ₪"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center bg-blue-50/50 border-b border-gray-200",children:[(0,t.jsxs)("div",{className:"p-4 border-l border-gray-200",children:[(0,t.jsx)("div",{className:"flex items-center gap-2 mb-1",children:(0,t.jsx)(y.Badge,{className:"bg-amber-500 text-white text-xs",children:P.reserveDiscount})}),(0,t.jsxs)("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[(0,t.jsx)(sn,{className:"h-3 w-3"}),(0,t.jsx)("span",{children:P.payWithVoucher})]})]}),(0,t.jsxs)("div",{className:"p-4 border-l border-gray-200 space-y-2",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("input",{type:"radio",name:`board-${e.roomId}-reserve`,className:"w-4 h-4 text-blue-600",defaultChecked:!0}),(0,t.jsx)("span",{className:"text-sm",children:P.bbText})]}),(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("input",{type:"radio",name:`board-${e.roomId}-reserve`,className:"w-4 h-4 text-blue-600"}),(0,t.jsx)("span",{className:"text-sm",children:P.hbText})]})]}),(0,t.jsxs)("div",{className:"p-4 border-l border-gray-200 text-center",children:[(0,t.jsx)("div",{className:"flex items-center justify-center gap-1 text-sm text-gray-500 mb-1",children:(0,t.jsx)("span",{children:"he"===c?"מחיר אתר כולל חברי מועדון":"Site price incl. club"})}),(0,t.jsxs)("div",{className:"text-lg font-bold text-gray-800",children:[m(Math.round(.8*I),e.currency)," ₪"]})]}),(0,t.jsx)("div",{className:"p-4 text-center",children:(0,t.jsxs)("div",{className:"text-xl font-bold text-green-600",children:[m(Math.round(.8*B),e.currency)," ₪"]})})]}),(0,t.jsxs)("div",{className:"p-4 flex items-center justify-between bg-white",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500",children:P.priceAfterDiscount}),(0,t.jsx)(i.Button,{onClick:n,disabled:l||o,className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-6 text-lg font-bold rounded-lg shadow-md",children:l?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(k,{className:"h-5 w-5 mr-2 animate-spin"}),P.booking]}):P.bookNow})]}),(0,t.jsx)("div",{className:"px-4 pb-4",children:(0,t.jsxs)("button",{className:"text-blue-600 hover:text-blue-800 text-sm flex items-center gap-1",children:[P.moreInfo,(0,t.jsx)(sr,{className:"h-4 w-4"})]})})]})]})})}function so({hotel:e,locale:s}){let[a,n]=(0,r.useState)(!1);return(0,t.jsxs)("div",{className:"flex items-start justify-between p-4 bg-white border-b",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:e.hotelName}),(0,t.jsx)("div",{className:"flex",children:Array.from({length:e.stars||0}).map((e,s)=>(0,t.jsx)(E,{className:"h-5 w-5 text-yellow-400 fill-yellow-400"},s))})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 text-gray-600",children:[(0,t.jsx)(P,{className:"h-4 w-4"}),(0,t.jsxs)("span",{children:[e.city,e.address&&` • ${e.address}`]})]})]}),(0,t.jsx)("button",{onClick:()=>n(!a),className:"p-2 rounded-full hover:bg-gray-100",children:(0,t.jsx)(st,{className:(0,h.cn)("h-6 w-6",a?"fill-red-500 text-red-500":"text-gray-400")})})]})}function sc(){let{searchResults:e,search:s,addRoom:i,nights:o,setCurrentStep:c,setApiBookingData:d,isPreBooking:h,setIsPreBooking:m,setPreBookError:x,isRtl:u,language:p}=(0,a.useBooking)(),{t:g}=(0,n.useI18n)(),[j,f]=(0,r.useState)({}),[v,b]=(0,r.useState)({}),[w,N]=(0,r.useState)({}),[y,k]=(0,r.useState)(null);console.log("[v0] HotelSearchResults - searchResults:",e),e.length>0&&console.log("[v0] First hotel:",{hotelId:e[0].hotelId,hotelName:e[0].hotelName,rooms:e[0].rooms?.map(e=>({code:e.code,roomName:e.roomName,buyPrice:e.buyPrice}))});let C=(e,s="USD")=>new Intl.NumberFormat("he"===p?"he-IL":"en-US",{style:"decimal",minimumFractionDigits:0}).format(e),S=e=>{let s=e5[e];return s?"he"===p?s.nameHe:s.name:""},L=e=>{let s=e8[e];return s?"he"===p?s.nameHe:s.name:""},I=async(e,t)=>{let r=e.hotelId;if(!t.code){let e=u?"קוד חדר חסר - נא לנסות שוב או לבחור חדר אחר":"Room code is missing - please try again or select another room";x(e),alert(e);return}let a=t.code;if(!r||0===r){let e=u?"מזהה מלון לא תקין - נא לנסות שוב":"Invalid hotel ID - please try again";x(e),alert(e);return}k(`${t.roomId}-${t.boardId}`),m(!0),x(null);try{let n=(0,l.formatDateForApi)(s.checkIn),o=(0,l.formatDateForApi)(s.checkOut),h={code:a,dateFrom:n,dateTo:o,hotelId:r,adults:s.adults,children:s.childrenAges||[]},m=await fetch("/api/booking/prebook",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)}),x=await m.json();if(!m.ok)throw Error(x.error||"PreBook failed");d({code:a,hotelId:r,hotelName:e.hotelName,roomName:t.roomName||L(t.categoryId),roomId:t.roomId,boardId:t.boardId,price:t.buyPrice,currency:t.currency||"USD",dateFrom:n,dateTo:o,adults:s.adults,children:s.childrenAges||[],prebookToken:x.token,priceConfirmed:x.priceConfirmed});let u={id:t.roomId,hotelId:String(r),name:t.roomName||L(t.categoryId),description:`${L(t.categoryId)} - ${S(t.boardId)}`,images:e.images.length>0?e.images:["/comfortable-hotel-room.png"],maxGuests:t.maxOccupancy,maxAdults:t.maxOccupancy,maxChildren:0,bedType:L(t.categoryId),size:30,amenities:[],basePrice:x.priceConfirmed||t.buyPrice,available:5},p={id:`${t.roomId}-${t.boardId}`,roomId:t.roomId,name:S(t.boardId),description:t.roomCategory||"",price:x.priceConfirmed||t.buyPrice,includes:[S(t.boardId)],cancellationPolicy:"free",prepayment:"none",mealPlan:(e=>{switch(e){case 1:default:return"room-only";case 2:case 6:return"breakfast";case 3:case 7:return"half-board";case 4:return"full-board";case 5:return"all-inclusive"}})(t.boardId)};i({room:u,ratePlan:p,quantity:1}),c(3)}catch(s){console.error("[v0] PreBook error:",s);let e=s.message||(u?"שגיאה בהזמנת החדר":"Failed to reserve room");x(e),alert(e)}finally{k(null),m(!1)}};return e.length?(0,t.jsxs)("div",{className:"space-y-8",dir:u?"rtl":"ltr",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:g("foundHotelsText",{count:e.length})}),e.map(e=>(0,t.jsxs)("div",{className:"bg-gray-50 rounded-xl overflow-hidden shadow-sm",children:[(0,t.jsx)(so,{hotel:e,locale:p}),(0,t.jsx)("div",{className:"p-4 space-y-4",children:(e.rooms||[]).map((s,r)=>{let a=`${e.hotelId}-${s.roomId}-${s.boardId}`;return(0,t.jsx)(si,{room:s,hotel:e,optionNumber:r+1,onSelect:()=>I(e,s),isSelecting:y===a,isPreBooking:h,locale:p,dir:u?"rtl":"ltr",nights:o,formatPrice:C,getBoardName:S,getCategoryName:L},a)})})]},e.hotelId))]}):(0,t.jsxs)("div",{className:"text-center py-12",dir:u?"rtl":"ltr",children:[(0,t.jsx)("div",{className:"text-6xl mb-4",children:"🏨"}),(0,t.jsx)("h3",{className:"text-xl font-semibold text-foreground mb-2",children:g("noResultsText")}),(0,t.jsx)("p",{className:"text-muted-foreground",children:g("tryAgainText")})]})}var sd=e.i(638847);let sh=({className:e})=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[(0,t.jsx)("path",{d:"M5 12h14"}),(0,t.jsx)("path",{d:"m12 5 7 7-7 7"})]}),sm=({className:e})=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[(0,t.jsx)("path",{d:"m12 19-7-7 7-7"}),(0,t.jsx)("path",{d:"M19 12H5"})]}),sx=({className:e})=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[(0,t.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,t.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"12"}),(0,t.jsx)("line",{x1:"12",x2:"12.01",y1:"16",y2:"16"})]}),su=({className:e})=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:(0,t.jsx)("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})});function sp(){let{hotel:e,currentStep:s,setCurrentStep:l,guestDetails:o,setGuestDetails:c,selectedRooms:d,searchResults:h,isSearching:m,searchError:x,preBookError:u,apiBookingData:p,bookingConfirmation:g,setBookingConfirmation:j}=(0,a.useBooking)(),{t:f,locale:v,dir:w}=(0,n.useI18n)(),[y,k]=(0,r.useState)(""),[C,S]=(0,r.useState)(""),[L,I]=(0,r.useState)(!1),[B,P]=(0,r.useState)(null),E=async e=>{c(e),l(4)},M=async e=>{S(e),I(!0),P(null);try{if(p?.prebookToken){let s=await fetch("/api/booking/book",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:p.code,token:p.prebookToken,preBookId:p.preBookId,dateFrom:p.dateFrom,dateTo:p.dateTo,hotelId:p.hotelId,adults:p.adults||2,children:p.children||[],customer:{title:o?.title||"MR",firstName:o?.firstName||"Guest",lastName:o?.lastName||"User",email:o?.email||"guest@example.com",phone:o?.phone||"",country:"IL",city:"",address:"",zip:""},voucherEmail:o?.email||"guest@example.com",agencyReference:e})}),t=await s.json();if(!s.ok)throw Error(t.error||"Booking failed");j({confirmationCode:t.bookingId||`BK${Date.now().toString(36).toUpperCase()}`,bookingId:t.bookingId||e}),k(t.bookingId||`BK${Date.now().toString(36).toUpperCase()}`)}else k(`BK${Date.now().toString(36).toUpperCase()}`);l(5)}catch(e){console.error("Booking error:",e),P(e.message||"Failed to complete booking"),alert(e.message||"Failed to complete booking")}finally{I(!1)}};return(0,t.jsxs)("div",{className:"min-h-screen bg-background",dir:w,children:[(0,t.jsx)("header",{className:"bg-card border-b border-border sticky top-0 z-50 shadow-sm",children:(0,t.jsx)("div",{className:"w-full px-6 lg:px-12 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-xl bg-primary flex items-center justify-center shadow-lg",children:(0,t.jsx)("span",{className:"text-primary-foreground font-bold text-xl",children:"B"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"font-bold text-xl text-foreground",children:"he"===v?"מנוע הזמנות":"Booking Engine"}),(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:["he"===v?"מופעל על ידי":"Powered by"," BookingEngine"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(e3.LanguageSwitcher,{}),s>1&&s<5&&(0,t.jsxs)(i.Button,{variant:"outline",size:"default",onClick:()=>l(s-1),children:[(0,t.jsx)("rtl"===w?sh:sm,{className:`h-4 w-4 ${"rtl"===w?"ml-2":"mr-2"}`}),"he"===v?"חזרה":"Back"]})]})]})})}),(0,t.jsxs)("main",{className:"w-full px-6 lg:px-12 py-8",children:[s<5&&(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsx)(e6,{currentStep:s})}),(x||u||B)&&(0,t.jsxs)(eA.Alert,{variant:"destructive",className:"mb-6 max-w-4xl mx-auto",children:[(0,t.jsx)(sx,{className:"h-4 w-4"}),(0,t.jsx)(eA.AlertDescription,{children:x||u||B})]}),1===s&&(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsx)("div",{className:"bg-card rounded-2xl shadow-lg border border-border p-6 lg:p-8",children:(0,t.jsx)(b,{})}),m?(0,t.jsxs)("div",{className:"text-center py-16 bg-card rounded-2xl shadow-lg border border-border",children:[(0,t.jsx)(su,{className:"h-12 w-12 animate-spin mx-auto text-primary mb-6"}),(0,t.jsx)("p",{className:"text-lg text-muted-foreground",children:"he"===v?"מחפש מלונות זמינים...":"Searching available hotels..."})]}):(0,t.jsx)("div",{className:"text-center py-16 text-muted-foreground",children:(0,t.jsx)("p",{className:"text-lg",children:"he"===v?"הזינו יעד, תאריכים ומספר אורחים לחיפוש זמינות":"Enter destination, dates and number of guests to search availability"})})]}),2===s&&(0,t.jsxs)("div",{className:"flex flex-col xl:flex-row gap-8",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0 space-y-6",children:[(0,t.jsx)("div",{className:"bg-card rounded-2xl shadow-lg border border-border p-6 lg:p-8",children:(0,t.jsx)(b,{})}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-foreground",children:"he"===v?"תוצאות חיפוש":"Search Results"}),h.length>0&&(0,t.jsx)("span",{className:"text-muted-foreground",children:"he"===v?`נמצאו ${h.length} מלונות`:`Found ${h.length} hotels`})]}),m?(0,t.jsxs)("div",{className:"text-center py-16 bg-card rounded-2xl shadow-lg border border-border",children:[(0,t.jsx)(su,{className:"h-12 w-12 animate-spin mx-auto text-primary mb-6"}),(0,t.jsx)("p",{className:"text-lg text-muted-foreground",children:"he"===v?"מחפש...":"Searching..."})]}):h.length>0?(0,t.jsx)(sc,{results:h}):(0,t.jsx)("div",{className:"space-y-6",children:N.mockRooms.map(e=>(0,t.jsx)(q,{room:e},e.id))})]}),(0,t.jsx)("div",{className:"xl:w-96 xl:flex-shrink-0",children:(0,t.jsx)("div",{className:"xl:sticky xl:top-28",children:(0,t.jsx)(U,{})})})]}),3===s&&(0,t.jsxs)("div",{className:"flex flex-col xl:flex-row gap-8",children:[(0,t.jsx)("div",{className:"flex-1 min-w-0",children:(0,t.jsx)("div",{className:"bg-card rounded-2xl shadow-lg border border-border p-6 lg:p-8",children:(0,t.jsx)(J,{onSubmit:E})})}),(0,t.jsx)("div",{className:"xl:w-96 xl:flex-shrink-0",children:(0,t.jsxs)("div",{className:"xl:sticky xl:top-28",children:[(0,t.jsx)("div",{className:"mb-6 text-center",children:(0,t.jsx)(sd.LoginButton,{})}),(0,t.jsx)(U,{showContinue:!1})]})})]}),4===s&&(0,t.jsxs)("div",{className:"flex flex-col xl:flex-row gap-8",children:[(0,t.jsx)("div",{className:"flex-1 min-w-0",children:(0,t.jsxs)("div",{className:"bg-card rounded-2xl shadow-lg border border-border p-6 lg:p-8",children:[(0,t.jsx)(e_,{onSuccess:M}),L&&(0,t.jsxs)("div",{className:"mt-6 text-center",children:[(0,t.jsx)(su,{className:"h-8 w-8 animate-spin mx-auto text-primary mb-3"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"he"===v?"משלים את ההזמנה...":"Completing your booking..."})]})]})}),(0,t.jsx)("div",{className:"xl:w-96 xl:flex-shrink-0",children:(0,t.jsx)("div",{className:"xl:sticky xl:top-28",children:(0,t.jsx)(U,{showContinue:!1})})})]}),5===s&&(0,t.jsx)("div",{className:"max-w-3xl mx-auto",children:(0,t.jsx)(e1,{confirmationNumber:y,paymentIntentId:C})})]}),(0,t.jsx)("footer",{className:"bg-card border-t border-border mt-16",children:(0,t.jsx)("div",{className:"w-full px-6 lg:px-12 py-8",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 text-sm text-muted-foreground",children:[(0,t.jsxs)("p",{children:["© 2025 Booking Engine. ","he"===v?"כל הזכויות שמורות":"All rights reserved","."]}),(0,t.jsxs)("div",{className:"flex gap-8",children:[(0,t.jsx)("a",{href:"#",className:"hover:text-foreground transition-colors",children:"he"===v?"תנאי שימוש":"Terms of Use"}),(0,t.jsx)("a",{href:"#",className:"hover:text-foreground transition-colors",children:"he"===v?"מדיניות פרטיות":"Privacy Policy"}),(0,t.jsx)("a",{href:"#",className:"hover:text-foreground transition-colors",children:"he"===v?"צור קשר":"Contact Us"})]})]})})})]})}function sg({hotel:e,defaultLocale:s="he"}){return(0,t.jsx)(n.I18nProvider,{defaultLocale:s,children:(0,t.jsx)(a.BookingProvider,{initialHotel:e||N.mockHotel,children:(0,t.jsx)(sp,{})})})}e.s(["BookingWidget",()=>sg],507627)}]);