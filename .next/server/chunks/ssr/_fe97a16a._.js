module.exports=[89546,a=>{"use strict";let b=(0,a.i(61237).default)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);a.s(["default",()=>b])},28232,a=>{"use strict";var b=a.i(80940);function c(a){let c=b.useRef({value:a,previous:a});return b.useMemo(()=>(c.current.value!==a&&(c.current.previous=c.current.value,c.current.value=a),c.current.previous),[a])}a.s(["usePrevious",()=>c])},5522,a=>{"use strict";var b=a.i(82746),c=a.i(97895);function d({className:a,type:d,...e}){return(0,b.jsx)("input",{type:d,"data-slot":"input",className:(0,c.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...e})}a.s(["Input",()=>d])},17171,a=>{"use strict";var b=a.i(82746),c=a.i(80940),d=a.i(79197),e=c.forwardRef((a,c)=>(0,b.jsx)(d.Primitive.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));e.displayName="Label";var f=a.i(97895);function g({className:a,...c}){return(0,b.jsx)(e,{"data-slot":"label",className:(0,f.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...c})}a.s(["Label",()=>g],17171)},46893,a=>{"use strict";var b=a.i(82746),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("textarea",{"data-slot":"textarea",className:(0,c.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...d})}a.s(["Textarea",()=>d])},84980,a=>{"use strict";let b=(0,a.i(61237).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],84980)},96826,a=>{"use strict";let b=(0,a.i(61237).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);a.s(["Trash2",()=>b],96826)},53772,a=>{"use strict";var b=a.i(82746),c=a.i(80940),d=a.i(84980),e=a.i(61237);let f=(0,e.default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var g=a.i(96826);let h=(0,e.default)("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]),i=(0,e.default)("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);var j=a.i(40695),k=a.i(3130),l=a.i(5522),m=a.i(17171),n=a.i(46893),o=a.i(87682);function p(){let[a,e]=(0,c.useState)([]),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)({});async function t(){let a=await fetch("/api/admin/promotions"),b=await a.json();b.success&&e(b.data)}async function u(){let a=r.id?"PUT":"POST";(await fetch("/api/admin/promotions",{method:a,headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok&&(await t(),q(!1),s({}))}async function v(a){!confirm("האם אתה בטוח שברצונך למחוק את המבצע?")||(await fetch("/api/admin/promotions",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:a})})).ok&&await t()}async function w(a){await fetch("/api/admin/promotions",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:a.id,active:!a.active})}),await t()}return(0,c.useEffect)(()=>{t()},[]),(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 p-4 md:p-8",children:(0,b.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"ניהול מבצעים"}),(0,b.jsxs)(j.Button,{onClick:()=>q(!0),className:"gap-2",children:[(0,b.jsx)(d.Plus,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden md:inline",children:"מבצע חדש"})]})]}),p&&(0,b.jsxs)(k.Card,{className:"p-6 mb-8",children:[(0,b.jsx)("h2",{className:"text-xl font-bold mb-4",children:r.id?"עריכת מבצע":"מבצע חדש"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(m.Label,{htmlFor:"title",children:"כותרת"}),(0,b.jsx)(l.Input,{id:"title",value:r.title||"",onChange:a=>s({...r,title:a.target.value})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(m.Label,{htmlFor:"id",children:"קוד מבצע"}),(0,b.jsx)(l.Input,{id:"id",value:r.id||"",onChange:a=>s({...r,id:a.target.value}),disabled:!!r.id})]}),(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsx)(m.Label,{htmlFor:"description",children:"תיאור"}),(0,b.jsx)(n.Textarea,{id:"description",value:r.description||"",onChange:a=>s({...r,description:a.target.value})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(m.Label,{htmlFor:"discountType",children:"סוג הנחה"}),(0,b.jsxs)(o.Select,{value:r.discountType||"percentage",onValueChange:a=>s({...r,discountType:a}),children:[(0,b.jsx)(o.SelectTrigger,{children:(0,b.jsx)(o.SelectValue,{})}),(0,b.jsxs)(o.SelectContent,{children:[(0,b.jsx)(o.SelectItem,{value:"percentage",children:"אחוזים"}),(0,b.jsx)(o.SelectItem,{value:"fixed",children:"סכום קבוע"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)(m.Label,{htmlFor:"discountValue",children:["ערך הנחה (","percentage"===r.discountType?"%":"₪",")"]}),(0,b.jsx)(l.Input,{id:"discountValue",type:"number",value:r.discountValue||"",onChange:a=>s({...r,discountValue:Number(a.target.value)})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(m.Label,{htmlFor:"minNights",children:"מינימום לילות"}),(0,b.jsx)(l.Input,{id:"minNights",type:"number",value:r.minNights||"",onChange:a=>s({...r,minNights:Number(a.target.value)})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(m.Label,{htmlFor:"validFrom",children:"תקף מתאריך"}),(0,b.jsx)(l.Input,{id:"validFrom",type:"date",value:r.validFrom?.split("T")[0]||"",onChange:a=>s({...r,validFrom:new Date(a.target.value).toISOString()})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(m.Label,{htmlFor:"validTo",children:"תקף עד תאריך"}),(0,b.jsx)(l.Input,{id:"validTo",type:"date",value:r.validTo?.split("T")[0]||"",onChange:a=>s({...r,validTo:new Date(a.target.value).toISOString()})})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",id:"mobileOnly",checked:r.mobileOnly||!1,onChange:a=>s({...r,mobileOnly:a.target.checked}),className:"w-4 h-4"}),(0,b.jsx)(m.Label,{htmlFor:"mobileOnly",children:"מובייל בלבד"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",id:"active",checked:!1!==r.active,onChange:a=>s({...r,active:a.target.checked}),className:"w-4 h-4"}),(0,b.jsx)(m.Label,{htmlFor:"active",children:"פעיל"})]})]}),(0,b.jsxs)("div",{className:"flex gap-2 mt-6",children:[(0,b.jsx)(j.Button,{onClick:u,children:"שמור"}),(0,b.jsx)(j.Button,{variant:"outline",onClick:()=>{q(!1),s({})},children:"ביטול"})]})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(a=>(0,b.jsxs)(k.Card,{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,b.jsx)("h3",{className:"font-bold text-lg",children:a.title}),(0,b.jsx)("button",{onClick:()=>w(a),children:a.active?(0,b.jsx)(i,{className:"w-6 h-6 text-green-600"}):(0,b.jsx)(h,{className:"w-6 h-6 text-gray-400"})})]}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:a.description}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm mb-4",children:[(0,b.jsx)("span",{className:"font-bold text-orange-600",children:"percentage"===a.discountType?`${a.discountValue}% הנחה`:`${a.discountValue}₪ הנחה`}),a.mobileOnly&&(0,b.jsx)("span",{className:"bg-blue-100 text-blue-600 px-2 py-1 rounded text-xs",children:"מובייל בלבד"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(j.Button,{size:"sm",variant:"outline",onClick:()=>{s(a),q(!0)},children:(0,b.jsx)(f,{className:"w-4 h-4"})}),(0,b.jsx)(j.Button,{size:"sm",variant:"outline",onClick:()=>v(a.id),children:(0,b.jsx)(g.Trash2,{className:"w-4 h-4"})})]})]},a.id))})]})})}a.s(["default",()=>p],53772)}];

//# sourceMappingURL=_fe97a16a._.js.map