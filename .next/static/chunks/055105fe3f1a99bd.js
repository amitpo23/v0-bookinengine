(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,5828,e=>{"use strict";var i=e.i(88636),t=e.i(24892),a=e.i(29439),s=e.i(10965);let l=(0,s.default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var n=e.i(11741);let c=(0,s.default)("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]),d=(0,s.default)("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);var r=e.i(67881),o=e.i(70065),h=e.i(23750),x=e.i(10708),m=e.i(84762),u=e.i(62870);function j(){let[e,s]=(0,t.useState)([]),[j,p]=(0,t.useState)(!1),[g,v]=(0,t.useState)({});async function y(){let e=await fetch("/api/admin/promotions"),i=await e.json();i.success&&s(i.data)}async function b(){let e=g.id?"PUT":"POST";(await fetch("/api/admin/promotions",{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify(g)})).ok&&(await y(),p(!1),v({}))}async function f(e){!confirm("האם אתה בטוח שברצונך למחוק את המבצע?")||(await fetch("/api/admin/promotions",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})})).ok&&await y()}async function N(e){await fetch("/api/admin/promotions",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id,active:!e.active})}),await y()}return(0,t.useEffect)(()=>{y()},[]),(0,i.jsx)("div",{className:"min-h-screen bg-gray-50 p-4 md:p-8",children:(0,i.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold",children:"ניהול מבצעים"}),(0,i.jsxs)(r.Button,{onClick:()=>p(!0),className:"gap-2",children:[(0,i.jsx)(a.Plus,{className:"w-4 h-4"}),(0,i.jsx)("span",{className:"hidden md:inline",children:"מבצע חדש"})]})]}),j&&(0,i.jsxs)(o.Card,{className:"p-6 mb-8",children:[(0,i.jsx)("h2",{className:"text-xl font-bold mb-4",children:g.id?"עריכת מבצע":"מבצע חדש"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(x.Label,{htmlFor:"title",children:"כותרת"}),(0,i.jsx)(h.Input,{id:"title",value:g.title||"",onChange:e=>v({...g,title:e.target.value})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(x.Label,{htmlFor:"id",children:"קוד מבצע"}),(0,i.jsx)(h.Input,{id:"id",value:g.id||"",onChange:e=>v({...g,id:e.target.value}),disabled:!!g.id})]}),(0,i.jsxs)("div",{className:"md:col-span-2",children:[(0,i.jsx)(x.Label,{htmlFor:"description",children:"תיאור"}),(0,i.jsx)(m.Textarea,{id:"description",value:g.description||"",onChange:e=>v({...g,description:e.target.value})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(x.Label,{htmlFor:"discountType",children:"סוג הנחה"}),(0,i.jsxs)(u.Select,{value:g.discountType||"percentage",onValueChange:e=>v({...g,discountType:e}),children:[(0,i.jsx)(u.SelectTrigger,{children:(0,i.jsx)(u.SelectValue,{})}),(0,i.jsxs)(u.SelectContent,{children:[(0,i.jsx)(u.SelectItem,{value:"percentage",children:"אחוזים"}),(0,i.jsx)(u.SelectItem,{value:"fixed",children:"סכום קבוע"})]})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)(x.Label,{htmlFor:"discountValue",children:["ערך הנחה (","percentage"===g.discountType?"%":"₪",")"]}),(0,i.jsx)(h.Input,{id:"discountValue",type:"number",value:g.discountValue||"",onChange:e=>v({...g,discountValue:Number(e.target.value)})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(x.Label,{htmlFor:"minNights",children:"מינימום לילות"}),(0,i.jsx)(h.Input,{id:"minNights",type:"number",value:g.minNights||"",onChange:e=>v({...g,minNights:Number(e.target.value)})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(x.Label,{htmlFor:"validFrom",children:"תקף מתאריך"}),(0,i.jsx)(h.Input,{id:"validFrom",type:"date",value:g.validFrom?.split("T")[0]||"",onChange:e=>v({...g,validFrom:new Date(e.target.value).toISOString()})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(x.Label,{htmlFor:"validTo",children:"תקף עד תאריך"}),(0,i.jsx)(h.Input,{id:"validTo",type:"date",value:g.validTo?.split("T")[0]||"",onChange:e=>v({...g,validTo:new Date(e.target.value).toISOString()})})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("input",{type:"checkbox",id:"mobileOnly",checked:g.mobileOnly||!1,onChange:e=>v({...g,mobileOnly:e.target.checked}),className:"w-4 h-4"}),(0,i.jsx)(x.Label,{htmlFor:"mobileOnly",children:"מובייל בלבד"})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("input",{type:"checkbox",id:"active",checked:!1!==g.active,onChange:e=>v({...g,active:e.target.checked}),className:"w-4 h-4"}),(0,i.jsx)(x.Label,{htmlFor:"active",children:"פעיל"})]})]}),(0,i.jsxs)("div",{className:"flex gap-2 mt-6",children:[(0,i.jsx)(r.Button,{onClick:b,children:"שמור"}),(0,i.jsx)(r.Button,{variant:"outline",onClick:()=>{p(!1),v({})},children:"ביטול"})]})]}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(e=>(0,i.jsxs)(o.Card,{className:"p-4",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,i.jsx)("h3",{className:"font-bold text-lg",children:e.title}),(0,i.jsx)("button",{onClick:()=>N(e),children:e.active?(0,i.jsx)(d,{className:"w-6 h-6 text-green-600"}):(0,i.jsx)(c,{className:"w-6 h-6 text-gray-400"})})]}),(0,i.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:e.description}),(0,i.jsxs)("div",{className:"flex items-center justify-between text-sm mb-4",children:[(0,i.jsx)("span",{className:"font-bold text-orange-600",children:"percentage"===e.discountType?`${e.discountValue}% הנחה`:`${e.discountValue}₪ הנחה`}),e.mobileOnly&&(0,i.jsx)("span",{className:"bg-blue-100 text-blue-600 px-2 py-1 rounded text-xs",children:"מובייל בלבד"})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)(r.Button,{size:"sm",variant:"outline",onClick:()=>{v(e),p(!0)},children:(0,i.jsx)(l,{className:"w-4 h-4"})}),(0,i.jsx)(r.Button,{size:"sm",variant:"outline",onClick:()=>f(e.id),children:(0,i.jsx)(n.Trash2,{className:"w-4 h-4"})})]})]},e.id))})]})})}e.s(["default",()=>j],5828)},70471,e=>{e.n(e.i(5828))}]);