module.exports=[8995,a=>{"use strict";var b=a.i(80940),c=a.i(34051),d=a.i(33565),e=a=>{var e;let g,h,{present:i,children:j}=a,k=function(a){var c,e;let[g,h]=b.useState(),i=b.useRef({}),j=b.useRef(a),k=b.useRef("none"),[l,m]=(c=a?"mounted":"unmounted",e={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},b.useReducer((a,b)=>e[a][b]??a,c));return b.useEffect(()=>{let a=f(i.current);k.current="mounted"===l?a:"none"},[l]),(0,d.useLayoutEffect)(()=>{let b=i.current,c=j.current;if(c!==a){let d=k.current,e=f(b);a?m("MOUNT"):"none"===e||b?.display==="none"?m("UNMOUNT"):c&&d!==e?m("ANIMATION_OUT"):m("UNMOUNT"),j.current=a}},[a,m]),(0,d.useLayoutEffect)(()=>{if(g){let a,b=g.ownerDocument.defaultView??window,c=c=>{let d=f(i.current).includes(c.animationName);if(c.target===g&&d&&(m("ANIMATION_END"),!j.current)){let c=g.style.animationFillMode;g.style.animationFillMode="forwards",a=b.setTimeout(()=>{"forwards"===g.style.animationFillMode&&(g.style.animationFillMode=c)})}},d=a=>{a.target===g&&(k.current=f(i.current))};return g.addEventListener("animationstart",d),g.addEventListener("animationcancel",c),g.addEventListener("animationend",c),()=>{b.clearTimeout(a),g.removeEventListener("animationstart",d),g.removeEventListener("animationcancel",c),g.removeEventListener("animationend",c)}}m("ANIMATION_END")},[g,m]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:b.useCallback(a=>{a&&(i.current=getComputedStyle(a)),h(a)},[])}}(i),l="function"==typeof j?j({present:k.isPresent}):b.Children.only(j),m=(0,c.useComposedRefs)(k.ref,(e=l,(h=(g=Object.getOwnPropertyDescriptor(e.props,"ref")?.get)&&"isReactWarning"in g&&g.isReactWarning)?e.ref:(h=(g=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in g&&g.isReactWarning)?e.props.ref:e.props.ref||e.ref));return"function"==typeof j||k.isPresent?b.cloneElement(l,{ref:m}):null};function f(a){return a?.animationName||"none"}e.displayName="Presence",a.s(["Presence",()=>e])},29577,a=>{"use strict";var b=a.i(80940),c=a.i(33565);function d(a){let[d,e]=b.useState(void 0);return(0,c.useLayoutEffect)(()=>{if(a){e({width:a.offsetWidth,height:a.offsetHeight});let b=new ResizeObserver(b=>{let c,d;if(!Array.isArray(b)||!b.length)return;let f=b[0];if("borderBoxSize"in f){let a=f.borderBoxSize,b=Array.isArray(a)?a[0]:a;c=b.inlineSize,d=b.blockSize}else c=a.offsetWidth,d=a.offsetHeight;e({width:c,height:d})});return b.observe(a,{box:"border-box"}),()=>b.unobserve(a)}e(void 0)},[a]),d}a.s(["useSize",()=>d])},79197,a=>{"use strict";var b=a.i(80940),c=a.i(22386),d=a.i(3339),e=a.i(82746),f=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((a,c)=>{let f=b.forwardRef((a,b)=>{let{asChild:f,...g}=a,h=f?d.Slot:c;return(0,e.jsx)(h,{...g,ref:b})});return f.displayName=`Primitive.${c}`,{...a,[c]:f}},{});function g(a,b){a&&c.flushSync(()=>a.dispatchEvent(b))}a.s(["Primitive",()=>f,"dispatchDiscreteCustomEvent",()=>g])},38032,a=>{"use strict";function b(a,c,{checkForDefaultPrevented:d=!0}={}){return function(b){if(a?.(b),!1===d||!b.defaultPrevented)return c?.(b)}}a.s(["composeEventHandlers",()=>b])},55831,a=>{"use strict";var b=a.i(80940),c=a.i(82746);function d(a,d){let e=b.createContext(d),f=a=>{let{children:d,...f}=a,g=b.useMemo(()=>f,Object.values(f));return(0,c.jsx)(e.Provider,{value:g,children:d})};return f.displayName=a+"Provider",[f,function(c){let f=b.useContext(e);if(f)return f;if(void 0!==d)return d;throw Error(`\`${c}\` must be used within \`${a}\``)}]}function e(a,d=[]){let f=[],g=()=>{let c=f.map(a=>b.createContext(a));return function(d){let e=d?.[a]||c;return b.useMemo(()=>({[`__scope${a}`]:{...d,[a]:e}}),[d,e])}};return g.scopeName=a,[function(d,e){let g=b.createContext(e),h=f.length;f=[...f,e];let i=d=>{let{scope:e,children:f,...i}=d,j=e?.[a]?.[h]||g,k=b.useMemo(()=>i,Object.values(i));return(0,c.jsx)(j.Provider,{value:k,children:f})};return i.displayName=d+"Provider",[i,function(c,f){let i=f?.[a]?.[h]||g,j=b.useContext(i);if(j)return j;if(void 0!==e)return e;throw Error(`\`${c}\` must be used within \`${d}\``)}]},function(...a){let c=a[0];if(1===a.length)return c;let d=()=>{let d=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let e=d.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return b.useMemo(()=>({[`__scope${c.scopeName}`]:e}),[e])}};return d.scopeName=c.scopeName,d}(g,...d)]}a.s(["createContext",()=>d,"createContextScope",()=>e])},18710,a=>{"use strict";var b=a.i(80940);function c(a){let c=b.useRef(a);return b.useEffect(()=>{c.current=a}),b.useMemo(()=>(...a)=>c.current?.(...a),[])}a.s(["useCallbackRef",()=>c])},33565,a=>{"use strict";var b=a.i(80940),c=globalThis?.document?b.useLayoutEffect:()=>{};a.s(["useLayoutEffect",()=>c])},50150,a=>{"use strict";var b=a.i(80940),c=a.i(18710);function d({prop:a,defaultProp:d,onChange:e=()=>{}}){let[f,g]=function({defaultProp:a,onChange:d}){let e=b.useState(a),[f]=e,g=b.useRef(f),h=(0,c.useCallbackRef)(d);return b.useEffect(()=>{g.current!==f&&(h(f),g.current=f)},[f,g,h]),e}({defaultProp:d,onChange:e}),h=void 0!==a,i=h?a:f,j=(0,c.useCallbackRef)(e);return[i,b.useCallback(b=>{if(h){let c="function"==typeof b?b(a):b;c!==a&&j(c)}else g(b)},[h,a,g,j])]}a.s(["useControllableState",()=>d])},33665,a=>{"use strict";var b=a.i(80940),c=a.i(33565),d=b["useId".toString()]||(()=>void 0),e=0;function f(a){let[f,g]=b.useState(d());return(0,c.useLayoutEffect)(()=>{a||g(a=>a??String(e++))},[a]),a||(f?`radix-${f}`:"")}a.s(["useId",()=>f])},58213,a=>{"use strict";var b=a.i(82746),c=a.i(80940);let d={id:"demo-hotel",name:"מלון הדגמה",hotelId:"demo-1",hotelName:"Demo Hotel",city:"Tel Aviv",stars:5,currency:"₪",enableWidget:!0,enableAiChat:!0,plan:"enterprise",apiSettings:{mediciHotelId:"",mediciHotelName:""},widgetSettings:{language:"he",showPrices:!0,showAvailability:!0,primaryColor:"#1a56db",secondaryColor:"#7c3aed"},aiChatSettings:{welcomeMessage:"Hello! I'm your AI booking assistant. How can I help you today?",welcomeMessageHe:"שלום! אני העוזר החכם שלך להזמנות. איך אוכל לעזור לך היום?",personality:"professional",language:"he",primaryColor:"#10b981"}},e=(0,c.createContext)(void 0);function f({children:a}){let[f,g]=(0,c.useState)([d]),[h,i]=(0,c.useState)(d);return(0,c.useEffect)(()=>{let a=localStorage.getItem("hotelConfigs");if(a){let b=JSON.parse(a);g(b),i(b[0]||d)}},[]),(0,c.useEffect)(()=>{localStorage.setItem("hotelConfigs",JSON.stringify(f))},[f]),(0,b.jsx)(e.Provider,{value:{currentHotel:h,setCurrentHotel:a=>{i(a)},hotels:f,addHotel:a=>{g(b=>[...b,a])},updateHotel:a=>{g(b=>b.map(b=>b.id===a.id?a:b)),h?.id===a.id&&i(a)},deleteHotel:a=>{g(b=>b.filter(b=>b.id!==a)),h?.id===a&&i(f[0]||null)},isWidgetEnabled:h?.enableWidget??!1,isAiChatEnabled:h?.enableAiChat??!1},children:a})}function g(){let a=(0,c.useContext)(e);if(!a)throw Error("useHotelConfig must be used within HotelConfigProvider");return a}a.s(["HotelConfigProvider",()=>f,"useHotelConfig",()=>g])},81213,a=>{"use strict";function b(a,c="he"){return a.toLocaleDateString("he"===c?"he-IL":"en-US",{day:"numeric",month:"short",year:"numeric"})}function c(a,b="he"){return a.toLocaleDateString("he"===b?"he-IL":"en-US",{day:"2-digit",month:"2-digit",year:"2-digit"})}function d(a,b){let c=new Date(a);return c.setDate(c.getDate()+b),c}function e(a,b){let c=new Date(a);return c.setDate(c.getDate()-b),c}function f(a){let b=a.getFullYear(),c=String(a.getMonth()+1).padStart(2,"0"),d=String(a.getDate()).padStart(2,"0");return`${b}-${c}-${d}`}a.s(["addDays",()=>d,"formatDate",()=>b,"formatDateForApi",()=>f,"formatDateShort",()=>c,"subDays",()=>e])},24808,a=>{"use strict";var b=a.i(82746),c=a.i(16119),d=a.i(76058),e=a.i(29457),f=a.i(58213),g=a.i(80940),h=a.i(81213),i=a.i(40695),j=a.i(30342),k=a.i(97895),l=a.i(4272);let m=()=>(0,b.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,b.jsx)("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),(0,b.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,b.jsx)("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),(0,b.jsx)("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),n=()=>(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,b.jsx)("path",{d:"M5 12h14"})}),o=()=>(0,b.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,b.jsx)("path",{d:"M5 12h14"}),(0,b.jsx)("path",{d:"M12 5v14"})]}),p=()=>(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-spin",children:(0,b.jsx)("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})});function q({hotelConfig:a,onSearch:c}){let{search:f,setSearch:q,setCurrentStep:r,setSearchResults:s,setIsSearching:t,setSearchError:u,isSearching:v,searchError:w}=(0,d.useBooking)(),{t:x,locale:y,dir:z}=(0,e.useI18n)(),[A,B]=(0,g.useState)(!1),C=async()=>{if(!f.checkIn||!f.checkOut)return void u("he"===y?"יש לבחור תאריכי צ'ק-אין וצ'ק-אאוט":"Please select check-in and check-out dates");let b=a.apiSettings.mediciHotelName;if(!b)return void u("he"===y?"המלון לא מוגדר במערכת":"Hotel not configured");t(!0),u(null);try{let a=(0,h.formatDateForApi)(f.checkIn),d=(0,h.formatDateForApi)(f.checkOut),e={hotelName:b,dateFrom:a,dateTo:d,adults:f.adults,children:f.childrenAges||[],limit:20},g=await fetch("/api/hotels/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),i=await g.json();if(!g.ok)throw Error(i.error||"Search failed");let j=i.data||i.results||[];s(j),0===j.length?u("he"===y?"לא נמצאו חדרים זמינים בתאריכים אלו":"No rooms available for these dates"):(r(2),c?.())}catch(a){u(a.message||"Failed to search")}finally{t(!1)}};return(0,b.jsxs)("div",{className:"bg-card rounded-xl border border-border p-6 shadow-lg",dir:z,children:[(0,b.jsxs)("div",{className:"mb-6 text-center",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-foreground",children:a.name}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.city})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsx)(l.DatePickerInput,{value:f.checkIn,onChange:a=>q({...f,checkIn:a}),minDate:new Date,label:x("checkIn"),placeholder:x("selectDate"),dir:z}),(0,b.jsx)(l.DatePickerInput,{value:f.checkOut,onChange:a=>q({...f,checkOut:a}),minDate:f.checkIn?new Date(f.checkIn.getTime()+864e5):new Date,label:x("checkOut"),placeholder:x("selectDate"),dir:z}),(0,b.jsxs)(j.Popover,{open:A,onOpenChange:B,children:[(0,b.jsx)(j.PopoverTrigger,{asChild:!0,children:(0,b.jsxs)(i.Button,{variant:"outline",className:(0,k.cn)("w-full justify-start h-14 px-4 bg-transparent","rtl"===z?"text-right":"text-left"),children:[(0,b.jsxs)("div",{className:(0,k.cn)("flex flex-col gap-0.5 flex-1","items-start"),children:[(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:x("guests")}),(0,b.jsxs)("span",{className:"font-medium",children:[f.adults," ",x("adults"),f.children>0?`, ${f.children} ${x("children")}`:""]})]}),(0,b.jsx)(m,{})]})}),(0,b.jsx)(j.PopoverContent,{className:"w-72",align:"start",children:(0,b.jsxs)("div",{className:"space-y-4",dir:z,children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:x("adults")}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:x("adultsAge")})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(i.Button,{variant:"outline",size:"icon",className:"h-8 w-8 bg-transparent",onClick:()=>q({...f,adults:Math.max(1,f.adults-1)}),disabled:f.adults<=1,children:(0,b.jsx)(n,{})}),(0,b.jsx)("span",{className:"w-8 text-center font-medium",children:f.adults}),(0,b.jsx)(i.Button,{variant:"outline",size:"icon",className:"h-8 w-8 bg-transparent",onClick:()=>q({...f,adults:Math.min(10,f.adults+1)}),disabled:f.adults>=10,children:(0,b.jsx)(o,{})})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:x("children")}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:x("childrenAges")})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(i.Button,{variant:"outline",size:"icon",className:"h-8 w-8 bg-transparent",onClick:()=>q({...f,children:Math.max(0,f.children-1)}),disabled:f.children<=0,children:(0,b.jsx)(n,{})}),(0,b.jsx)("span",{className:"w-8 text-center font-medium",children:f.children}),(0,b.jsx)(i.Button,{variant:"outline",size:"icon",className:"h-8 w-8 bg-transparent",onClick:()=>q({...f,children:Math.min(6,f.children+1)}),disabled:f.children>=6,children:(0,b.jsx)(o,{})})]})]}),(0,b.jsx)(i.Button,{className:"w-full",onClick:()=>B(!1),children:x("confirm")})]})})]})]}),(0,b.jsx)(i.Button,{className:"w-full h-14 text-base font-semibold mt-4",onClick:C,disabled:v,style:{backgroundColor:a.widgetSettings.primaryColor},children:v?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p,{}),(0,b.jsx)("span",{className:"ml-2",children:"he"===y?"מחפש...":"Searching..."})]}):x("searchAvailability")}),w&&(0,b.jsx)("div",{className:"mt-4 p-3 bg-destructive/10 border border-destructive/20 rounded-lg text-destructive text-sm",children:w})]})}let r={id:"demo",name:"מלון הדגמה",hotelId:"demo-1",hotelName:"Demo Hotel",city:"Tel Aviv",stars:5,currency:"₪",enableWidget:!0,enableAiChat:!1,plan:"enterprise",apiSettings:{mediciHotelId:"",mediciHotelName:"Grand Hotel"},widgetSettings:{language:"he",showPrices:!0,showAvailability:!0,primaryColor:"#1a56db",secondaryColor:"#7c3aed"},aiChatSettings:{welcomeMessage:"Hello!",welcomeMessageHe:"שלום!",personality:"professional",language:"he",primaryColor:"#10b981"}};function s(){let a=(0,c.useParams)().hotelId,{hotels:g}=(0,f.useHotelConfig)(),h=g.find(b=>b.id===a)||r;return h.enableWidget?(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-950 p-4",children:(0,b.jsx)("div",{className:"max-w-3xl mx-auto",children:(0,b.jsx)(d.BookingProvider,{children:(0,b.jsx)(e.I18nProvider,{children:(0,b.jsx)(q,{hotelConfig:h})})})})}):(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:(0,b.jsx)("div",{className:"text-center",children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"מנוע ההזמנות אינו פעיל עבור מלון זה"})})})}function t(){return(0,b.jsx)(f.HotelConfigProvider,{children:(0,b.jsx)(s,{})})}a.s(["default",()=>t],24808)}];

//# sourceMappingURL=_b31d1c98._.js.map