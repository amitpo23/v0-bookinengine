module.exports=[30240,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={MutableRequestCookiesAdapter:function(){return f},ReadonlyRequestCookiesError:function(){return c},RequestCookiesAdapter:function(){return u},appendMutableCookies:function(){return p},areCookiesMutableInCurrentPhase:function(){return y},createCookiesWithMutableAccessCheck:function(){return h},getModifiedCookieValues:function(){return l},responseCookiesToRequestCookies:function(){return g}};for(var n in a)Object.defineProperty(r,n,{enumerable:!0,get:a[n]});let o=e.r(472),i=e.r(30759),s=e.r(56704);class c extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#options")}static callable(){throw new c}}class u{static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"clear":case"delete":case"set":return c.callable;default:return i.ReflectAdapter.get(e,t,r)}}})}}let d=Symbol.for("next.mutated.cookies");function l(e){let t=e[d];return t&&Array.isArray(t)&&0!==t.length?t:[]}function p(e,t){let r=l(t);if(0===r.length)return!1;let a=new o.ResponseCookies(e),n=a.getAll();for(let e of r)a.set(e);for(let e of n)a.set(e);return!0}class f{static wrap(e,t){let r=new o.ResponseCookies(new Headers);for(let t of e.getAll())r.set(t);let a=[],n=new Set,c=()=>{let e=s.workAsyncStorage.getStore();if(e&&(e.pathWasRevalidated=!0),a=r.getAll().filter(e=>n.has(e.name)),t){let e=[];for(let t of a){let r=new o.ResponseCookies(new Headers);r.set(t),e.push(r.toString())}t(e)}},u=new Proxy(r,{get(e,t,r){switch(t){case d:return a;case"delete":return function(...t){n.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.delete(...t),u}finally{c()}};case"set":return function(...t){n.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.set(...t),u}finally{c()}};default:return i.ReflectAdapter.get(e,t,r)}}});return u}}function h(e){let t=new Proxy(e.mutableCookies,{get(r,a,n){switch(a){case"delete":return function(...a){return m(e,"cookies().delete"),r.delete(...a),t};case"set":return function(...a){return m(e,"cookies().set"),r.set(...a),t};default:return i.ReflectAdapter.get(r,a,n)}}});return t}function y(e){return"action"===e.phase}function m(e,t){if(!y(e))throw new c}function g(e){let t=new o.RequestCookies(new Headers);for(let r of e.getAll())t.set(r);return t}},13884,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"createDedupedByCallsiteServerErrorLoggerDev",{enumerable:!0,get:function(){return c}});let a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(void 0);if(r&&r.has(e))return r.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}return a.default=e,r&&r.set(e,a),a}(e.r(47540));function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}let o={current:null},i="function"==typeof a.cache?a.cache:e=>e,s=console.warn;function c(e){return function(...t){s(e(...t))}}i(e=>{try{s(o.current)}finally{o.current=null}})},7460,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"cookies",{enumerable:!0,get:function(){return f}});let a=e.r(30240),n=e.r(472),o=e.r(56704),i=e.r(32319),s=e.r(68665),c=e.r(97573),u=e.r(4642),d=e.r(13884),l=e.r(43824),p=e.r(76414);function f(){let e="cookies",t=o.workAsyncStorage.getStore(),r=i.workUnitAsyncStorage.getStore();if(t){if(r&&"after"===r.phase&&!(0,l.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${t.route} used \`cookies()\` inside \`after()\`. This is not supported. If you need this data inside an \`after()\` callback, use \`cookies()\` outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E843",enumerable:!1,configurable:!0});if(t.forceStatic)return y(a.RequestCookiesAdapter.seal(new n.RequestCookies(new Headers({}))));if(t.dynamicShouldError)throw Object.defineProperty(new c.StaticGenBailoutError(`Route ${t.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`cookies()\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E849",enumerable:!1,configurable:!0});if(r)switch(r.type){case"cache":let o=Object.defineProperty(Error(`Route ${t.route} used \`cookies()\` inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`cookies()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E831",enumerable:!1,configurable:!0});throw Error.captureStackTrace(o,f),t.invalidDynamicUsageError??=o,o;case"unstable-cache":throw Object.defineProperty(Error(`Route ${t.route} used \`cookies()\` inside a function cached with \`unstable_cache()\`. Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`cookies()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E846",enumerable:!1,configurable:!0});case"prerender":var d=t,m=r;let i=h.get(m);if(i)return i;let g=(0,u.makeHangingPromise)(m.renderSignal,d.route,"`cookies()`");return h.set(m,g),g;case"prerender-client":let b="`cookies`";throw Object.defineProperty(new p.InvariantError(`${b} must not be used within a Client Component. Next.js should be preventing ${b} from being included in Client Components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E832",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,s.postponeWithTracking)(t.route,e,r.dynamicTracking);case"prerender-legacy":return(0,s.throwToInterruptStaticGeneration)(e,t,r);case"prerender-runtime":return(0,s.delayUntilRuntimeStage)(r,y(r.cookies));case"private-cache":return y(r.cookies);case"request":return(0,s.trackDynamicDataInDynamicRender)(r),y((0,a.areCookiesMutableInCurrentPhase)(r)?r.userspaceMutableCookies:r.cookies)}}(0,i.throwForMissingRequestStore)(e)}e.r(18185);let h=new WeakMap;function y(e){let t=h.get(e);if(t)return t;let r=Promise.resolve(e);return h.set(e,r),r}(0,d.createDedupedByCallsiteServerErrorLoggerDev)(function(e,t){let r=e?`Route "${e}" `:"This route ";return Object.defineProperty(Error(`${r}used ${t}. \`cookies()\` returns a Promise and must be unwrapped with \`await\` or \`React.use()\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E830",enumerable:!1,configurable:!0})})},36052,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={HeadersAdapter:function(){return s},ReadonlyHeadersError:function(){return i}};for(var n in a)Object.defineProperty(r,n,{enumerable:!0,get:a[n]});let o=e.r(30759);class i extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new i}}class s extends Headers{constructor(e){super(),this.headers=new Proxy(e,{get(t,r,a){if("symbol"==typeof r)return o.ReflectAdapter.get(t,r,a);let n=r.toLowerCase(),i=Object.keys(e).find(e=>e.toLowerCase()===n);if(void 0!==i)return o.ReflectAdapter.get(t,i,a)},set(t,r,a,n){if("symbol"==typeof r)return o.ReflectAdapter.set(t,r,a,n);let i=r.toLowerCase(),s=Object.keys(e).find(e=>e.toLowerCase()===i);return o.ReflectAdapter.set(t,s??r,a,n)},has(t,r){if("symbol"==typeof r)return o.ReflectAdapter.has(t,r);let a=r.toLowerCase(),n=Object.keys(e).find(e=>e.toLowerCase()===a);return void 0!==n&&o.ReflectAdapter.has(t,n)},deleteProperty(t,r){if("symbol"==typeof r)return o.ReflectAdapter.deleteProperty(t,r);let a=r.toLowerCase(),n=Object.keys(e).find(e=>e.toLowerCase()===a);return void 0===n||o.ReflectAdapter.deleteProperty(t,n)}})}static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"append":case"delete":case"set":return i.callable;default:return o.ReflectAdapter.get(e,t,r)}}})}merge(e){return Array.isArray(e)?e.join(", "):e}static from(e){return e instanceof Headers?e:new s(e)}append(e,t){let r=this.headers[e];"string"==typeof r?this.headers[e]=[r,t]:Array.isArray(r)?r.push(t):this.headers[e]=t}delete(e){delete this.headers[e]}get(e){let t=this.headers[e];return void 0!==t?this.merge(t):null}has(e){return void 0!==this.headers[e]}set(e,t){this.headers[e]=t}forEach(e,t){for(let[r,a]of this.entries())e.call(t,a,r,this)}*entries(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase(),r=this.get(t);yield[t,r]}}*keys(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase();yield t}}*values(){for(let e of Object.keys(this.headers)){let t=this.get(e);yield t}}[Symbol.iterator](){return this.entries()}}},19971,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"headers",{enumerable:!0,get:function(){return p}});let a=e.r(36052),n=e.r(56704),o=e.r(32319),i=e.r(68665),s=e.r(97573),c=e.r(4642),u=e.r(13884),d=e.r(43824),l=e.r(76414);function p(){let e="headers",t=n.workAsyncStorage.getStore(),r=o.workUnitAsyncStorage.getStore();if(t){if(r&&"after"===r.phase&&!(0,d.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${t.route} used \`headers()\` inside \`after()\`. This is not supported. If you need this data inside an \`after()\` callback, use \`headers()\` outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E839",enumerable:!1,configurable:!0});if(t.forceStatic)return h(a.HeadersAdapter.seal(new Headers({})));if(r)switch(r.type){case"cache":{let e=Object.defineProperty(Error(`Route ${t.route} used \`headers()\` inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`headers()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E833",enumerable:!1,configurable:!0});throw Error.captureStackTrace(e,p),t.invalidDynamicUsageError??=e,e}case"unstable-cache":throw Object.defineProperty(Error(`Route ${t.route} used \`headers()\` inside a function cached with \`unstable_cache()\`. Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`headers()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E838",enumerable:!1,configurable:!0})}if(t.dynamicShouldError)throw Object.defineProperty(new s.StaticGenBailoutError(`Route ${t.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`headers()\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E828",enumerable:!1,configurable:!0});if(r)switch(r.type){case"prerender":var u=t,y=r;let n=f.get(y);if(n)return n;let o=(0,c.makeHangingPromise)(y.renderSignal,u.route,"`headers()`");return f.set(y,o),o;case"prerender-client":let m="`headers`";throw Object.defineProperty(new l.InvariantError(`${m} must not be used within a client component. Next.js should be preventing ${m} from being included in client components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E693",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,i.postponeWithTracking)(t.route,e,r.dynamicTracking);case"prerender-legacy":return(0,i.throwToInterruptStaticGeneration)(e,t,r);case"prerender-runtime":return(0,i.delayUntilRuntimeStage)(r,h(r.headers));case"private-cache":return h(r.headers);case"request":return(0,i.trackDynamicDataInDynamicRender)(r),h(r.headers)}}(0,o.throwForMissingRequestStore)(e)}e.r(18185);let f=new WeakMap;function h(e){let t=f.get(e);if(t)return t;let r=Promise.resolve(e);return f.set(e,r),r}(0,u.createDedupedByCallsiteServerErrorLoggerDev)(function(e,t){let r=e?`Route "${e}" `:"This route ";return Object.defineProperty(Error(`${r}used ${t}. \`headers()\` returns a Promise and must be unwrapped with \`await\` or \`React.use()\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E836",enumerable:!1,configurable:!0})})},21423,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"draftMode",{enumerable:!0,get:function(){return d}});let a=e.r(32319),n=e.r(56704),o=e.r(68665),i=e.r(13884),s=e.r(97573),c=e.r(65252),u=e.r(76414);function d(){let e=n.workAsyncStorage.getStore(),t=a.workUnitAsyncStorage.getStore();switch((!e||!t)&&(0,a.throwForMissingRequestStore)("draftMode"),t.type){case"prerender-runtime":return(0,o.delayUntilRuntimeStage)(t,l(t.draftMode,e));case"request":return l(t.draftMode,e);case"cache":case"private-cache":case"unstable-cache":let r=(0,a.getDraftModeProviderForCacheScope)(e,t);if(r)return l(r,e);case"prerender":case"prerender-client":case"prerender-ppr":case"prerender-legacy":return l(null,e);default:return t}}function l(e,t){let r=f.get(e??p);return r||Promise.resolve(new h(e))}e.r(30759);let p={},f=new WeakMap;class h{constructor(e){this._provider=e}get isEnabled(){return null!==this._provider&&this._provider.isEnabled}enable(){y("draftMode().enable()",this.enable),null!==this._provider&&this._provider.enable()}disable(){y("draftMode().disable()",this.disable),null!==this._provider&&this._provider.disable()}}function y(e,t){let r=n.workAsyncStorage.getStore(),i=a.workUnitAsyncStorage.getStore();if(r){if((null==i?void 0:i.phase)==="after")throw Object.defineProperty(Error(`Route ${r.route} used "${e}" inside \`after()\`. The enabled status of \`draftMode()\` can be read inside \`after()\` but you cannot enable or disable \`draftMode()\`. See more info here: https://nextjs.org/docs/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E845",enumerable:!1,configurable:!0});if(r.dynamicShouldError)throw Object.defineProperty(new s.StaticGenBailoutError(`Route ${r.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(i)switch(i.type){case"cache":case"private-cache":{let a=Object.defineProperty(Error(`Route ${r.route} used "${e}" inside "use cache". The enabled status of \`draftMode()\` can be read in caches but you must not enable or disable \`draftMode()\` inside a cache. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E829",enumerable:!1,configurable:!0});throw Error.captureStackTrace(a,t),r.invalidDynamicUsageError??=a,a}case"unstable-cache":throw Object.defineProperty(Error(`Route ${r.route} used "${e}" inside a function cached with \`unstable_cache()\`. The enabled status of \`draftMode()\` can be read in caches but you must not enable or disable \`draftMode()\` inside a cache. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E844",enumerable:!1,configurable:!0});case"prerender":case"prerender-runtime":{let t=Object.defineProperty(Error(`Route ${r.route} used ${e} without first calling \`await connection()\`. See more info here: https://nextjs.org/docs/messages/next-prerender-sync-headers`),"__NEXT_ERROR_CODE",{value:"E126",enumerable:!1,configurable:!0});return(0,o.abortAndThrowOnSynchronousRequestDataAccess)(r.route,e,t,i)}case"prerender-client":let a="`draftMode`";throw Object.defineProperty(new u.InvariantError(`${a} must not be used within a Client Component. Next.js should be preventing ${a} from being included in Client Components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E832",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,o.postponeWithTracking)(r.route,e,i.dynamicTracking);case"prerender-legacy":i.revalidate=0;let n=Object.defineProperty(new c.DynamicServerError(`Route ${r.route} couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw r.dynamicUsageDescription=e,r.dynamicUsageStack=n.stack,n;case"request":(0,o.trackDynamicDataInDynamicRender)(i)}}}(0,i.createDedupedByCallsiteServerErrorLoggerDev)(function(e,t){let r=e?`Route "${e}" `:"This route ";return Object.defineProperty(Error(`${r}used ${t}. \`draftMode()\` returns a Promise and must be unwrapped with \`await\` or \`React.use()\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E835",enumerable:!1,configurable:!0})})},93458,(e,t,r)=>{t.exports.cookies=e.r(7460).cookies,t.exports.headers=e.r(19971).headers,t.exports.draftMode=e.r(21423).draftMode},31614,e=>{"use strict";var t=e.i(47909),r=e.i(74017),a=e.i(96250),n=e.i(59756),o=e.i(61916),i=e.i(14444),s=e.i(37092),c=e.i(69741),u=e.i(16795),d=e.i(87718),l=e.i(95169),p=e.i(47587),f=e.i(66012),h=e.i(70101),y=e.i(26937),m=e.i(10372),g=e.i(93695);e.i(52474);var b=e.i(220),R=e.i(89171),w=e.i(93458);async function E(e){try{let e=(0,w.headers)(),t=e.get("x-forwarded-for"),r=e.get("x-real-ip"),a=t?.split(",")[0]||r||"unknown",n=[{id:"act_"+Date.now()+"_1",type:"book",timestamp:new Date(Date.now()-12e4),details:"הזמנה חדשה - מלון דן תל אביב, 2 לילות",ip:"82.166."+Math.floor(255*Math.random())+"."+Math.floor(255*Math.random()),location:"תל אביב, ישראל"},{id:"act_"+Date.now()+"_2",type:"search",timestamp:new Date(Date.now()-3e5),details:"חיפוש מלונות בירושלים - 15-18 ינואר",ip:"37.142."+Math.floor(255*Math.random())+"."+Math.floor(255*Math.random()),location:"ירושלים, ישראל"},{id:"act_"+Date.now()+"_3",type:"prebook",timestamp:new Date(Date.now()-48e4),details:"Pre-book - מלון רויאל ביץ' אילת",ip:"109.253."+Math.floor(255*Math.random())+"."+Math.floor(255*Math.random()),location:"חיפה, ישראל"},{id:"act_"+Date.now()+"_4",type:"visit",timestamp:new Date(Date.now()-6e5),details:"כניסה לאתר - עמוד ראשי",ip:a,location:"גלילה מ-IP"},{id:"act_"+Date.now()+"_5",type:"search",timestamp:new Date(Date.now()-9e5),details:"חיפוש מלונות באילת - סופ״ש הקרוב",ip:"31.154."+Math.floor(255*Math.random())+"."+Math.floor(255*Math.random()),location:"באר שבע, ישראל"},{id:"act_"+Date.now()+"_6",type:"book",timestamp:new Date(Date.now()-12e5),details:"הזמנה חדשה - מלון לאונרדו חיפה, 3 לילות",ip:"80.178."+Math.floor(255*Math.random())+"."+Math.floor(255*Math.random()),location:"נתניה, ישראל"},{id:"act_"+Date.now()+"_7",type:"visit",timestamp:new Date(Date.now()-15e5),details:"כניסה לאתר - דרך חיפוש Google",ip:"5.29."+Math.floor(255*Math.random())+"."+Math.floor(255*Math.random()),location:"פתח תקווה, ישראל"},{id:"act_"+Date.now()+"_8",type:"search",timestamp:new Date(Date.now()-18e5),details:"חיפוש מלונות בטבריה - חופשת חנוכה",ip:"77.126."+Math.floor(255*Math.random())+"."+Math.floor(255*Math.random()),location:"רעננה, ישראל"},{id:"act_"+Date.now()+"_9",type:"prebook",timestamp:new Date(Date.now()-21e5),details:"Pre-book - מלון הרודס ים המלח",ip:"213.8."+Math.floor(255*Math.random())+"."+Math.floor(255*Math.random()),location:"מודיעין, ישראל"},{id:"act_"+Date.now()+"_10",type:"book",timestamp:new Date(Date.now()-24e5),details:"הזמנה חדשה - מלון פרימה פארק ירושלים, 1 לילה",ip:"185.224."+Math.floor(255*Math.random())+"."+Math.floor(255*Math.random()),location:"הרצליה, ישראל"}];return R.NextResponse.json(n)}catch(e){return console.error("Error fetching recent activity:",e),R.NextResponse.json({error:"Failed to fetch recent activity"},{status:500})}}e.s(["GET",()=>E],16556);var _=e.i(16556);let v=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/admin/activity/route",pathname:"/api/admin/activity",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/app/api/admin/activity/route.ts",nextConfigOutput:"",userland:_}),{workAsyncStorage:O,workUnitAsyncStorage:k,serverHooks:C}=v;function D(){return(0,a.patchFetch)({workAsyncStorage:O,workUnitAsyncStorage:k})}async function M(e,t,a){v.isDev&&(0,n.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let R="/api/admin/activity/route";R=R.replace(/\/index$/,"")||"/";let w=await v.prepare(e,t,{srcPage:R,multiZoneDraftMode:!1});if(!w)return t.statusCode=400,t.end("Bad Request"),null==a.waitUntil||a.waitUntil.call(a,Promise.resolve()),null;let{buildId:E,params:_,nextConfig:O,parsedUrl:k,isDraftMode:C,prerenderManifest:D,routerServerContext:M,isOnDemandRevalidate:S,revalidateOnlyGenerated:P,resolvedPathname:j,clientReferenceManifest:A,serverActionsManifest:x}=w,T=(0,c.normalizeAppPath)(R),N=!!(D.dynamicRoutes[T]||D.routes[j]),$=async()=>((null==M?void 0:M.render404)?await M.render404(e,t,k,!1):t.end("This page could not be found"),null);if(N&&!C){let e=!!D.routes[j],t=D.dynamicRoutes[T];if(t&&!1===t.fallback&&!e){if(O.experimental.adapterPath)return await $();throw new g.NoFallbackError}}let q=null;!N||v.isDev||C||(q="/index"===(q=j)?"/":q);let I=!0===v.isDev||!N,H=N&&!I;x&&A&&(0,i.setReferenceManifestsSingleton)({page:R,clientReferenceManifest:A,serverActionsManifest:x,serverModuleMap:(0,s.createServerModuleMap)({serverActionsManifest:x})});let U=e.method||"GET",X=(0,o.getTracer)(),L=X.getActiveScopeSpan(),F={params:_,prerenderManifest:D,renderOpts:{experimental:{authInterrupts:!!O.experimental.authInterrupts},cacheComponents:!!O.cacheComponents,supportsDynamicResponse:I,incrementalCache:(0,n.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:O.cacheLife,waitUntil:a.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,a)=>v.onRequestError(e,t,a,M)},sharedContext:{buildId:E}},W=new u.NodeNextRequest(e),B=new u.NodeNextResponse(t),G=d.NextRequestAdapter.fromNodeNextRequest(W,(0,d.signalFromNodeResponse)(t));try{let i=async e=>v.handle(G,F).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=X.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==l.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let a=r.get("next.route");if(a){let t=`${U} ${a}`;e.setAttributes({"next.route":a,"http.route":a,"next.span_name":t}),e.updateName(t)}else e.updateName(`${U} ${R}`)}),s=!!(0,n.getRequestMeta)(e,"minimalMode"),c=async n=>{var o,c;let u=async({previousCacheEntry:r})=>{try{if(!s&&S&&P&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let o=await i(n);e.fetchMetrics=F.renderOpts.fetchMetrics;let c=F.renderOpts.pendingWaitUntil;c&&a.waitUntil&&(a.waitUntil(c),c=void 0);let u=F.renderOpts.collectedTags;if(!N)return await (0,f.sendResponse)(W,B,o,F.renderOpts.pendingWaitUntil),null;{let e=await o.blob(),t=(0,h.toNodeOutgoingHttpHeaders)(o.headers);u&&(t[m.NEXT_CACHE_TAGS_HEADER]=u),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==F.renderOpts.collectedRevalidate&&!(F.renderOpts.collectedRevalidate>=m.INFINITE_CACHE)&&F.renderOpts.collectedRevalidate,a=void 0===F.renderOpts.collectedExpire||F.renderOpts.collectedExpire>=m.INFINITE_CACHE?void 0:F.renderOpts.collectedExpire;return{value:{kind:b.CachedRouteKind.APP_ROUTE,status:o.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:a}}}}catch(t){throw(null==r?void 0:r.isStale)&&await v.onRequestError(e,t,{routerKind:"App Router",routePath:R,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:H,isOnDemandRevalidate:S})},M),t}},d=await v.handleResponse({req:e,nextConfig:O,cacheKey:q,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:D,isRoutePPREnabled:!1,isOnDemandRevalidate:S,revalidateOnlyGenerated:P,responseGenerator:u,waitUntil:a.waitUntil,isMinimalMode:s});if(!N)return null;if((null==d||null==(o=d.value)?void 0:o.kind)!==b.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==d||null==(c=d.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});s||t.setHeader("x-nextjs-cache",S?"REVALIDATED":d.isMiss?"MISS":d.isStale?"STALE":"HIT"),C&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let l=(0,h.fromNodeOutgoingHttpHeaders)(d.value.headers);return s&&N||l.delete(m.NEXT_CACHE_TAGS_HEADER),!d.cacheControl||t.getHeader("Cache-Control")||l.get("Cache-Control")||l.set("Cache-Control",(0,y.getCacheControlHeader)(d.cacheControl)),await (0,f.sendResponse)(W,B,new Response(d.value.body,{headers:l,status:d.value.status||200})),null};L?await c(L):await X.withPropagatedContext(e.headers,()=>X.trace(l.BaseServerSpan.handleRequest,{spanName:`${U} ${R}`,kind:o.SpanKind.SERVER,attributes:{"http.method":U,"http.target":e.url}},c))}catch(t){if(t instanceof g.NoFallbackError||await v.onRequestError(e,t,{routerKind:"App Router",routePath:T,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:H,isOnDemandRevalidate:S})}),N)throw t;return await (0,f.sendResponse)(W,B,new Response(null,{status:500})),null}}e.s(["handler",()=>M,"patchFetch",()=>D,"routeModule",()=>v,"serverHooks",()=>C,"workAsyncStorage",()=>O,"workUnitAsyncStorage",()=>k],31614)}];

//# sourceMappingURL=node_modules_next_b7bb5a93._.js.map