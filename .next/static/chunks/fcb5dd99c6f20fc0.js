(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,791583,706399,e=>{"use strict";var i=e.i(475254);let t=(0,i.default)("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);e.s(["ToggleLeft",()=>t],791583);let s=(0,i.default)("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);e.s(["ToggleRight",()=>s],706399)},405828,e=>{"use strict";var i=e.i(843476),t=e.i(271645),s=e.i(107233),a=e.i(688511),l=e.i(727612),n=e.i(791583),c=e.i(706399),d=e.i(167881),r=e.i(970065),o=e.i(23750),h=e.i(10708),x=e.i(184762),m=e.i(62870);function u(){let[e,u]=(0,t.useState)([]),[g,j]=(0,t.useState)(!1),[p,v]=(0,t.useState)({});async function b(){let e=await fetch("/api/admin/promotions"),i=await e.json();i.success&&u(i.data)}async function y(){let e=p.id?"PUT":"POST";(await fetch("/api/admin/promotions",{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify(p)})).ok&&(await b(),j(!1),v({}))}async function f(e){!confirm("האם אתה בטוח שברצונך למחוק את המבצע?")||(await fetch("/api/admin/promotions",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})})).ok&&await b()}async function N(e){await fetch("/api/admin/promotions",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id,active:!e.active})}),await b()}return(0,t.useEffect)(()=>{b()},[]),(0,i.jsx)("div",{className:"min-h-screen bg-gray-50 p-4 md:p-8",children:(0,i.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold",children:"ניהול מבצעים"}),(0,i.jsxs)(d.Button,{onClick:()=>j(!0),className:"gap-2",children:[(0,i.jsx)(s.Plus,{className:"w-4 h-4"}),(0,i.jsx)("span",{className:"hidden md:inline",children:"מבצע חדש"})]})]}),g&&(0,i.jsxs)(r.Card,{className:"p-6 mb-8",children:[(0,i.jsx)("h2",{className:"text-xl font-bold mb-4",children:p.id?"עריכת מבצע":"מבצע חדש"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(h.Label,{htmlFor:"title",children:"כותרת"}),(0,i.jsx)(o.Input,{id:"title",value:p.title||"",onChange:e=>v({...p,title:e.target.value})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(h.Label,{htmlFor:"id",children:"קוד מבצע"}),(0,i.jsx)(o.Input,{id:"id",value:p.id||"",onChange:e=>v({...p,id:e.target.value}),disabled:!!p.id})]}),(0,i.jsxs)("div",{className:"md:col-span-2",children:[(0,i.jsx)(h.Label,{htmlFor:"description",children:"תיאור"}),(0,i.jsx)(x.Textarea,{id:"description",value:p.description||"",onChange:e=>v({...p,description:e.target.value})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(h.Label,{htmlFor:"discountType",children:"סוג הנחה"}),(0,i.jsxs)(m.Select,{value:p.discountType||"percentage",onValueChange:e=>v({...p,discountType:e}),children:[(0,i.jsx)(m.SelectTrigger,{children:(0,i.jsx)(m.SelectValue,{})}),(0,i.jsxs)(m.SelectContent,{children:[(0,i.jsx)(m.SelectItem,{value:"percentage",children:"אחוזים"}),(0,i.jsx)(m.SelectItem,{value:"fixed",children:"סכום קבוע"})]})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)(h.Label,{htmlFor:"discountValue",children:["ערך הנחה (","percentage"===p.discountType?"%":"₪",")"]}),(0,i.jsx)(o.Input,{id:"discountValue",type:"number",value:p.discountValue||"",onChange:e=>v({...p,discountValue:Number(e.target.value)})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(h.Label,{htmlFor:"minNights",children:"מינימום לילות"}),(0,i.jsx)(o.Input,{id:"minNights",type:"number",value:p.minNights||"",onChange:e=>v({...p,minNights:Number(e.target.value)})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(h.Label,{htmlFor:"validFrom",children:"תקף מתאריך"}),(0,i.jsx)(o.Input,{id:"validFrom",type:"date",value:p.validFrom?.split("T")[0]||"",onChange:e=>v({...p,validFrom:new Date(e.target.value).toISOString()})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(h.Label,{htmlFor:"validTo",children:"תקף עד תאריך"}),(0,i.jsx)(o.Input,{id:"validTo",type:"date",value:p.validTo?.split("T")[0]||"",onChange:e=>v({...p,validTo:new Date(e.target.value).toISOString()})})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("input",{type:"checkbox",id:"mobileOnly",checked:p.mobileOnly||!1,onChange:e=>v({...p,mobileOnly:e.target.checked}),className:"w-4 h-4"}),(0,i.jsx)(h.Label,{htmlFor:"mobileOnly",children:"מובייל בלבד"})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("input",{type:"checkbox",id:"active",checked:!1!==p.active,onChange:e=>v({...p,active:e.target.checked}),className:"w-4 h-4"}),(0,i.jsx)(h.Label,{htmlFor:"active",children:"פעיל"})]})]}),(0,i.jsxs)("div",{className:"flex gap-2 mt-6",children:[(0,i.jsx)(d.Button,{onClick:y,children:"שמור"}),(0,i.jsx)(d.Button,{variant:"outline",onClick:()=>{j(!1),v({})},children:"ביטול"})]})]}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(e=>(0,i.jsxs)(r.Card,{className:"p-4",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,i.jsx)("h3",{className:"font-bold text-lg",children:e.title}),(0,i.jsx)("button",{onClick:()=>N(e),children:e.active?(0,i.jsx)(c.ToggleRight,{className:"w-6 h-6 text-green-600"}):(0,i.jsx)(n.ToggleLeft,{className:"w-6 h-6 text-gray-400"})})]}),(0,i.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:e.description}),(0,i.jsxs)("div",{className:"flex items-center justify-between text-sm mb-4",children:[(0,i.jsx)("span",{className:"font-bold text-orange-600",children:"percentage"===e.discountType?`${e.discountValue}% הנחה`:`${e.discountValue}₪ הנחה`}),e.mobileOnly&&(0,i.jsx)("span",{className:"bg-blue-100 text-blue-600 px-2 py-1 rounded text-xs",children:"מובייל בלבד"})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)(d.Button,{size:"sm",variant:"outline",onClick:()=>{v(e),j(!0)},children:(0,i.jsx)(a.Edit,{className:"w-4 h-4"})}),(0,i.jsx)(d.Button,{size:"sm",variant:"outline",onClick:()=>f(e.id),children:(0,i.jsx)(l.Trash2,{className:"w-4 h-4"})})]})]},e.id))})]})})}e.s(["default",()=>u])},70471,e=>{e.n(e.i(405828))}]);