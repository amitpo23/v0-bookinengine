module.exports=[482520,(a,b,c)=>{"use strict";b.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},324560,(a,b,c)=>{"use strict";var d=a.r(482520);function e(){}function f(){}f.resetWarningCache=e,b.exports=function(){function a(a,b,c,e,f,g){if(g!==d){var h=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}function b(){return a}a.isRequired=a;var c={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:b,element:a,elementType:a,instanceOf:b,node:a,objectOf:b,oneOf:b,oneOfType:b,shape:b,exact:b,checkPropTypes:f,resetWarningCache:e};return c.PropTypes=c,c}},341212,(a,b,c)=>{b.exports=a.r(324560)()},631898,a=>{"use strict";var b,c=a.i(187924),d=a.i(572131),e=a.i(76058),f=a.i(129457),g=a.i(281213),h=a.i(340695),i=a.i(630342),j=a.i(205522),k=a.i(621958),l=a.i(497895),m=a.i(904272);let n=()=>(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,c.jsx)("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),(0,c.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,c.jsx)("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),(0,c.jsx)("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),o=()=>(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,c.jsx)("path",{d:"M5 12h14"})}),p=()=>(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,c.jsx)("path",{d:"M5 12h14"}),(0,c.jsx)("path",{d:"M12 5v14"})]}),q=()=>(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,c.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,c.jsx)("path",{d:"m21 21-4.3-4.3"})]}),r=()=>(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,c.jsx)("path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"}),(0,c.jsx)("circle",{cx:"12",cy:"10",r:"3"})]}),s=()=>(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,c.jsx)("rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2"}),(0,c.jsx)("path",{d:"M9 22v-4h6v4"}),(0,c.jsx)("path",{d:"M8 6h.01"}),(0,c.jsx)("path",{d:"M16 6h.01"}),(0,c.jsx)("path",{d:"M12 6h.01"}),(0,c.jsx)("path",{d:"M12 10h.01"}),(0,c.jsx)("path",{d:"M12 14h.01"}),(0,c.jsx)("path",{d:"M16 10h.01"}),(0,c.jsx)("path",{d:"M16 14h.01"}),(0,c.jsx)("path",{d:"M8 10h.01"}),(0,c.jsx)("path",{d:"M8 14h.01"})]}),t=()=>(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-spin",children:(0,c.jsx)("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})});function u({onSearch:a}){let{search:b,setSearch:u,setCurrentStep:v,setSearchResults:w,setIsSearching:x,setSearchError:y,isSearching:z,searchError:A}=(0,e.useBooking)(),{t:B,locale:C,dir:D}=(0,f.useI18n)(),[E,F]=(0,d.useState)(!1),[G,H]=(0,d.useState)("city"),[I,J]=(0,d.useState)(""),K=async()=>{if(!I.trim())return void y("he"===C?"יש להזין עיר או שם מלון":"Please enter a city or hotel name");if(!b.checkIn||!b.checkOut)return void y("he"===C?"יש לבחור תאריכי צ'ק-אין וצ'ק-אאוט":"Please select check-in and check-out dates");x(!0),y(null);try{let c=(0,g.formatDateForApi)(b.checkIn),d=(0,g.formatDateForApi)(b.checkOut),e={dateFrom:c,dateTo:d,adults:b.adults,children:b.childrenAges||[],limit:20};"city"===G?e.city=I:e.hotelName=I,console.log("[v0] ====== SEARCH DEBUG ======"),console.log("[v0] Check-in Date object:",b.checkIn),console.log("[v0] Check-out Date object:",b.checkOut),console.log("[v0] Formatted dateFrom:",c),console.log("[v0] Formatted dateTo:",d),console.log("[v0] Full search params:",JSON.stringify(e,null,2));let f=await fetch("/api/hotels/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});console.log("[v0] Response status:",f.status);let h=await f.json();if(console.log("[v0] Full response data:",JSON.stringify(h,null,2)),!f.ok)throw Error(h.error||"Search failed");let i=h.data||h.results||[];w(i),0===i.length?y("he"===C?"לא נמצאו תוצאות":"No results found"):(u({...b,city:"city"===G?I:"",hotelName:"hotel"===G?I:""}),v(2),a?.())}catch(a){console.log("[v0] Search error:",a),y(a.message||"Failed to search")}finally{x(!1)}};return(0,c.jsxs)("div",{className:"bg-card rounded-xl border border-border p-4 shadow-lg",dir:D,children:[(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,c.jsxs)("span",{className:"text-sm text-muted-foreground",children:["he"===C?"חיפוש לפי":"Search by",":"]}),(0,c.jsx)(k.Tabs,{value:G,onValueChange:a=>H(a),children:(0,c.jsxs)(k.TabsList,{className:"h-8",children:[(0,c.jsxs)(k.TabsTrigger,{value:"city",className:"text-xs px-3 h-7 flex items-center gap-1",children:[(0,c.jsx)(r,{}),"he"===C?"עיר":"City"]}),(0,c.jsxs)(k.TabsTrigger,{value:"hotel",className:"text-xs px-3 h-7 flex items-center gap-1",children:[(0,c.jsx)(s,{}),"he"===C?"שם מלון":"Hotel Name"]})]})})]}),(0,c.jsxs)("div",{className:"relative",children:[(0,c.jsx)("div",{className:(0,l.cn)("absolute top-1/2 -translate-y-1/2 text-muted-foreground","rtl"===D?"right-3":"left-3"),children:(0,c.jsx)(q,{})}),(0,c.jsx)(j.Input,{value:I,onChange:a=>J(a.target.value),placeholder:"city"===G?"he"===C?"הזן שם עיר (למשל: Dubai, Paris)":"Enter city name (e.g., Dubai, Paris)":"he"===C?"הזן שם מלון (למשל: Dizengoff Inn)":"Enter hotel name (e.g., Dizengoff Inn)",className:(0,l.cn)("h-12","rtl"===D?"pr-10":"pl-10"),onKeyDown:a=>"Enter"===a.key&&K()})]})]}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,c.jsx)(m.DatePickerInput,{value:b.checkIn,onChange:a=>u({...b,checkIn:a}),minDate:new Date,label:B("checkIn"),placeholder:B("selectDate"),dir:D}),(0,c.jsx)(m.DatePickerInput,{value:b.checkOut,onChange:a=>u({...b,checkOut:a}),minDate:b.checkIn?new Date(b.checkIn.getTime()+864e5):new Date,label:B("checkOut"),placeholder:B("selectDate"),dir:D}),(0,c.jsxs)(i.Popover,{open:E,onOpenChange:F,children:[(0,c.jsx)(i.PopoverTrigger,{asChild:!0,children:(0,c.jsxs)(h.Button,{variant:"outline",className:(0,l.cn)("w-full justify-start h-14 px-4 bg-transparent","rtl"===D?"text-right":"text-left"),children:[(0,c.jsxs)("div",{className:(0,l.cn)("flex flex-col gap-0.5 flex-1","items-start"),children:[(0,c.jsx)("span",{className:"text-xs text-muted-foreground",children:B("guests")}),(0,c.jsxs)("span",{className:"font-medium",children:[b.adults," ",B("adults"),b.children>0?`, ${b.children} ${B("children")}`:""]})]}),(0,c.jsx)(n,{})]})}),(0,c.jsx)(i.PopoverContent,{className:"w-72",align:"start",children:(0,c.jsxs)("div",{className:"space-y-4",dir:D,children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"font-medium",children:B("adults")}),(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:B("adultsAge")})]}),(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsx)(h.Button,{variant:"outline",size:"icon",className:"h-8 w-8 bg-transparent",onClick:()=>u({...b,adults:Math.max(1,b.adults-1)}),disabled:b.adults<=1,children:(0,c.jsx)(o,{})}),(0,c.jsx)("span",{className:"w-8 text-center font-medium",children:b.adults}),(0,c.jsx)(h.Button,{variant:"outline",size:"icon",className:"h-8 w-8 bg-transparent",onClick:()=>u({...b,adults:Math.min(10,b.adults+1)}),disabled:b.adults>=10,children:(0,c.jsx)(p,{})})]})]}),(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"font-medium",children:B("children")}),(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:B("childrenAges")})]}),(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsx)(h.Button,{variant:"outline",size:"icon",className:"h-8 w-8 bg-transparent",onClick:()=>u({...b,children:Math.max(0,b.children-1)}),disabled:b.children<=0,children:(0,c.jsx)(o,{})}),(0,c.jsx)("span",{className:"w-8 text-center font-medium",children:b.children}),(0,c.jsx)(h.Button,{variant:"outline",size:"icon",className:"h-8 w-8 bg-transparent",onClick:()=>u({...b,children:Math.min(6,b.children+1)}),disabled:b.children>=6,children:(0,c.jsx)(p,{})})]})]}),(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsx)("div",{children:(0,c.jsx)("p",{className:"font-medium",children:B("rooms")})}),(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsx)(h.Button,{variant:"outline",size:"icon",className:"h-8 w-8 bg-transparent",onClick:()=>u({...b,rooms:Math.max(1,b.rooms-1)}),disabled:b.rooms<=1,children:(0,c.jsx)(o,{})}),(0,c.jsx)("span",{className:"w-8 text-center font-medium",children:b.rooms}),(0,c.jsx)(h.Button,{variant:"outline",size:"icon",className:"h-8 w-8 bg-transparent",onClick:()=>u({...b,rooms:Math.min(5,b.rooms+1)}),disabled:b.rooms>=5,children:(0,c.jsx)(p,{})})]})]}),(0,c.jsx)(h.Button,{className:"w-full",onClick:()=>F(!1),children:B("confirm")})]})})]}),(0,c.jsx)(h.Button,{className:"h-14 text-base font-semibold",onClick:K,disabled:z,children:z?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(t,{}),(0,c.jsx)("span",{className:"ml-2",children:"he"===C?"מחפש...":"Searching..."})]}):B("searchAvailability")})]}),A&&(0,c.jsx)("div",{className:"mt-4 p-3 bg-destructive/10 border border-destructive/20 rounded-lg text-destructive text-sm",children:A})]})}var v=a.i(571987),w=a.i(395116),x=a.i(254161);let y=a=>(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:(0,c.jsx)("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),z=a=>(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:(0,c.jsx)("path",{d:"M20 6 9 17l-5-5"})}),A=a=>(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:(0,c.jsx)("path",{d:"m6 9 6 6 6-6"})}),B=a=>(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:(0,c.jsx)("path",{d:"m18 15-6-6-6 6"})}),C=a=>(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[(0,c.jsx)("path",{d:"M18 6 6 18"}),(0,c.jsx)("path",{d:"m6 6 12 12"})]}),D=a=>(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[(0,c.jsx)("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),(0,c.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,c.jsx)("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),(0,c.jsx)("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),E=a=>(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[(0,c.jsx)("path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"}),(0,c.jsx)("circle",{cx:"12",cy:"10",r:"3"})]}),F=a=>(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:(0,c.jsx)("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),G=a=>(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[(0,c.jsx)("path",{d:"M10 2v2"}),(0,c.jsx)("path",{d:"M14 2v2"}),(0,c.jsx)("path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1"}),(0,c.jsx)("path",{d:"M6 2v2"})]}),H=a=>(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[(0,c.jsx)("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),(0,c.jsx)("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]}),I=a=>(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:(0,c.jsx)("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),J=a=>(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[(0,c.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,c.jsx)("path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"}),(0,c.jsx)("path",{d:"M2 12h20"})]}),K=a=>(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[(0,c.jsx)("path",{d:"M2 4v16"}),(0,c.jsx)("path",{d:"M2 8h18a2 2 0 0 0 2 2v10"}),(0,c.jsx)("path",{d:"M2 17h20"}),(0,c.jsx)("path",{d:"M6 8v9"})]}),L=a=>(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[(0,c.jsx)("path",{d:"M8 3H5a2 2 0 0 0-2 2v3"}),(0,c.jsx)("path",{d:"M21 8V5a2 2 0 0 0-2-2h-3"}),(0,c.jsx)("path",{d:"M3 16v3a2 2 0 0 0 2 2h3"}),(0,c.jsx)("path",{d:"M16 21h3a2 2 0 0 0 2-2v-3"})]}),M=a=>(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[(0,c.jsx)("path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"}),(0,c.jsx)("path",{d:"M7 2v20"}),(0,c.jsx)("path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"})]}),N=a=>(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[(0,c.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,c.jsx)("polyline",{points:"12 6 12 12 16 14"})]}),O=a=>(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:(0,c.jsx)("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})});var P=a.i(965733);function Q({room:a}){let{addRoom:b,nights:g,hotel:i}=(0,e.useBooking)(),{t:j,locale:k,dir:m}=(0,f.useI18n)(),[n,o]=(0,d.useState)(!0),[p,q]=(0,d.useState)(0),[r,s]=(0,d.useState)(!1),t=(0,w.getRoomRatePlans)(a.id),u=a=>new Intl.NumberFormat("he"===k?"he-IL":"en-US",{style:"currency",currency:i?.currency||"ILS",minimumFractionDigits:0}).format(a),y=1===g?j("night"):j("nights");return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"bg-card rounded-xl border border-border overflow-hidden shadow-sm hover:shadow-md transition-shadow",dir:m,children:[(0,c.jsxs)("div",{className:"flex flex-col md:flex-row",children:[(0,c.jsxs)("div",{className:"relative w-full md:w-72 h-48 md:h-auto flex-shrink-0",children:[(0,c.jsx)(v.default,{src:a.images[p]||"/placeholder.svg",alt:a.name,fill:!0,className:"object-cover cursor-pointer",onClick:()=>s(!0)}),a.images.length>1&&(0,c.jsx)("div",{className:"absolute bottom-2 left-2 flex gap-1",children:a.images.map((a,b)=>(0,c.jsx)("button",{className:(0,l.cn)("w-2 h-2 rounded-full transition-colors",b===p?"bg-white":"bg-white/50"),onClick:()=>q(b)},b))}),a.available<=3&&(0,c.jsx)(x.Badge,{className:(0,l.cn)("absolute top-2 bg-red-500 hover:bg-red-500","rtl"===m?"right-2":"left-2"),children:j("roomsLeft",{count:a.available})})]}),(0,c.jsxs)("div",{className:"flex-1 p-4",children:[(0,c.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,c.jsx)("h3",{className:"text-xl font-bold text-foreground",children:a.name}),(0,c.jsx)("button",{onClick:()=>o(!n),className:"text-muted-foreground hover:text-foreground md:hidden",children:n?(0,c.jsx)(B,{className:"h-5 w-5"}):(0,c.jsx)(A,{className:"h-5 w-5"})})]}),(0,c.jsx)("p",{className:"text-muted-foreground text-sm mb-3 line-clamp-2",children:a.description}),(0,c.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-muted-foreground mb-3",children:[(0,c.jsxs)("div",{className:"flex items-center gap-1",children:[(0,c.jsx)(D,{className:"h-4 w-4"}),(0,c.jsx)("span",{children:j("upToGuests",{count:a.maxGuests})})]}),(0,c.jsxs)("div",{className:"flex items-center gap-1",children:[(0,c.jsx)(L,{className:"h-4 w-4"}),(0,c.jsxs)("span",{children:[a.size," ",j("sqm")]})]}),(0,c.jsxs)("div",{className:"flex items-center gap-1",children:[(0,c.jsx)(K,{className:"h-4 w-4"}),(0,c.jsx)("span",{children:a.bedType})]})]}),(0,c.jsxs)("div",{className:"flex flex-wrap gap-2",children:[a.amenities.slice(0,5).map(a=>(0,c.jsx)(x.Badge,{variant:"outline",className:"text-xs",children:a},a)),a.amenities.length>5&&(0,c.jsxs)(x.Badge,{variant:"outline",className:"text-xs",children:["+",a.amenities.length-5]})]})]})]}),n&&(0,c.jsx)("div",{className:"border-t border-border",children:(0,c.jsx)("div",{className:"divide-y divide-border",children:t.map(d=>(0,c.jsx)("div",{className:"p-4 hover:bg-muted/30 transition-colors",children:(0,c.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,c.jsx)("h4",{className:"font-semibold text-foreground",children:d.name}),(a=>{switch(a){case"free":return(0,c.jsx)(x.Badge,{variant:"secondary",className:"bg-green-100 text-green-700 hover:bg-green-100",children:j("freeCancellation")});case"non-refundable":return(0,c.jsx)(x.Badge,{variant:"secondary",className:"bg-amber-100 text-amber-700 hover:bg-amber-100",children:j("nonRefundable")});case"partial":return(0,c.jsx)(x.Badge,{variant:"secondary",className:"bg-blue-100 text-blue-700 hover:bg-blue-100",children:j("partialRefund")})}})(d.cancellationPolicy)]}),(0,c.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-2",children:[(a=>{switch(a){case"breakfast":return(0,c.jsx)(G,{className:"h-4 w-4"});case"half-board":case"full-board":case"all-inclusive":return(0,c.jsx)(M,{className:"h-4 w-4"});default:return null}})(d.mealPlan),(0,c.jsx)("span",{children:(a=>{switch(a){case"room-only":return j("roomOnly");case"breakfast":return j("breakfast");case"half-board":return j("halfBoard");case"full-board":return j("fullBoard");case"all-inclusive":return j("allInclusive")}})(d.mealPlan)})]}),(0,c.jsx)("div",{className:"flex flex-wrap gap-x-4 gap-y-1",children:d.includes.map(a=>(0,c.jsxs)("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[(0,c.jsx)(z,{className:"h-3 w-3 text-green-600"}),(0,c.jsx)("span",{children:a})]},a))})]}),(0,c.jsxs)("div",{className:(0,l.cn)("flex items-center gap-4 md:flex-col","rtl"===m?"md:items-start":"md:items-end"),children:[(0,c.jsxs)("div",{className:"rtl"===m?"text-left md:text-left":"text-right md:text-right",children:[d.originalPrice&&(0,c.jsx)("div",{className:"text-sm text-muted-foreground line-through",children:u(d.originalPrice*g)}),(0,c.jsx)("div",{className:"text-2xl font-bold text-foreground",children:u(d.price*g)}),(0,c.jsx)("div",{className:"text-xs text-muted-foreground",children:j("forNights",{count:g,nightsText:y})})]}),(0,c.jsx)(h.Button,{onClick:()=>b({room:a,ratePlan:d,quantity:1}),className:"min-w-[100px]",children:j("select")})]})]})},d.id))})})]}),(0,c.jsx)(P.Dialog,{open:r,onOpenChange:s,children:(0,c.jsxs)(P.DialogContent,{className:"max-w-4xl",children:[(0,c.jsx)(P.DialogHeader,{children:(0,c.jsx)(P.DialogTitle,{children:a.name})}),(0,c.jsx)("div",{className:"relative aspect-video",children:(0,c.jsx)(v.default,{src:a.images[p]||"/placeholder.svg",alt:a.name,fill:!0,className:"object-cover rounded-lg"})}),(0,c.jsx)("div",{className:"flex gap-2 overflow-x-auto py-2",children:a.images.map((a,b)=>(0,c.jsx)("button",{onClick:()=>q(b),className:(0,l.cn)("relative w-20 h-14 rounded-md overflow-hidden flex-shrink-0 ring-2 transition-all",b===p?"ring-primary":"ring-transparent hover:ring-muted-foreground"),children:(0,c.jsx)(v.default,{src:a||"/placeholder.svg",alt:"",fill:!0,className:"object-cover"})},b))})]})})]})}function R({showContinue:a=!0,onContinue:b,className:i}){let{hotel:j,search:k,selectedRooms:m,removeRoom:n,updateRoomQuantity:o,nights:p,totalPrice:q,setCurrentStep:r}=(0,e.useBooking)(),{t:s,locale:t,dir:u}=(0,f.useI18n)(),[w,x]=(0,d.useState)(!0),y=a=>new Intl.NumberFormat("he"===t?"he-IL":"en-US",{style:"currency",currency:j?.currency||"ILS",minimumFractionDigits:0}).format(a),z=Math.round(.05*q),A=q-z,B=1===p?"he"===t?"לילה":"night":"he"===t?"לילות":"nights",D=m[0]?.room?.images?.[0]||"/luxury-hotel-pool.png";return 0===m.length?(0,c.jsxs)("div",{className:(0,l.cn)("bg-white rounded-xl border border-gray-200 p-6 shadow-sm",i),dir:u,children:[(0,c.jsx)("h3",{className:"font-semibold text-lg mb-4 text-gray-900",children:"he"===t?"סיכום הזמנה":"Booking Summary"}),(0,c.jsx)("p",{className:"text-gray-500 text-sm text-center py-8",children:"he"===t?"טרם נבחרו חדרים":"No rooms selected"})]}):(0,c.jsxs)("div",{className:(0,l.cn)("bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",i),dir:u,children:[(0,c.jsx)("div",{className:"relative h-48 w-full",children:(0,c.jsx)(v.default,{src:D||"/placeholder.svg",alt:j?.name||"Hotel",fill:!0,className:"object-cover"})}),(0,c.jsxs)("div",{className:"p-4 border-b border-gray-100",children:[(0,c.jsx)("h3",{className:"font-bold text-lg text-gray-900 mb-2",children:"he"===t?"סיכום הזמנה":"Booking Summary"}),(0,c.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[(0,c.jsx)("span",{className:"font-medium",children:j?.name||"המלון"}),(0,c.jsxs)("span",{children:[(0,g.formatDate)(k.checkIn,t)," - ",(0,g.formatDate)(k.checkOut,t)]})]}),(0,c.jsx)("div",{className:"text-sm text-gray-500 mt-1",children:`${p} ${B}`})]}),(0,c.jsx)("div",{className:"p-4 space-y-3",children:m.map((a,b)=>(0,c.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,c.jsxs)("div",{className:"flex items-start justify-between",children:[(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)("span",{className:"bg-blue-600 text-white text-xs font-bold px-2 py-1 rounded",children:"he"===t?`חדר ${b+1}`:`Room ${b+1}`}),(0,c.jsx)("span",{className:"text-xs text-amber-600 font-medium",children:"he"===t?"הנחה למזמינים באתר":"Website discount"})]}),(0,c.jsx)(h.Button,{variant:"ghost",size:"icon",className:"h-6 w-6 text-gray-400 hover:text-red-500",onClick:()=>n(a.room.id,a.ratePlan.id),children:(0,c.jsx)(C,{className:"h-4 w-4"})})]}),(0,c.jsxs)("p",{className:"text-sm text-gray-700 mt-2",children:[a.room.name,", ",a.ratePlan.name]}),(0,c.jsxs)("p",{className:"text-lg font-bold text-gray-900 mt-1",children:["he"===t?"מחיר:":"Price:"," ",y(a.ratePlan.price*a.quantity*p)]})]},`${a.room.id}-${a.ratePlan.id}`))}),w&&(0,c.jsx)("div",{className:"mx-4 mb-4 bg-amber-50 border border-amber-200 rounded-lg p-3",children:(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsx)("div",{children:(0,c.jsx)("p",{className:"text-sm font-medium text-amber-800",children:"he"===t?`הצטרפות לחוג השמש תחסוך לך ${y(z)}`:`Join the club to save ${y(z)}`})}),(0,c.jsx)(h.Button,{size:"sm",className:"bg-amber-500 hover:bg-amber-600 text-white rounded-full px-4",children:"he"===t?"חוג השמש":"Sun Club"})]})}),(0,c.jsxs)("div",{className:"p-4 border-t border-gray-100 space-y-2",children:[(0,c.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,c.jsx)("span",{className:"text-gray-600",children:"he"===t?"מחיר באתר":"Website price"}),(0,c.jsx)("span",{className:"text-gray-900 font-medium",children:y(q)})]}),(0,c.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,c.jsx)("span",{className:"text-gray-600",children:"he"===t?"מחיר מועדון":"Club price"}),(0,c.jsx)("span",{className:"text-blue-600 font-bold",children:y(A)})]})]}),a&&(0,c.jsx)("div",{className:"p-4 pt-0",children:(0,c.jsx)(h.Button,{className:"w-full bg-blue-600 hover:bg-blue-700",size:"lg",onClick:()=>{r(3),b?.()},children:"he"===t?"המשך להזמנה":"Continue to booking"})})]})}var S=a.i(917171),T=a.i(546893),U=a.i(887682),V=a.i(703130);function W({onSubmit:a}){let{hotel:b}=(0,e.useBooking)(),{t:g,locale:i,dir:k}=(0,f.useI18n)(),[l,m]=(0,d.useState)({firstName:"",lastName:"",email:"",phone:"",country:"IL",specialRequests:"",arrivalTime:"",firstNameHe:"",lastNameHe:"",firstNameEn:"",lastNameEn:""}),[n,o]=(0,d.useState)({}),p=(a,b)=>{m(c=>({...c,[a]:b})),n[a]&&o(b=>({...b,[a]:void 0}))};return(0,c.jsx)("form",{onSubmit:b=>{let c,d;b.preventDefault(),c={},d="he"===i?"שדה חובה":"Required",l.firstNameHe?.trim()||(c.firstNameHe=d),l.lastNameHe?.trim()||(c.lastNameHe=d),l.firstNameEn?.trim()||(c.firstNameEn=d),l.lastNameEn?.trim()||(c.lastNameEn=d),l.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email)||(c.email="he"===i?"אימייל לא תקין":"Invalid email"):c.email=d,l.phone.trim()?/^[0-9+\-\s()]{9,}$/.test(l.phone)||(c.phone="he"===i?"טלפון לא תקין":"Invalid phone"):c.phone=d,o(c),0===Object.keys(c).length&&a({...l,firstName:l.firstNameEn||l.firstNameHe||"",lastName:l.lastNameEn||l.lastNameHe||""})},dir:k,children:(0,c.jsxs)(V.Card,{className:"border-0 shadow-none bg-transparent",children:[(0,c.jsxs)(V.CardHeader,{className:"px-0",children:[(0,c.jsx)(V.CardTitle,{className:"text-xl text-gray-900",children:"he"===i?"פרטים אישיים":"Personal Details"}),(0,c.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"he"===i?"השדות המסומנים בכוכבית הינם שדות חובה":"Fields marked with asterisk are required"})]}),(0,c.jsxs)(V.CardContent,{className:"px-0 space-y-6",children:[(0,c.jsxs)("div",{className:"space-y-4",children:[(0,c.jsx)("h3",{className:"font-medium text-gray-900",children:"he"===i?"שם בעברית":"Name in Hebrew"}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsxs)(S.Label,{htmlFor:"firstNameHe",className:"text-gray-700",children:["he"===i?"שם פרטי":"First Name"," *"]}),(0,c.jsx)(j.Input,{id:"firstNameHe",value:l.firstNameHe,onChange:a=>p("firstNameHe",a.target.value),className:n.firstNameHe?"border-red-500":"border-gray-300",placeholder:"he"===i?"הזן שם פרטי":"Enter first name"}),n.firstNameHe&&(0,c.jsx)("p",{className:"text-xs text-red-500",children:n.firstNameHe})]}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsxs)(S.Label,{htmlFor:"lastNameHe",className:"text-gray-700",children:["he"===i?"שם משפחה":"Last Name"," *"]}),(0,c.jsx)(j.Input,{id:"lastNameHe",value:l.lastNameHe,onChange:a=>p("lastNameHe",a.target.value),className:n.lastNameHe?"border-red-500":"border-gray-300",placeholder:"he"===i?"הזן שם משפחה":"Enter last name"}),n.lastNameHe&&(0,c.jsx)("p",{className:"text-xs text-red-500",children:n.lastNameHe})]})]})]}),(0,c.jsxs)("div",{className:"space-y-4",children:[(0,c.jsx)("h3",{className:"font-medium text-gray-900",children:"he"===i?"שם באנגלית":"Name in English"}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsxs)(S.Label,{htmlFor:"firstNameEn",className:"text-gray-700",children:["he"===i?"שם פרטי":"First Name"," *"]}),(0,c.jsx)(j.Input,{id:"firstNameEn",value:l.firstNameEn,onChange:a=>p("firstNameEn",a.target.value),className:n.firstNameEn?"border-red-500":"border-gray-300",placeholder:"Enter first name",dir:"ltr"}),n.firstNameEn&&(0,c.jsx)("p",{className:"text-xs text-red-500",children:n.firstNameEn})]}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsxs)(S.Label,{htmlFor:"lastNameEn",className:"text-gray-700",children:["he"===i?"שם משפחה":"Last Name"," *"]}),(0,c.jsx)(j.Input,{id:"lastNameEn",value:l.lastNameEn,onChange:a=>p("lastNameEn",a.target.value),className:n.lastNameEn?"border-red-500":"border-gray-300",placeholder:"Enter last name",dir:"ltr"}),n.lastNameEn&&(0,c.jsx)("p",{className:"text-xs text-red-500",children:n.lastNameEn})]})]})]}),(0,c.jsxs)("div",{className:"space-y-4",children:[(0,c.jsx)("h3",{className:"font-medium text-gray-900",children:"he"===i?"פרטי התקשרות":"Contact Details"}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsxs)(S.Label,{htmlFor:"email",className:"text-gray-700 flex items-center gap-1",children:[(0,c.jsx)(H,{className:"h-4 w-4"}),"he"===i?'דוא"ל':"Email"," *"]}),(0,c.jsx)(j.Input,{id:"email",type:"email",value:l.email,onChange:a=>p("email",a.target.value),className:n.email?"border-red-500":"border-gray-300",placeholder:"example@email.com",dir:"ltr"}),n.email&&(0,c.jsx)("p",{className:"text-xs text-red-500",children:n.email})]}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsxs)(S.Label,{htmlFor:"phone",className:"text-gray-700 flex items-center gap-1",children:[(0,c.jsx)(I,{className:"h-4 w-4"}),"he"===i?"טלפון":"Phone"," *"]}),(0,c.jsx)(j.Input,{id:"phone",type:"tel",value:l.phone,onChange:a=>p("phone",a.target.value),className:n.phone?"border-red-500":"border-gray-300",placeholder:"050-1234567",dir:"ltr"}),n.phone&&(0,c.jsx)("p",{className:"text-xs text-red-500",children:n.phone})]})]})]}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsxs)(S.Label,{className:"text-gray-700 flex items-center gap-1",children:[(0,c.jsx)(J,{className:"h-4 w-4"}),"he"===i?"מדינה":"Country"]}),(0,c.jsxs)(U.Select,{value:l.country,onValueChange:a=>p("country",a),children:[(0,c.jsx)(U.SelectTrigger,{className:"border-gray-300",children:(0,c.jsx)(U.SelectValue,{})}),(0,c.jsx)(U.SelectContent,{children:[{code:"IL",name:"he"===i?"ישראל":"Israel"},{code:"US",name:"he"===i?'ארה"ב':"USA"},{code:"GB",name:"he"===i?"בריטניה":"UK"},{code:"DE",name:"he"===i?"גרמניה":"Germany"},{code:"FR",name:"he"===i?"צרפת":"France"}].map(a=>(0,c.jsx)(U.SelectItem,{value:a.code,children:a.name},a.code))})]})]}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsxs)(S.Label,{className:"text-gray-700 flex items-center gap-1",children:[(0,c.jsx)(N,{className:"h-4 w-4"}),"he"===i?"שעת הגעה משוערת":"Estimated Arrival"]}),(0,c.jsxs)(U.Select,{value:l.arrivalTime,onValueChange:a=>p("arrivalTime",a),children:[(0,c.jsx)(U.SelectTrigger,{className:"border-gray-300",children:(0,c.jsx)(U.SelectValue,{placeholder:"he"===i?"בחר שעה":"Select time"})}),(0,c.jsx)(U.SelectContent,{children:["14:00 - 15:00","15:00 - 16:00","16:00 - 17:00","17:00 - 18:00","18:00 - 19:00","19:00 - 20:00","20:00+"].map(a=>(0,c.jsx)(U.SelectItem,{value:a,children:a},a))})]})]})]}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsxs)(S.Label,{htmlFor:"specialRequests",className:"text-gray-700 flex items-center gap-1",children:[(0,c.jsx)(O,{className:"h-4 w-4"}),"he"===i?"בקשות מיוחדות":"Special Requests"]}),(0,c.jsx)(T.Textarea,{id:"specialRequests",value:l.specialRequests,onChange:a=>p("specialRequests",a.target.value),placeholder:"he"===i?"בקשות מיוחדות (אופציונלי)":"Special requests (optional)",rows:3,className:"border-gray-300"}),(0,c.jsx)("p",{className:"text-xs text-gray-500",children:"he"===i?"בקשות מיוחדות כפופות לזמינות ואינן מובטחות":"Special requests are subject to availability and not guaranteed"})]}),(0,c.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 text-sm",children:[(0,c.jsx)("p",{className:"font-medium text-blue-900 mb-2",children:"he"===i?`מדיניות כניסה - ${b?.name||"המלון"}`:`Check-in Policy - ${b?.name||"Hotel"}`}),(0,c.jsxs)("p",{className:"text-blue-700",children:["he"===i?"צ'ק-אין":"Check-in",": ",b?.policies?.checkIn||"15:00"," |"," ","he"===i?"צ'ק-אאוט":"Check-out",": ",b?.policies?.checkOut||"11:00"]})]}),(0,c.jsx)(h.Button,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700",size:"lg",children:"he"===i?"המשך לתשלום":"Continue to Payment"})]})]})})}var X="clover";"".concat("https://js.stripe.com","/").concat(X,"/stripe.js");var Y=function(a,b){a&&a._registerWrapper&&a._registerWrapper({name:"stripe-js",version:"8.5.3",startTime:b})},Z=null,$=function(a,b,c){if(null===a)return null;var d,e=b[0].match(/^pk_test/),f=3===(d=a.version)?"v3":d;e&&f!==X&&console.warn("Stripe.js@".concat(f," was loaded on the page, but @stripe/stripe-js@").concat("8.5.3"," expected Stripe.js@").concat(X,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var g=a.apply(void 0,b);return Y(g,c),g},_=!1,aa=function(){return b?b:b=(null!==Z?Z:(Z=new Promise(function(a,b){a(null)})).catch(function(a){return Z=null,Promise.reject(a)})).catch(function(a){return b=null,Promise.reject(a)})};Promise.resolve().then(function(){return aa()}).catch(function(a){_||console.warn(a)});var ab=a.i(341212);function ac(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function ad(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?ac(Object(c),!0).forEach(function(b){af(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):ac(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function ae(a){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function af(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function ag(a,b){return function(a){if(Array.isArray(a))return a}(a)||function(a,b){var c,d,e=a&&("undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"]);if(null!=e){var f=[],g=!0,h=!1;try{for(e=e.call(a);!(g=(c=e.next()).done)&&(f.push(c.value),!b||f.length!==b);g=!0);}catch(a){h=!0,d=a}finally{try{g||null==e.return||e.return()}finally{if(h)throw d}}return f}}(a,b)||function(a,b){if(a){if("string"==typeof a)return ah(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);if("Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c)return Array.from(a);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return ah(a,b)}}(a,b)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ah(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}var ai=function(a,b,c){var e=!!c,f=d.default.useRef(c);d.default.useEffect(function(){f.current=c},[c]),d.default.useEffect(function(){if(!e||!a)return function(){};var c=function(){f.current&&f.current.apply(f,arguments)};return a.on(b,c),function(){a.off(b,c)}},[e,b,a,f])},aj=function(a){var b=d.default.useRef(a);return d.default.useEffect(function(){b.current=a},[a]),b.current},ak=function(a){return null!==a&&"object"===ae(a)},al="[object Object]",am=function a(b,c){if(!ak(b)||!ak(c))return b===c;var d=Array.isArray(b);if(d!==Array.isArray(c))return!1;var e=Object.prototype.toString.call(b)===al;if(e!==(Object.prototype.toString.call(c)===al))return!1;if(!e&&!d)return b===c;var f=Object.keys(b),g=Object.keys(c);if(f.length!==g.length)return!1;for(var h={},i=0;i<f.length;i+=1)h[f[i]]=!0;for(var j=0;j<g.length;j+=1)h[g[j]]=!0;var k=Object.keys(h);return k.length===f.length&&k.every(function(d){return a(b[d],c[d])})},an=function(a,b,c){return ak(a)?Object.keys(a).reduce(function(d,e){var f=!ak(b)||!am(a[e],b[e]);return c.includes(e)?(f&&console.warn("Unsupported prop change: options.".concat(e," is not a mutable property.")),d):f?ad(ad({},d||{}),{},af({},e,a[e])):d},null):null},ao="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",ap=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ao;if(null===a||ak(a)&&"function"==typeof a.elements&&"function"==typeof a.createToken&&"function"==typeof a.createPaymentMethod&&"function"==typeof a.confirmCardPayment)return a;throw Error(b)},aq=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ao;if(ak(a)&&"function"==typeof a.then)return{tag:"async",stripePromise:Promise.resolve(a).then(function(a){return ap(a,b)})};var c=ap(a,b);return null===c?{tag:"empty"}:{tag:"sync",stripe:c}},ar=function(a){a&&a._registerWrapper&&a.registerAppInfo&&(a._registerWrapper({name:"react-stripe-js",version:"5.4.1"}),a.registerAppInfo({name:"react-stripe-js",version:"5.4.1",url:"https://stripe.com/docs/stripe-js/react"}))},as=d.default.createContext(null);as.displayName="ElementsContext";var at=function(a,b){if(!a)throw Error("Could not find Elements context; You need to wrap the part of your app that ".concat(b," in an <Elements> provider."));return a},au=function(a){var b=a.stripe,c=a.options,e=a.children,f=d.default.useMemo(function(){return aq(b)},[b]),g=ag(d.default.useState(function(){return{stripe:"sync"===f.tag?f.stripe:null,elements:"sync"===f.tag?f.stripe.elements(c):null}}),2),h=g[0],i=g[1];d.default.useEffect(function(){var a=!0,b=function(a){i(function(b){return b.stripe?b:{stripe:a,elements:a.elements(c)}})};return"async"!==f.tag||h.stripe?"sync"!==f.tag||h.stripe||b(f.stripe):f.stripePromise.then(function(c){c&&a&&b(c)}),function(){a=!1}},[f,h,c]);var j=aj(b);d.default.useEffect(function(){null!==j&&j!==b&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[j,b]);var k=aj(c);return d.default.useEffect(function(){if(h.elements){var a=an(c,k,["clientSecret","fonts"]);a&&h.elements.update(a)}},[c,k,h.elements]),d.default.useEffect(function(){ar(h.stripe)},[h.stripe]),d.default.createElement(as.Provider,{value:h},e)};au.propTypes={stripe:ab.default.any,options:ab.default.object};ab.default.func.isRequired;var av=d.default.createContext(null);av.displayName="CheckoutContext",ab.default.any,ab.default.shape({clientSecret:ab.default.oneOfType([ab.default.string,ab.default.instanceOf(Promise)]).isRequired,elementsOptions:ab.default.object}).isRequired;var aw=function(a){var b=d.default.useContext(av),c=d.default.useContext(as);if(!b)return at(c,a);if(!c)return b;throw Error("You cannot wrap the part of your app that ".concat(a," in both <CheckoutProvider> and <Elements> providers."))},ax=["mode"],ay=function(a,b){var c="".concat(a.charAt(0).toUpperCase()+a.slice(1),"Element"),e=b?function(a){aw("mounts <".concat(c,">"));var b=a.id,e=a.className;return d.default.createElement("div",{id:b,className:e})}:function(b){var e,f=b.id,g=b.className,h=b.options,i=void 0===h?{}:h,j=b.onBlur,k=b.onFocus,l=b.onReady,m=b.onChange,n=b.onEscape,o=b.onClick,p=b.onLoadError,q=b.onLoaderStart,r=b.onNetworksChange,s=b.onConfirm,t=b.onCancel,u=b.onShippingAddressChange,v=b.onShippingRateChange,w=b.onSavedPaymentMethodRemove,x=b.onSavedPaymentMethodUpdate,y=aw("mounts <".concat(c,">")),z="elements"in y?y.elements:null,A="checkoutState"in y?y.checkoutState:null,B=(null==A?void 0:A.type)==="success"||(null==A?void 0:A.type)==="loading"?A.sdk:null,C=ag(d.default.useState(null),2),D=C[0],E=C[1],F=d.default.useRef(null),G=d.default.useRef(null);ai(D,"blur",j),ai(D,"focus",k),ai(D,"escape",n),ai(D,"click",o),ai(D,"loaderror",p),ai(D,"loaderstart",q),ai(D,"networkschange",r),ai(D,"confirm",s),ai(D,"cancel",t),ai(D,"shippingaddresschange",u),ai(D,"shippingratechange",v),ai(D,"savedpaymentmethodremove",w),ai(D,"savedpaymentmethodupdate",x),ai(D,"change",m),l&&(e="expressCheckout"===a?l:function(){l(D)}),ai(D,"ready",e),d.default.useLayoutEffect(function(){if(null===F.current&&null!==G.current&&(z||B)){var b=null;if(B)switch(a){case"paymentForm":b=B.createPaymentFormElement();break;case"payment":b=B.createPaymentElement(i);break;case"address":if("mode"in i){var d=i.mode,e=function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c,d,e={},f=Object.keys(a);for(d=0;d<f.length;d++)c=f[d],b.indexOf(c)>=0||(e[c]=a[c]);return e}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],!(b.indexOf(c)>=0)&&Object.prototype.propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(i,ax);if("shipping"===d)b=B.createShippingAddressElement(e);else if("billing"===d)b=B.createBillingAddressElement(e);else throw Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":b=B.createExpressCheckoutElement(i);break;case"currencySelector":b=B.createCurrencySelectorElement();break;case"taxId":b=B.createTaxIdElement(i);break;default:throw Error("Invalid Element type ".concat(c,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else z&&(b=z.create(a,i));F.current=b,E(b),b&&b.mount(G.current)}},[z,B,i]);var H=aj(i);return d.default.useEffect(function(){if(F.current){var a=an(i,H,["paymentRequest"]);a&&"update"in F.current&&F.current.update(a)}},[i,H]),d.default.useLayoutEffect(function(){return function(){if(F.current&&"function"==typeof F.current.destroy)try{F.current.destroy(),F.current=null}catch(a){}}},[]),d.default.createElement("div",{id:f,className:g,ref:G})};return e.propTypes={id:ab.default.string,className:ab.default.string,onChange:ab.default.func,onBlur:ab.default.func,onFocus:ab.default.func,onReady:ab.default.func,onEscape:ab.default.func,onClick:ab.default.func,onLoadError:ab.default.func,onLoaderStart:ab.default.func,onNetworksChange:ab.default.func,onConfirm:ab.default.func,onCancel:ab.default.func,onShippingAddressChange:ab.default.func,onShippingRateChange:ab.default.func,onSavedPaymentMethodRemove:ab.default.func,onSavedPaymentMethodUpdate:ab.default.func,options:ab.default.object},e.displayName=c,e.__elementType=a,e},az=d.default.createContext(null);az.displayName="EmbeddedCheckoutProviderContext";ay("auBankAccount",!0),ay("card",!0),ay("cardNumber",!0),ay("cardExpiry",!0),ay("cardCvc",!0),ay("iban",!0);var aA=ay("payment",!0);ay("expressCheckout",!0),ay("paymentRequestButton",!0),ay("linkAuthentication",!0),ay("address",!0),ay("shippingAddress",!0),ay("paymentMethodMessaging",!0),ay("taxId",!0);var aB=a.i(46143),aC=a.i(265602);let aD=({className:a})=>(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:a,children:[(0,c.jsx)("rect",{width:"20",height:"14",x:"2",y:"5",rx:"2"}),(0,c.jsx)("line",{x1:"2",x2:"22",y1:"10",y2:"10"})]}),aE=({className:a})=>(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:a,children:[(0,c.jsx)("rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}),(0,c.jsx)("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),aF=({className:a})=>(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:a,children:(0,c.jsx)("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"})}),aG=({className:a})=>(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:a,children:[(0,c.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,c.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"12"}),(0,c.jsx)("line",{x1:"12",x2:"12.01",y1:"16",y2:"16"})]}),aH=({className:a})=>(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:a,children:(0,c.jsx)("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),aI=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];_=!0;var d=Date.now();return aa().then(function(a){return $(a,b,d)})}(process.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY);function aJ({onSuccess:a,onError:b}){var g;let i=aw("calls useStripe()").stripe,j=(g="calls useElements()",at(d.default.useContext(as),g)).elements,{hotel:k,totalPrice:l}=(0,e.useBooking)(),{t:m,locale:n,dir:o}=(0,f.useI18n)(),[p,q]=(0,d.useState)(!1),[r,s]=(0,d.useState)(!1),[t,u]=(0,d.useState)(null),v=.17*l,w=l+v,x=a=>new Intl.NumberFormat("he"===n?"he-IL":"en-US",{style:"currency",currency:k?.currency||"ILS",minimumFractionDigits:0}).format(a),y=async c=>{if(c.preventDefault(),!i||!j)return;if(!r)return void u(m("mustAgreeTerms"));q(!0),u(null);let{error:d,paymentIntent:e}=await i.confirmPayment({elements:j,confirmParams:{return_url:`${window.location.origin}/booking/confirmation`},redirect:"if_required"});d?(u(d.message||m("paymentError")),b(d.message||"Payment failed"),q(!1)):e&&"succeeded"===e.status&&a(e.id)};return(0,c.jsx)("form",{onSubmit:y,dir:o,children:(0,c.jsxs)(V.Card,{children:[(0,c.jsx)(V.CardHeader,{children:(0,c.jsxs)(V.CardTitle,{className:"flex items-center gap-2",children:[(0,c.jsx)(aD,{className:"h-5 w-5"}),m("securePayment")]})}),(0,c.jsxs)(V.CardContent,{className:"space-y-6",children:[(0,c.jsx)("div",{className:"p-4 border rounded-lg bg-background",children:(0,c.jsx)(aA,{options:{layout:"tabs",defaultValues:{billingDetails:{address:{country:"IL"}}}}})}),t&&(0,c.jsxs)(aC.Alert,{variant:"destructive",children:[(0,c.jsx)(aG,{className:"h-4 w-4"}),(0,c.jsx)(aC.AlertDescription,{children:t})]}),(0,c.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg",children:[(0,c.jsx)(aF,{className:"h-8 w-8 text-green-600 shrink-0"}),(0,c.jsxs)("div",{className:"text-sm",children:[(0,c.jsx)("p",{className:"font-medium",children:m("securePaymentStripe")}),(0,c.jsx)("p",{className:"text-muted-foreground",children:m("encryptedSecure")})]})]}),(0,c.jsxs)("div",{className:"flex items-center justify-center gap-3 py-2",children:[(0,c.jsx)("img",{src:"/visa-card-logo.png",alt:"Visa",className:"h-6"}),(0,c.jsx)("img",{src:"/mastercard-logo.png",alt:"Mastercard",className:"h-6"}),(0,c.jsx)("img",{src:"/generic-credit-card-logo.png",alt:"Amex",className:"h-6"}),(0,c.jsx)("img",{src:"/apple-pay-logo.png",alt:"Apple Pay",className:"h-6"})]}),(0,c.jsxs)("div",{className:"flex items-start gap-2",children:[(0,c.jsx)(aB.Checkbox,{id:"terms",checked:r,onCheckedChange:a=>{s(!0===a),t===m("mustAgreeTerms")&&u(null)}}),(0,c.jsx)("div",{className:"space-y-1",children:(0,c.jsxs)(S.Label,{htmlFor:"terms",className:"text-sm cursor-pointer",children:[m("termsAgree"),(0,c.jsx)("a",{href:"#",className:"text-primary hover:underline mx-1",children:m("bookingTerms")}),m("and"),(0,c.jsx)("a",{href:"#",className:`text-primary hover:underline ${"rtl"===o?"mr-1":"ml-1"}`,children:m("cancellationPolicy")})]})})]}),(0,c.jsxs)("div",{className:"border-t pt-4",children:[(0,c.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,c.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,c.jsx)("span",{children:m("subtotal")}),(0,c.jsx)("span",{children:x(l)})]}),(0,c.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,c.jsx)("span",{children:m("vat")}),(0,c.jsx)("span",{children:x(v)})]}),(0,c.jsxs)("div",{className:"flex justify-between items-center pt-2 border-t",children:[(0,c.jsx)("span",{className:"text-lg font-medium",children:m("totalToPay")}),(0,c.jsx)("span",{className:"text-2xl font-bold text-primary",children:x(w)})]})]}),(0,c.jsx)(h.Button,{type:"submit",className:"w-full",size:"lg",disabled:p||!i||!j,children:p?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(aH,{className:`h-4 w-4 animate-spin ${"rtl"===o?"ml-2":"mr-2"}`}),m("processingPayment")]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(aE,{className:`h-4 w-4 ${"rtl"===o?"ml-2":"mr-2"}`}),m("pay")," ",x(w)]})})]})]})]})})}function aK({onSuccess:a}){let{hotel:b,totalPrice:g,guestDetails:h,selectedRooms:i,search:j,nights:k}=(0,e.useBooking)(),{t:l,locale:m}=(0,f.useI18n)(),[n,o]=(0,d.useState)(null),[p,q]=(0,d.useState)(null),[r,s]=(0,d.useState)(!0),t=g+.17*g;return((0,d.useEffect)(()=>{let a=async()=>{try{let a=await fetch("/api/stripe/create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:t,currency:b?.currency||"ILS",customerEmail:h?.email,customerName:`${h?.firstName} ${h?.lastName}`,metadata:{hotel_id:b?.id,hotel_name:b?.name,check_in:j.checkIn?.toISOString(),check_out:j.checkOut?.toISOString(),nights:k,rooms:i.map(a=>a.room.name).join(", "),guest_email:h?.email,guest_phone:h?.phone}})}),c=await a.json();c.error?q(c.error):o(c.clientSecret)}catch(a){q(l("paymentFormError"))}finally{s(!1)}};t>0&&a()},[t,b,h,j,k,i,l]),r)?(0,c.jsx)(V.Card,{children:(0,c.jsx)(V.CardContent,{className:"py-12",children:(0,c.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4",children:[(0,c.jsx)(aH,{className:"h-8 w-8 animate-spin text-primary"}),(0,c.jsx)("p",{className:"text-muted-foreground",children:l("loadingPaymentForm")})]})})}):p?(0,c.jsx)(V.Card,{children:(0,c.jsx)(V.CardContent,{className:"py-12",children:(0,c.jsxs)(aC.Alert,{variant:"destructive",children:[(0,c.jsx)(aG,{className:"h-4 w-4"}),(0,c.jsx)(aC.AlertDescription,{children:p})]})})}):n?(0,c.jsx)(au,{stripe:aI,options:{clientSecret:n,appearance:{theme:"stripe",variables:{colorPrimary:"#0066cc",colorBackground:"#ffffff",colorText:"#1a1a1a",colorDanger:"#dc2626",fontFamily:"system-ui, sans-serif",borderRadius:"8px"},rules:{".Input":{border:"1px solid #e5e7eb",boxShadow:"none"},".Input:focus":{border:"1px solid #0066cc",boxShadow:"0 0 0 1px #0066cc"}}},locale:"he"===m?"he":"en"},children:(0,c.jsx)(aJ,{onSuccess:a,onError:q})}):null}var aL=a.i(307379);let aM=({className:a})=>(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:a,children:[(0,c.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,c.jsx)("path",{d:"m9 12 2 2 4-4"})]}),aN=({className:a})=>(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:a,children:[(0,c.jsx)("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),(0,c.jsx)("line",{x1:"16",x2:"16",y1:"2",y2:"6"}),(0,c.jsx)("line",{x1:"8",x2:"8",y1:"2",y2:"6"}),(0,c.jsx)("line",{x1:"3",x2:"21",y1:"10",y2:"10"})]}),aO=({className:a})=>(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:a,children:(0,c.jsx)("path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"})}),aP=({className:a})=>(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:a,children:[(0,c.jsx)("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),(0,c.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,c.jsx)("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),(0,c.jsx)("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),aQ=({className:a})=>(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:a,children:[(0,c.jsx)("path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"}),(0,c.jsx)("circle",{cx:"12",cy:"10",r:"3"})]}),aR=({className:a})=>(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:a,children:[(0,c.jsx)("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),(0,c.jsx)("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]}),aS=({className:a})=>(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:a,children:(0,c.jsx)("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),aT=({className:a})=>(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:a,children:[(0,c.jsx)("polyline",{points:"6 9 6 2 18 2 18 9"}),(0,c.jsx)("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),(0,c.jsx)("rect",{width:"12",height:"8",x:"6",y:"14"})]}),aU=({className:a})=>(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:a,children:[(0,c.jsx)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),(0,c.jsx)("polyline",{points:"7 10 12 15 17 10"}),(0,c.jsx)("line",{x1:"12",x2:"12",y1:"15",y2:"3"})]}),aV=({className:a})=>(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:a,children:[(0,c.jsx)("rect",{width:"20",height:"14",x:"2",y:"5",rx:"2"}),(0,c.jsx)("line",{x1:"2",x2:"22",y1:"10",y2:"10"})]});function aW({confirmationNumber:a,paymentIntentId:b}){let{hotel:d,search:i,selectedRooms:j,guestDetails:k,nights:l,totalPrice:m}=(0,e.useBooking)(),{t:n,locale:o,dir:p}=(0,f.useI18n)(),q=.17*m,r=n(1===l?"night":"nights"),s=a=>new Intl.NumberFormat("he"===o?"he-IL":"en-US",{style:"currency",currency:d?.currency||"ILS",minimumFractionDigits:0}).format(a),t=a=>a.toLocaleDateString("he"===o?"he-IL":"en-US",{weekday:"long"});return(0,c.jsxs)("div",{className:"max-w-2xl mx-auto",dir:p,children:[(0,c.jsxs)("div",{className:"text-center mb-8",children:[(0,c.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-green-100 mb-4",children:(0,c.jsx)(aM,{className:"h-10 w-10 text-green-600"})}),(0,c.jsx)("h1",{className:"text-2xl font-bold text-foreground mb-2",children:n("bookingConfirmed")}),(0,c.jsxs)("p",{className:"text-muted-foreground",children:[n("confirmationSent")," ",(0,c.jsx)("span",{className:"font-medium",children:k?.email})]}),(0,c.jsx)("div",{className:"flex items-center justify-center gap-2 mt-3",children:(0,c.jsxs)(x.Badge,{variant:"secondary",className:"gap-1",children:[(0,c.jsx)(aV,{className:"h-3 w-3"}),n("paidViaStripe")]})})]}),(0,c.jsx)(V.Card,{className:"mb-6 border-2 border-primary/20 bg-primary/5",children:(0,c.jsxs)(V.CardContent,{className:"p-6 text-center",children:[(0,c.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:n("confirmationNumber")}),(0,c.jsx)("p",{className:"text-3xl font-bold text-primary tracking-wider",children:a}),b&&(0,c.jsxs)("p",{className:"text-xs text-muted-foreground mt-2",children:[n("paymentId")," ",b.slice(0,20),"..."]})]})}),(0,c.jsx)(V.Card,{className:"mb-6",children:(0,c.jsxs)(V.CardContent,{className:"p-6",children:[(0,c.jsxs)("div",{className:"flex items-start gap-4 mb-6",children:[(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsx)("h2",{className:"text-xl font-bold text-foreground",children:d?.name}),(0,c.jsxs)("div",{className:"flex items-center gap-1 text-muted-foreground mt-1",children:[(0,c.jsx)(aQ,{className:"h-4 w-4"}),(0,c.jsxs)("span",{className:"text-sm",children:[d?.address,", ",d?.city]})]})]}),(0,c.jsx)("div",{className:"flex",children:Array.from({length:d?.stars||0}).map((a,b)=>(0,c.jsx)("span",{className:"text-yellow-400",children:"★"},b))})]}),(0,c.jsx)(aL.Separator,{className:"mb-6"}),(0,c.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground mb-1",children:[(0,c.jsx)(aN,{className:"h-4 w-4"}),(0,c.jsx)("span",{className:"text-sm",children:n("checkIn")})]}),(0,c.jsx)("p",{className:"font-semibold",children:t(i.checkIn)}),(0,c.jsx)("p",{className:"text-sm",children:(0,g.formatDate)(i.checkIn,o)}),(0,c.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[n("from"),d?.policies.checkIn]})]}),(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsxs)("div",{className:"flex items-center justify-center gap-2 text-muted-foreground mb-1",children:[(0,c.jsx)(aO,{className:"h-4 w-4"}),(0,c.jsx)("span",{className:"text-sm",children:n("stayDuration")})]}),(0,c.jsx)("p",{className:"text-2xl font-bold",children:l}),(0,c.jsx)("p",{className:"text-sm",children:r})]}),(0,c.jsxs)("div",{className:"rtl"===p?"text-left":"text-right",children:[(0,c.jsxs)("div",{className:`flex items-center gap-2 text-muted-foreground mb-1 ${"rtl"===p?"justify-start":"justify-end"}`,children:[(0,c.jsx)("span",{className:"text-sm",children:n("checkOut")}),(0,c.jsx)(aN,{className:"h-4 w-4"})]}),(0,c.jsx)("p",{className:`font-semibold ${"rtl"===p?"text-left":"text-right"}`,children:t(i.checkOut)}),(0,c.jsx)("p",{className:`text-sm ${"rtl"===p?"text-left":"text-right"}`,children:(0,g.formatDate)(i.checkOut,o)}),(0,c.jsxs)("p",{className:`text-xs text-muted-foreground mt-1 ${"rtl"===p?"text-left":"text-right"}`,children:[n("until")," ",d?.policies.checkOut]})]})]}),(0,c.jsx)(aL.Separator,{className:"mb-6"}),(0,c.jsxs)("div",{className:"mb-6",children:[(0,c.jsxs)("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[(0,c.jsx)(aP,{className:"h-4 w-4"}),n("bookedRooms")]}),(0,c.jsx)("div",{className:"space-y-3",children:j.map(a=>(0,c.jsxs)("div",{className:"flex justify-between items-start bg-muted/30 p-3 rounded-lg",children:[(0,c.jsxs)("div",{children:[(0,c.jsxs)("p",{className:"font-medium",children:[a.quantity,"x ",a.room.name]}),(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:a.ratePlan.name})]}),(0,c.jsx)("p",{className:"font-medium",children:s(a.ratePlan.price*a.quantity*l)})]},`${a.room.id}-${a.ratePlan.id}`))})]}),(0,c.jsx)(aL.Separator,{className:"mb-6"}),(0,c.jsxs)("div",{className:"mb-6",children:[(0,c.jsx)("h3",{className:"font-semibold mb-3",children:n("guestDetails")}),(0,c.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"text-muted-foreground",children:n("guestName")}),(0,c.jsxs)("p",{className:"font-medium",children:[k?.firstName," ",k?.lastName]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"text-muted-foreground",children:n("email")}),(0,c.jsxs)("p",{className:"font-medium flex items-center gap-1",children:[(0,c.jsx)(aR,{className:"h-3 w-3"}),k?.email]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"text-muted-foreground",children:n("phone")}),(0,c.jsxs)("p",{className:"font-medium flex items-center gap-1",children:[(0,c.jsx)(aS,{className:"h-3 w-3"}),k?.phone]})]}),k?.arrivalTime&&(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"text-muted-foreground",children:n("estimatedArrival")}),(0,c.jsx)("p",{className:"font-medium",children:k.arrivalTime})]})]}),k?.specialRequests&&(0,c.jsxs)("div",{className:"mt-3",children:[(0,c.jsx)("p",{className:"text-muted-foreground text-sm",children:n("specialRequests")}),(0,c.jsx)("p",{className:"text-sm bg-muted/30 p-2 rounded mt-1",children:k.specialRequests})]})]}),(0,c.jsx)(aL.Separator,{className:"mb-6"}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,c.jsx)("span",{className:"text-muted-foreground",children:n("totalRooms")}),(0,c.jsx)("span",{children:s(m)})]}),(0,c.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,c.jsx)("span",{className:"text-muted-foreground",children:n("vat")}),(0,c.jsx)("span",{children:s(q)})]}),(0,c.jsx)(aL.Separator,{}),(0,c.jsxs)("div",{className:"flex justify-between text-lg font-bold",children:[(0,c.jsx)("span",{children:n("totalPaid")}),(0,c.jsx)("span",{className:"text-primary",children:s(m+q)})]})]})]})}),(0,c.jsxs)("div",{className:"flex gap-4",children:[(0,c.jsxs)(h.Button,{variant:"outline",className:"flex-1 bg-transparent",onClick:()=>window.print(),children:[(0,c.jsx)(aT,{className:`h-4 w-4 ${"rtl"===p?"ml-2":"mr-2"}`}),n("printConfirmation")]}),(0,c.jsxs)(h.Button,{variant:"outline",className:"flex-1 bg-transparent",children:[(0,c.jsx)(aU,{className:`h-4 w-4 ${"rtl"===p?"ml-2":"mr-2"}`}),n("downloadPdf")]})]}),(0,c.jsxs)("p",{className:"text-center text-sm text-muted-foreground mt-6",children:[n("contactHelp")," ",(0,c.jsx)("a",{href:"tel:+97235555555",className:"text-primary hover:underline",children:"03-555-5555"})]})]})}let aX=({className:a})=>(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:a,children:(0,c.jsx)("polyline",{points:"20 6 9 17 4 12"})});function aY({currentStep:a}){let{locale:b,dir:d}=(0,f.useI18n)(),e=a<=2||3===a?1:4===a?2:3;return(0,c.jsx)("nav",{"aria-label":"Progress",className:"mb-8",dir:d,children:(0,c.jsx)("ol",{className:"flex items-center justify-center gap-0",children:("he"===b?[{id:1,name:"פרטים אישיים"},{id:2,name:"פרטי אשראי"},{id:3,name:"חופשה נעימה"}]:[{id:1,name:"Personal Details"},{id:2,name:"Payment"},{id:3,name:"Confirmation"}]).map((a,b)=>(0,c.jsxs)("li",{className:"relative flex flex-col items-center",children:[b>0&&(0,c.jsx)("div",{className:(0,l.cn)("absolute top-5 h-0.5 w-16 sm:w-24 md:w-32","rtl"===d?"right-1/2 translate-x-1/2 mr-8":"left-1/2 -translate-x-full -ml-8",a.id<=e?"bg-blue-600":"bg-gray-300")}),(0,c.jsx)("div",{className:"relative z-10",children:a.id<e?(0,c.jsx)("span",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-blue-600 text-white font-bold",children:(0,c.jsx)(aX,{className:"h-5 w-5"})}):a.id===e?(0,c.jsx)("span",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-blue-900 text-white font-bold text-lg",children:a.id}):(0,c.jsx)("span",{className:"flex h-10 w-10 items-center justify-center rounded-full border-2 border-gray-300 bg-white text-gray-400 font-bold text-lg",children:a.id})}),(0,c.jsx)("span",{className:(0,l.cn)("mt-2 text-sm font-medium text-center whitespace-nowrap",a.id===e?"text-blue-900":a.id<e?"text-blue-600":"text-gray-400"),children:a.name})]},a.id))})})}var aZ=a.i(744034);let a$={1:"Room Only",2:"Bed & Breakfast",3:"Half Board",4:"Full Board",5:"All Inclusive"},a_={1:"Standard",2:"Superior",3:"Deluxe",4:"Suite",5:"Executive"},a0=({className:a})=>(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:a,children:[(0,c.jsx)("path",{d:"M2 4v16"}),(0,c.jsx)("path",{d:"M2 8h18a2 2 0 0 1 2 2v10"}),(0,c.jsx)("path",{d:"M2 17h20"}),(0,c.jsx)("path",{d:"M6 8v9"})]}),a1=({className:a})=>(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:a,children:[(0,c.jsx)("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),(0,c.jsx)("circle",{cx:"12",cy:"12",r:"3"})]}),a2=({className:a})=>(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:a,children:(0,c.jsx)("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"})}),a3=({className:a})=>(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:a,children:[(0,c.jsx)("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),(0,c.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,c.jsx)("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),(0,c.jsx)("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),a4=({className:a})=>(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:a,children:(0,c.jsx)("path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"})}),a5=({className:a})=>(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:a,children:(0,c.jsx)("path",{d:"m15 18-6-6 6-6"})}),a6=({className:a})=>(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:a,children:(0,c.jsx)("path",{d:"m9 18 6-6-6-6"})}),a7=({className:a})=>(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:a,children:[(0,c.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,c.jsx)("path",{d:"M12 16v-4"}),(0,c.jsx)("path",{d:"M12 8h.01"})]});function a8({images:a,roomName:b,optionNumber:e}){let[f,g]=(0,d.useState)(0),h=a.length>0?a:["/luxury-hotel-room.png"];return(0,c.jsxs)("div",{className:"relative w-full h-full group",children:[(0,c.jsx)(v.default,{src:h[f]||"/placeholder.svg",alt:`${b} - ${f+1}`,fill:!0,className:"object-cover"}),(0,c.jsxs)("div",{className:"absolute top-3 left-3 bg-blue-900/90 text-white px-3 py-1 rounded text-sm font-medium z-10",children:["אפשרות ",e]}),(0,c.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4 z-10",children:(0,c.jsx)("h3",{className:"text-xl font-bold text-white",children:b})}),h.length>1&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{onClick:a=>{a.stopPropagation(),g(a=>(a-1+h.length)%h.length)},className:"absolute left-3 top-1/2 -translate-y-1/2 w-10 h-10 rounded-full bg-white/90 hover:bg-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity z-20 shadow-lg",children:(0,c.jsx)(a5,{className:"h-5 w-5 text-gray-800"})}),(0,c.jsx)("button",{onClick:a=>{a.stopPropagation(),g(a=>(a+1)%h.length)},className:"absolute right-3 top-1/2 -translate-y-1/2 w-10 h-10 rounded-full bg-white/90 hover:bg-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity z-20 shadow-lg",children:(0,c.jsx)(a6,{className:"h-5 w-5 text-gray-800"})})]})]})}function a9({room:a,hotel:b,optionNumber:e,onSelect:f,isSelecting:g,isPreBooking:i,locale:j,dir:k,nights:l,formatPrice:m,getBoardName:n,getCategoryName:o}){var p;let q,r,s,[t,u]=(0,d.useState)("bb"),v=a.roomName||o(a.categoryId);n(a.boardId);let w=a.buyPrice>0?a.buyPrice:(p=a,q=b.stars||3,r=(p.roomCategory||"standard").toLowerCase(),s=150+50*q,r.includes("suite")?s*=1.8:r.includes("deluxe")?s*=1.5:r.includes("superior")?s*=1.25:r.includes("family")&&(s*=1.4),Math.round(s)),z=Math.round(1.15*w),A=Math.round(.95*w),B=Math.round(.9*z),C="bb"===t?w:z,D="bb"===t?A:B,E={bbText:"he"===j?"לינה וא. בוקר":"Bed & Breakfast",hbText:"he"===j?"חצי פנסיון":"Half Board",sitePrice:"he"===j?"מחיר באתר":"Site Price",clubPrice:"he"===j?"מחיר מועדון":"Club Price",clubDiscount:"he"===j?"5% הנחת אתר":"5% Site Discount",options:"he"===j?"אפשרויות":"Options",board:"he"===j?"בסיס אירוח":"Board",bookNow:"he"===j?"הזמינו עכשיו":"Book Now",booking:"he"===j?"מזמין...":"Booking...",priceAfterDiscount:"he"===j?"המחירים לאחר חישוב ההנחות":"Prices after discounts",moreInfo:"he"===j?"למידע נוסף":"More info",moreAboutRoom:"he"===j?"עוד על החדר":"More about room",sqm:"he"===j?'מ"ר':"sqm",seaView:"he"===j?"צופה לים":"Sea View",upTo:"he"===j?"עד":"up to",guests:"he"===j?"אורחים":"guests",freeCancellation:"he"===j?"ביטול חינם":"Free Cancellation",reserveDiscount:"he"===j?"20% הנחה למשרתי מילואים":"20% Reserve Discount",payWithVoucher:"he"===j?"ניתן לשלם בשובר נופש מילואים של כאל":"Pay with vacation voucher"};return(0,c.jsx)(V.Card,{className:"overflow-hidden border-2 border-blue-100 shadow-lg hover:shadow-xl transition-shadow",children:(0,c.jsxs)("div",{className:"flex flex-col lg:flex-row",children:[(0,c.jsx)("div",{className:"relative w-full lg:w-[380px] h-[280px] flex-shrink-0",children:(0,c.jsx)(a8,{images:b.images,roomName:v,optionNumber:e})}),(0,c.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-100 bg-gray-50/50",children:[(0,c.jsxs)("div",{className:"flex items-center gap-6 text-sm text-gray-600",children:[(0,c.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,c.jsx)(a2,{className:"h-4 w-4"}),(0,c.jsxs)("span",{children:["39 ",E.sqm]})]}),(0,c.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,c.jsx)(a0,{className:"h-4 w-4"}),(0,c.jsx)("span",{children:v})]}),(0,c.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,c.jsx)(a1,{className:"h-4 w-4"}),(0,c.jsx)("span",{children:E.seaView})]}),(0,c.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,c.jsx)(a3,{className:"h-4 w-4"}),(0,c.jsxs)("span",{children:[E.upTo," ",a.maxOccupancy||2," ",E.guests]})]})]}),(0,c.jsxs)("button",{className:"text-blue-600 hover:text-blue-800 text-sm flex items-center gap-1",children:[E.moreAboutRoom,(0,c.jsx)(a5,{className:"h-4 w-4"})]})]}),(0,c.jsxs)("div",{className:"grid grid-cols-4 text-center text-sm font-medium bg-blue-900 text-white",children:[(0,c.jsx)("div",{className:"py-2.5 border-l border-blue-800",children:E.options}),(0,c.jsx)("div",{className:"py-2.5 border-l border-blue-800",children:E.board}),(0,c.jsx)("div",{className:"py-2.5 border-l border-blue-800",children:E.sitePrice}),(0,c.jsx)("div",{className:"py-2.5",children:E.clubPrice})]}),(0,c.jsxs)("div",{className:"grid grid-cols-4 items-center border-b border-gray-200",children:[(0,c.jsxs)("div",{className:"p-4 border-l border-gray-200",children:[(0,c.jsx)("div",{className:"font-medium text-gray-800 mb-1",children:"he"===j?"הזמנה באתר":"Site Booking"}),(0,c.jsx)(x.Badge,{variant:"outline",className:"text-green-600 border-green-300 text-xs",children:E.freeCancellation})]}),(0,c.jsxs)("div",{className:"p-4 border-l border-gray-200 space-y-2",children:[(0,c.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,c.jsx)("input",{type:"radio",name:`board-${a.roomId}-standard`,checked:"bb"===t,onChange:()=>u("bb"),className:"w-4 h-4 text-blue-600"}),(0,c.jsx)("span",{className:"text-sm",children:E.bbText})]}),(0,c.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,c.jsx)("input",{type:"radio",name:`board-${a.roomId}-standard`,checked:"hb"===t,onChange:()=>u("hb"),className:"w-4 h-4 text-blue-600"}),(0,c.jsx)("span",{className:"text-sm",children:E.hbText})]})]}),(0,c.jsx)("div",{className:"p-4 border-l border-gray-200 text-center",children:(0,c.jsxs)("div",{className:"text-lg font-bold text-gray-400 line-through",children:[m(C,a.currency)," ₪"]})}),(0,c.jsxs)("div",{className:"p-4 text-center",children:[(0,c.jsxs)("div",{className:"flex items-center justify-center gap-1 text-sm text-gray-500 mb-1",children:[(0,c.jsx)(a7,{className:"h-3 w-3"}),(0,c.jsx)("span",{children:E.clubDiscount})]}),(0,c.jsxs)("div",{className:"text-xl font-bold text-blue-900",children:[m(D,a.currency)," ₪"]})]})]}),(0,c.jsxs)("div",{className:"grid grid-cols-4 items-center bg-blue-50/50 border-b border-gray-200",children:[(0,c.jsxs)("div",{className:"p-4 border-l border-gray-200",children:[(0,c.jsx)("div",{className:"flex items-center gap-2 mb-1",children:(0,c.jsx)(x.Badge,{className:"bg-amber-500 text-white text-xs",children:E.reserveDiscount})}),(0,c.jsxs)("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[(0,c.jsx)(a7,{className:"h-3 w-3"}),(0,c.jsx)("span",{children:E.payWithVoucher})]})]}),(0,c.jsxs)("div",{className:"p-4 border-l border-gray-200 space-y-2",children:[(0,c.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,c.jsx)("input",{type:"radio",name:`board-${a.roomId}-reserve`,className:"w-4 h-4 text-blue-600",defaultChecked:!0}),(0,c.jsx)("span",{className:"text-sm",children:E.bbText})]}),(0,c.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,c.jsx)("input",{type:"radio",name:`board-${a.roomId}-reserve`,className:"w-4 h-4 text-blue-600"}),(0,c.jsx)("span",{className:"text-sm",children:E.hbText})]})]}),(0,c.jsxs)("div",{className:"p-4 border-l border-gray-200 text-center",children:[(0,c.jsx)("div",{className:"flex items-center justify-center gap-1 text-sm text-gray-500 mb-1",children:(0,c.jsx)("span",{children:"he"===j?"מחיר אתר כולל חברי מועדון":"Site price incl. club"})}),(0,c.jsxs)("div",{className:"text-lg font-bold text-gray-800",children:[m(Math.round(.8*C),a.currency)," ₪"]})]}),(0,c.jsx)("div",{className:"p-4 text-center",children:(0,c.jsxs)("div",{className:"text-xl font-bold text-green-600",children:[m(Math.round(.8*D),a.currency)," ₪"]})})]}),(0,c.jsxs)("div",{className:"p-4 flex items-center justify-between bg-white",children:[(0,c.jsx)("div",{className:"text-xs text-gray-500",children:E.priceAfterDiscount}),(0,c.jsx)(h.Button,{onClick:f,disabled:g||i,className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-6 text-lg font-bold rounded-lg shadow-md",children:g?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(y,{className:"h-5 w-5 mr-2 animate-spin"}),E.booking]}):E.bookNow})]}),(0,c.jsx)("div",{className:"px-4 pb-4",children:(0,c.jsxs)("button",{className:"text-blue-600 hover:text-blue-800 text-sm flex items-center gap-1",children:[E.moreInfo,(0,c.jsx)(a5,{className:"h-4 w-4"})]})})]})]})})}function ba({hotel:a,locale:b}){let[e,f]=(0,d.useState)(!1);return(0,c.jsxs)("div",{className:"flex items-start justify-between p-4 bg-white border-b",children:[(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,c.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:a.hotelName}),(0,c.jsx)("div",{className:"flex",children:Array.from({length:a.stars||0}).map((a,b)=>(0,c.jsx)(F,{className:"h-5 w-5 text-yellow-400 fill-yellow-400"},b))})]}),(0,c.jsxs)("div",{className:"flex items-center gap-1 text-gray-600",children:[(0,c.jsx)(E,{className:"h-4 w-4"}),(0,c.jsxs)("span",{children:[a.city,a.address&&` • ${a.address}`]})]})]}),(0,c.jsx)("button",{onClick:()=>f(!e),className:"p-2 rounded-full hover:bg-gray-100",children:(0,c.jsx)(a4,{className:(0,l.cn)("h-6 w-6",e?"fill-red-500 text-red-500":"text-gray-400")})})]})}function bb(){let{searchResults:a,search:b,addRoom:h,nights:i,setCurrentStep:j,setApiBookingData:k,isPreBooking:l,setIsPreBooking:m,setPreBookError:n,isRtl:o,language:p}=(0,e.useBooking)(),{t:q}=(0,f.useI18n)(),[r,s]=(0,d.useState)({}),[t,u]=(0,d.useState)({}),[v,w]=(0,d.useState)({}),[x,y]=(0,d.useState)(null);console.log("[v0] HotelSearchResults - searchResults:",a),a.length>0&&console.log("[v0] First hotel:",{hotelId:a[0].hotelId,hotelName:a[0].hotelName,rooms:a[0].rooms?.map(a=>({code:a.code,roomName:a.roomName,buyPrice:a.buyPrice}))});let z=(a,b="USD")=>new Intl.NumberFormat("he"===p?"he-IL":"en-US",{style:"decimal",minimumFractionDigits:0}).format(a),A=a=>{let b=a$[a];return b?"he"===p?b.nameHe:b.name:""},B=a=>{let b=a_[a];return b?"he"===p?b.nameHe:b.name:""},C=async(a,c)=>{let d=a.hotelId;if(!c.code){let a=o?"קוד חדר חסר - נא לנסות שוב או לבחור חדר אחר":"Room code is missing - please try again or select another room";n(a),alert(a);return}let e=c.code;if(!d||0===d){let a=o?"מזהה מלון לא תקין - נא לנסות שוב":"Invalid hotel ID - please try again";n(a),alert(a);return}y(`${c.roomId}-${c.boardId}`),m(!0),n(null);try{let f=(0,g.formatDateForApi)(b.checkIn),i=(0,g.formatDateForApi)(b.checkOut),l={code:e,dateFrom:f,dateTo:i,hotelId:d,adults:b.adults,children:b.childrenAges||[]},m=await fetch("/api/booking/prebook",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}),n=await m.json();if(!m.ok)throw Error(n.error||"PreBook failed");k({code:e,hotelId:d,hotelName:a.hotelName,roomName:c.roomName||B(c.categoryId),roomId:c.roomId,boardId:c.boardId,price:c.buyPrice,currency:c.currency||"USD",dateFrom:f,dateTo:i,adults:b.adults,children:b.childrenAges||[],prebookToken:n.token,priceConfirmed:n.priceConfirmed});let o={id:c.roomId,hotelId:String(d),name:c.roomName||B(c.categoryId),description:`${B(c.categoryId)} - ${A(c.boardId)}`,images:a.images.length>0?a.images:["/comfortable-hotel-room.png"],maxGuests:c.maxOccupancy,maxAdults:c.maxOccupancy,maxChildren:0,bedType:B(c.categoryId),size:30,amenities:[],basePrice:n.priceConfirmed||c.buyPrice,available:5},p={id:`${c.roomId}-${c.boardId}`,roomId:c.roomId,name:A(c.boardId),description:c.roomCategory||"",price:n.priceConfirmed||c.buyPrice,includes:[A(c.boardId)],cancellationPolicy:"free",prepayment:"none",mealPlan:(a=>{switch(a){case 1:default:return"room-only";case 2:case 6:return"breakfast";case 3:case 7:return"half-board";case 4:return"full-board";case 5:return"all-inclusive"}})(c.boardId)};h({room:o,ratePlan:p,quantity:1}),j(3)}catch(b){console.error("[v0] PreBook error:",b);let a=b.message||(o?"שגיאה בהזמנת החדר":"Failed to reserve room");n(a),alert(a)}finally{y(null),m(!1)}};return a.length?(0,c.jsxs)("div",{className:"space-y-8",dir:o?"rtl":"ltr",children:[(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:q("foundHotelsText",{count:a.length})}),a.map(a=>(0,c.jsxs)("div",{className:"bg-gray-50 rounded-xl overflow-hidden shadow-sm",children:[(0,c.jsx)(ba,{hotel:a,locale:p}),(0,c.jsx)("div",{className:"p-4 space-y-4",children:(a.rooms||[]).map((b,d)=>{let e=`${a.hotelId}-${b.roomId}-${b.boardId}`;return(0,c.jsx)(a9,{room:b,hotel:a,optionNumber:d+1,onSelect:()=>C(a,b),isSelecting:x===e,isPreBooking:l,locale:p,dir:o?"rtl":"ltr",nights:i,formatPrice:z,getBoardName:A,getCategoryName:B},e)})})]},a.hotelId))]}):(0,c.jsxs)("div",{className:"text-center py-12",dir:o?"rtl":"ltr",children:[(0,c.jsx)("div",{className:"text-6xl mb-4",children:"🏨"}),(0,c.jsx)("h3",{className:"text-xl font-semibold text-foreground mb-2",children:q("noResultsText")}),(0,c.jsx)("p",{className:"text-muted-foreground",children:q("tryAgainText")})]})}var bc=a.i(228705);let bd=({className:a})=>(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:a,children:[(0,c.jsx)("path",{d:"M5 12h14"}),(0,c.jsx)("path",{d:"m12 5 7 7-7 7"})]}),be=({className:a})=>(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:a,children:[(0,c.jsx)("path",{d:"m12 19-7-7 7-7"}),(0,c.jsx)("path",{d:"M19 12H5"})]}),bf=({className:a})=>(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:a,children:[(0,c.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,c.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"12"}),(0,c.jsx)("line",{x1:"12",x2:"12.01",y1:"16",y2:"16"})]}),bg=({className:a})=>(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:a,children:(0,c.jsx)("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})});function bh(){let{hotel:a,currentStep:b,setCurrentStep:g,guestDetails:i,setGuestDetails:j,selectedRooms:k,searchResults:l,isSearching:m,searchError:n,preBookError:o,apiBookingData:p,bookingConfirmation:q,setBookingConfirmation:r}=(0,e.useBooking)(),{t:s,locale:t,dir:v}=(0,f.useI18n)(),[x,y]=(0,d.useState)(""),[z,A]=(0,d.useState)(""),[B,C]=(0,d.useState)(!1),[D,E]=(0,d.useState)(null),F=async a=>{j(a),g(4)},G=async a=>{A(a),C(!0),E(null);try{if(p?.prebookToken){let b=await fetch("/api/booking/book",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:p.code,token:p.prebookToken,preBookId:p.preBookId,dateFrom:p.dateFrom,dateTo:p.dateTo,hotelId:p.hotelId,adults:p.adults||2,children:p.children||[],customer:{title:i?.title||"MR",firstName:i?.firstName||"Guest",lastName:i?.lastName||"User",email:i?.email||"guest@example.com",phone:i?.phone||"",country:"IL",city:"",address:"",zip:""},voucherEmail:i?.email||"guest@example.com",agencyReference:a})}),c=await b.json();if(!b.ok)throw Error(c.error||"Booking failed");r({confirmationCode:c.bookingId||`BK${Date.now().toString(36).toUpperCase()}`,bookingId:c.bookingId||a}),y(c.bookingId||`BK${Date.now().toString(36).toUpperCase()}`)}else y(`BK${Date.now().toString(36).toUpperCase()}`);g(5)}catch(a){console.error("Booking error:",a),E(a.message||"Failed to complete booking"),alert(a.message||"Failed to complete booking")}finally{C(!1)}};return(0,c.jsxs)("div",{className:"min-h-screen bg-background",dir:v,children:[(0,c.jsx)("header",{className:"bg-card border-b border-border sticky top-0 z-50 shadow-sm",children:(0,c.jsx)("div",{className:"w-full px-6 lg:px-12 py-4",children:(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsx)("div",{className:"w-12 h-12 rounded-xl bg-primary flex items-center justify-center shadow-lg",children:(0,c.jsx)("span",{className:"text-primary-foreground font-bold text-xl",children:"B"})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h1",{className:"font-bold text-xl text-foreground",children:"he"===t?"מנוע הזמנות":"Booking Engine"}),(0,c.jsxs)("span",{className:"text-sm text-muted-foreground",children:["he"===t?"מופעל על ידי":"Powered by"," BookingEngine"]})]})]}),(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsx)(aZ.LanguageSwitcher,{}),b>1&&b<5&&(0,c.jsxs)(h.Button,{variant:"outline",size:"default",onClick:()=>g(b-1),children:[(0,c.jsx)("rtl"===v?bd:be,{className:`h-4 w-4 ${"rtl"===v?"ml-2":"mr-2"}`}),"he"===t?"חזרה":"Back"]})]})]})})}),(0,c.jsxs)("main",{className:"w-full px-6 lg:px-12 py-8",children:[b<5&&(0,c.jsx)("div",{className:"mb-8",children:(0,c.jsx)(aY,{currentStep:b})}),(n||o||D)&&(0,c.jsxs)(aC.Alert,{variant:"destructive",className:"mb-6 max-w-4xl mx-auto",children:[(0,c.jsx)(bf,{className:"h-4 w-4"}),(0,c.jsx)(aC.AlertDescription,{children:n||o||D})]}),1===b&&(0,c.jsxs)("div",{className:"space-y-8",children:[(0,c.jsx)("div",{className:"bg-card rounded-2xl shadow-lg border border-border p-6 lg:p-8",children:(0,c.jsx)(u,{})}),m?(0,c.jsxs)("div",{className:"text-center py-16 bg-card rounded-2xl shadow-lg border border-border",children:[(0,c.jsx)(bg,{className:"h-12 w-12 animate-spin mx-auto text-primary mb-6"}),(0,c.jsx)("p",{className:"text-lg text-muted-foreground",children:"he"===t?"מחפש מלונות זמינים...":"Searching available hotels..."})]}):(0,c.jsx)("div",{className:"text-center py-16 text-muted-foreground",children:(0,c.jsx)("p",{className:"text-lg",children:"he"===t?"הזינו יעד, תאריכים ומספר אורחים לחיפוש זמינות":"Enter destination, dates and number of guests to search availability"})})]}),2===b&&(0,c.jsxs)("div",{className:"flex flex-col xl:flex-row gap-8",children:[(0,c.jsxs)("div",{className:"flex-1 min-w-0 space-y-6",children:[(0,c.jsx)("div",{className:"bg-card rounded-2xl shadow-lg border border-border p-6 lg:p-8",children:(0,c.jsx)(u,{})}),(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsx)("h2",{className:"text-2xl font-bold text-foreground",children:"he"===t?"תוצאות חיפוש":"Search Results"}),l.length>0&&(0,c.jsx)("span",{className:"text-muted-foreground",children:"he"===t?`נמצאו ${l.length} מלונות`:`Found ${l.length} hotels`})]}),m?(0,c.jsxs)("div",{className:"text-center py-16 bg-card rounded-2xl shadow-lg border border-border",children:[(0,c.jsx)(bg,{className:"h-12 w-12 animate-spin mx-auto text-primary mb-6"}),(0,c.jsx)("p",{className:"text-lg text-muted-foreground",children:"he"===t?"מחפש...":"Searching..."})]}):l.length>0?(0,c.jsx)(bb,{results:l}):(0,c.jsx)("div",{className:"space-y-6",children:w.mockRooms.map(a=>(0,c.jsx)(Q,{room:a},a.id))})]}),(0,c.jsx)("div",{className:"xl:w-96 xl:flex-shrink-0",children:(0,c.jsx)("div",{className:"xl:sticky xl:top-28",children:(0,c.jsx)(R,{})})})]}),3===b&&(0,c.jsxs)("div",{className:"flex flex-col xl:flex-row gap-8",children:[(0,c.jsx)("div",{className:"flex-1 min-w-0",children:(0,c.jsx)("div",{className:"bg-card rounded-2xl shadow-lg border border-border p-6 lg:p-8",children:(0,c.jsx)(W,{onSubmit:F})})}),(0,c.jsx)("div",{className:"xl:w-96 xl:flex-shrink-0",children:(0,c.jsxs)("div",{className:"xl:sticky xl:top-28",children:[(0,c.jsx)("div",{className:"mb-6 text-center",children:(0,c.jsx)(bc.LoginButton,{})}),(0,c.jsx)(R,{showContinue:!1})]})})]}),4===b&&(0,c.jsxs)("div",{className:"flex flex-col xl:flex-row gap-8",children:[(0,c.jsx)("div",{className:"flex-1 min-w-0",children:(0,c.jsxs)("div",{className:"bg-card rounded-2xl shadow-lg border border-border p-6 lg:p-8",children:[(0,c.jsx)(aK,{onSuccess:G}),B&&(0,c.jsxs)("div",{className:"mt-6 text-center",children:[(0,c.jsx)(bg,{className:"h-8 w-8 animate-spin mx-auto text-primary mb-3"}),(0,c.jsx)("p",{className:"text-muted-foreground",children:"he"===t?"משלים את ההזמנה...":"Completing your booking..."})]})]})}),(0,c.jsx)("div",{className:"xl:w-96 xl:flex-shrink-0",children:(0,c.jsx)("div",{className:"xl:sticky xl:top-28",children:(0,c.jsx)(R,{showContinue:!1})})})]}),5===b&&(0,c.jsx)("div",{className:"max-w-3xl mx-auto",children:(0,c.jsx)(aW,{confirmationNumber:x,paymentIntentId:z})})]}),(0,c.jsx)("footer",{className:"bg-card border-t border-border mt-16",children:(0,c.jsx)("div",{className:"w-full px-6 lg:px-12 py-8",children:(0,c.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 text-sm text-muted-foreground",children:[(0,c.jsxs)("p",{children:["© 2025 Booking Engine. ","he"===t?"כל הזכויות שמורות":"All rights reserved","."]}),(0,c.jsxs)("div",{className:"flex gap-8",children:[(0,c.jsx)("a",{href:"#",className:"hover:text-foreground transition-colors",children:"he"===t?"תנאי שימוש":"Terms of Use"}),(0,c.jsx)("a",{href:"#",className:"hover:text-foreground transition-colors",children:"he"===t?"מדיניות פרטיות":"Privacy Policy"}),(0,c.jsx)("a",{href:"#",className:"hover:text-foreground transition-colors",children:"he"===t?"צור קשר":"Contact Us"})]})]})})})]})}function bi({hotel:a,defaultLocale:b="he"}){return(0,c.jsx)(f.I18nProvider,{defaultLocale:b,children:(0,c.jsx)(e.BookingProvider,{initialHotel:a||w.mockHotel,children:(0,c.jsx)(bh,{})})})}a.s(["BookingWidget",()=>bi],631898)}];

//# sourceMappingURL=_c1f36c06._.js.map