(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,503116,e=>{"use strict";let t=(0,e.i(475254).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],503116)},107233,e=>{"use strict";let t=(0,e.i(475254).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],107233)},727612,e=>{"use strict";let t=(0,e.i(475254).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],727612)},284614,e=>{"use strict";let t=(0,e.i(475254).default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>t],284614)},283086,e=>{"use strict";let t=(0,e.i(475254).default)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);e.s(["Sparkles",()=>t],283086)},16715,e=>{"use strict";let t=(0,e.i(475254).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>t],16715)},63209,e=>{"use strict";let t=(0,e.i(475254).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},343432,e=>{"use strict";let t=(0,e.i(475254).default)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);e.s(["Phone",()=>t],343432)},475254,e=>{"use strict";var t=e.i(271645);let a=(...e)=>e.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim();var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,t.forwardRef)(({color:e="currentColor",size:l=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:n="",children:o,iconNode:c,...d},h)=>(0,t.createElement)("svg",{ref:h,...s,width:l,height:l,stroke:e,strokeWidth:i?24*Number(r)/Number(l):r,className:a("lucide",n),...d},[...c.map(([e,a])=>(0,t.createElement)(e,a)),...Array.isArray(o)?o:[o]])),r=(e,s)=>{let r=(0,t.forwardRef)(({className:r,...i},n)=>(0,t.createElement)(l,{ref:n,iconNode:s,className:a(`lucide-${e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,r),...i}));return r.displayName=`${e}`,r};e.s(["default",()=>r],475254)},678745,e=>{"use strict";let t=(0,e.i(475254).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["default",()=>t])},761911,e=>{"use strict";let t=(0,e.i(475254).default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);e.s(["Users",()=>t],761911)},870273,e=>{"use strict";let t=(0,e.i(475254).default)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);e.s(["Star",()=>t],870273)},373375,e=>{"use strict";let t=(0,e.i(475254).default)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronLeft",()=>t],373375)},643531,e=>{"use strict";var t=e.i(678745);e.s(["Check",()=>t.default])},174886,e=>{"use strict";let t=(0,e.i(475254).default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);e.s(["Copy",()=>t],174886)},217923,e=>{"use strict";let t=(0,e.i(475254).default)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);e.s(["BarChart3",()=>t],217923)},607486,e=>{"use strict";let t=(0,e.i(475254).default)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);e.s(["Building2",()=>t],607486)},239616,e=>{"use strict";let t=(0,e.i(475254).default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Settings",()=>t],239616)},686311,e=>{"use strict";let t=(0,e.i(475254).default)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);e.s(["MessageSquare",()=>t],686311)},39312,e=>{"use strict";let t=(0,e.i(475254).default)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);e.s(["Zap",()=>t],39312)},514764,e=>{"use strict";let t=(0,e.i(475254).default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>t],514764)},531245,e=>{"use strict";let t=(0,e.i(475254).default)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);e.s(["Bot",()=>t],531245)},905257,e=>{"use strict";let t=(0,e.i(475254).default)("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);e.s(["Headphones",()=>t],905257)},886781,e=>{"use strict";var t=e.i(843476),a=e.i(271645),s=e.i(607486),l=e.i(475254);let r=(0,l.default)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);var i=e.i(905257),n=e.i(343432),o=e.i(283086),c=e.i(761911),d=e.i(870273),h=e.i(107233),x=e.i(727612),u=e.i(686311),m=e.i(217923),p=e.i(503116),g=e.i(39312),y=e.i(63209),f=e.i(16715),b=e.i(239616);let j={"building-2":s.Building2,"trending-down":r,headphones:i.Headphones,phone:n.Phone,sparkles:o.Sparkles,users:c.Users,star:d.Star};function v({language:e="en",onSelectEngine:l}){let[r,i]=(0,a.useState)([]),[n,o]=(0,a.useState)([]),[c,d]=(0,a.useState)(null),[v,N]=(0,a.useState)(!0),[w,M]=(0,a.useState)(null),[C,S]=(0,a.useState)(null),[A,T]=(0,a.useState)(!1),$="he"===e;(0,a.useEffect)(()=>{L()},[]);let L=async()=>{try{N(!0),M(null);let[e,t,a]=await Promise.all([fetch("/api/hotel-booking-ai?action=templates"),fetch("/api/hotel-booking-ai?action=engines"),fetch("/api/hotel-booking-ai?action=stats")]),s=await e.json(),l=await t.json(),r=await a.json();s.success&&i(s.data),l.success&&o(l.data),r.success&&d(r.data)}catch(e){M(e.message||"Failed to load data")}finally{N(!1)}},E=async e=>{try{T(!0);let t=await fetch("/api/hotel-booking-ai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"create",templateId:e})}),a=await t.json();a.success&&(await L(),l&&l(a.data.id))}catch(e){M(e.message)}finally{T(!1)}},z=async e=>{try{let t=await fetch(`/api/hotel-booking-ai?id=${e}`,{method:"DELETE"});(await t.json()).success&&await L()}catch(e){M(e.message)}};return v?(0,t.jsxs)("div",{className:"flex items-center justify-center h-96",children:[(0,t.jsx)(f.RefreshCw,{className:"w-8 h-8 animate-spin text-blue-500"}),(0,t.jsx)("span",{className:"ml-2 text-gray-600",children:"he"===e?"注...":"Loading..."})]}):w?(0,t.jsxs)("div",{className:"flex items-center justify-center h-96 text-red-500",children:[(0,t.jsx)(y.AlertCircle,{className:"w-8 h-8 mr-2"}),(0,t.jsx)("span",{children:w}),(0,t.jsx)("button",{onClick:L,className:"ml-4 px-4 py-2 bg-red-100 rounded-lg hover:bg-red-200",children:"he"===e?"住 砖":"Retry"})]}):(0,t.jsxs)("div",{className:`p-6 space-y-8 ${$?"rtl":"ltr"}`,dir:$?"rtl":"ltr",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"he"===e?"注 转 AI":"Hotel Booking AI"}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:"he"===e?" 专 注 转 住住 AI":"Manage and monitor AI-powered booking engines"})]}),(0,t.jsxs)("button",{onClick:L,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:[(0,t.jsx)(f.RefreshCw,{className:"w-4 h-4"}),"he"===e?"专注":"Refresh"]})]}),c&&(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[(0,t.jsx)(k,{icon:(0,t.jsx)(g.Zap,{className:"w-5 h-5 text-green-500"}),label:"he"===e?"注 驻注":"Active Engines",value:c.activeEngines,color:"green"}),(0,t.jsx)(k,{icon:(0,t.jsx)(u.MessageSquare,{className:"w-5 h-5 text-blue-500"}),label:"he"===e?"砖转":"Conversations",value:c.totalConversations,color:"blue"}),(0,t.jsx)(k,{icon:(0,t.jsx)(m.BarChart3,{className:"w-5 h-5 text-purple-500"}),label:"he"===e?"注转":"Messages",value:c.totalMessages,color:"purple"}),(0,t.jsx)(k,{icon:(0,t.jsx)(b.Settings,{className:"w-5 h-5 text-orange-500"}),label:"he"===e?"":"Tool Calls",value:c.totalToolCalls,color:"orange"}),(0,t.jsx)(k,{icon:(0,t.jsx)(p.Clock,{className:"w-5 h-5 text-cyan-500"}),label:"he"===e?" 转 爪注":"Avg Response",value:`${Math.round(c.avgResponseTime)}ms`,color:"cyan"}),(0,t.jsx)(k,{icon:(0,t.jsx)(y.AlertCircle,{className:"w-5 h-5 text-red-500"}),label:"he"===e?"砖转":"Error Rate",value:`${c.errorRate.toFixed(1)}%`,color:"red"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"he"===e?"转转 注":"Engine Templates"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:r.map(a=>{let l=j[a.icon]||s.Building2;return(0,t.jsxs)("div",{className:`bg-white rounded-xl border-2 p-5 hover:shadow-lg transition-all cursor-pointer ${C===a.id?"border-blue-500 shadow-md":"border-gray-200 hover:border-gray-300"}`,onClick:()=>S(a.id),children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,t.jsx)("div",{className:`p-3 rounded-lg bg-${a.color}-100`,children:(0,t.jsx)(l,{className:`w-6 h-6 text-${a.color}-600`})}),(0,t.jsxs)("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:[a.skillCount," ","he"===e?"转":"skills"]})]}),(0,t.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:"he"===e?a.nameHe:a.name}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"he"===e?a.descriptionHe:a.description}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-1",children:[a.capabilities.slice(0,3).map(e=>(0,t.jsx)("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-0.5 rounded",children:e},e)),a.capabilities.length>3&&(0,t.jsxs)("span",{className:"text-xs text-gray-400",children:["+",a.capabilities.length-3]})]}),(0,t.jsxs)("button",{onClick:e=>{e.stopPropagation(),E(a.id)},disabled:A,className:"mt-4 w-full flex items-center justify-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50",children:[(0,t.jsx)(h.Plus,{className:"w-4 h-4"}),"he"===e?"爪专 注":"Create Engine"]})]},a.id)})})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:["he"===e?"注 驻注":"Active Engines",(0,t.jsxs)("span",{className:"text-sm font-normal text-gray-500 ml-2",children:["(",n.length,")"]})]}),0===n.length?(0,t.jsxs)("div",{className:"bg-gray-50 rounded-xl p-8 text-center",children:[(0,t.jsx)(s.Building2,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),(0,t.jsx)("p",{className:"text-gray-600",children:"he"===e?" 注 驻注. 爪专  转转 注.":"No active engines. Create one from the templates above."})]}):(0,t.jsx)("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-600",children:"he"===e?"注":"Engine"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-600",children:"he"===e?"住住":"Status"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-600",children:"he"===e?"注转":"Messages"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-600",children:"he"===e?" 转":"Avg Response"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-600",children:"he"===e?"驻注转 专":"Last Active"}),(0,t.jsx)("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-600",children:"he"===e?"驻注转":"Actions"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-100",children:n.map(a=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsxs)("td",{className:"px-4 py-3",children:[(0,t.jsx)("div",{className:"font-medium text-gray-900",children:a.templateName}),(0,t.jsxs)("div",{className:"text-xs text-gray-500 font-mono",children:[a.id.slice(0,20),"..."]})]}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsxs)("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${"active"===a.status?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:[(0,t.jsx)("span",{className:`w-1.5 h-1.5 rounded-full ${"active"===a.status?"bg-green-500":"bg-gray-400"}`}),a.status]})}),(0,t.jsx)("td",{className:"px-4 py-3 text-gray-600",children:a.metrics.messagesProcessed}),(0,t.jsxs)("td",{className:"px-4 py-3 text-gray-600",children:[Math.round(a.metrics.avgResponseTime),"ms"]}),(0,t.jsx)("td",{className:"px-4 py-3 text-gray-600 text-sm",children:new Date(a.lastActiveAt).toLocaleString("he"===e?"he-IL":"en-US")}),(0,t.jsx)("td",{className:"px-4 py-3 text-right",children:(0,t.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,t.jsx)("button",{onClick:()=>l?.(a.id),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"he"===e?"驻转 爪'":"Open Chat",children:(0,t.jsx)(u.MessageSquare,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>z(a.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"he"===e?"拽":"Delete",children:(0,t.jsx)(x.Trash2,{className:"w-4 h-4"})})]})})]},a.id))})]})})]})]})}function k({icon:e,label:a,value:s,color:l}){return(0,t.jsx)("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:`p-2 rounded-lg bg-${l}-50`,children:e}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:s}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:a})]})]})})}var N=e.i(514764);let w=(0,l.default)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),M=(0,l.default)("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),C=(0,l.default)("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),S=(0,l.default)("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);var A=e.i(373375),T=e.i(174886),$=e.i(643531),L=e.i(531245),E=e.i(284614);function z({isActive:e,currentStep:a,toolsExecuted:s,className:l=""}){return e||a||0!==s.length?(0,t.jsxs)("div",{className:`bg-gray-50 dark:bg-gray-800 rounded-lg p-3 ${l}`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[e&&(0,t.jsx)("div",{className:"animate-spin h-4 w-4 border-2 border-blue-500 border-t-transparent rounded-full"}),!e&&"Complete"===a&&(0,t.jsx)("div",{className:"h-4 w-4 bg-green-500 rounded-full flex items-center justify-center",children:(0,t.jsx)("svg",{className:"h-3 w-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:a||"Ready"})]}),s.length>0&&(0,t.jsx)("div",{className:"mt-2 flex flex-wrap gap-1",children:s.map((e,a)=>(0,t.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:[" ",e]},a))})]}):null}function B({text:e,isStreaming:a,className:s=""}){return(0,t.jsxs)("div",{className:`prose dark:prose-invert max-w-none ${s}`,children:[e,a&&(0,t.jsx)("span",{className:"inline-block w-2 h-4 bg-blue-500 animate-pulse ml-1"})]})}function H({instanceId:e,language:s="en",onBack:l,className:r=""}){let[i,n]=(0,a.useState)([]),[c,d]=(0,a.useState)(""),[h,u]=(0,a.useState)(!1),[m,p]=(0,a.useState)(null),[g,f]=(0,a.useState)(null),[b,j]=(0,a.useState)(!1),[v,k]=(0,a.useState)(!1),[H,R]=(0,a.useState)(null),q=(0,a.useRef)(null),O=(0,a.useRef)(null),P="he"===s,{sendMessage:U,isStreaming:I,currentProgress:V,streamedText:D,toolsExecuted:Z,error:F,reset:J}=function(e){let{engineId:t,engineType:s,config:l,onProgress:r,onChunk:i,onComplete:n,onError:o}=e,[c,d]=(0,a.useState)(!1),[h,x]=(0,a.useState)(""),[u,m]=(0,a.useState)(""),[p,g]=(0,a.useState)([]),[y,f]=(0,a.useState)(null),b=(0,a.useCallback)(()=>{d(!1),x(""),m(""),g([]),f(null)},[]);return{sendMessage:(0,a.useCallback)(async e=>{b(),d(!0);try{let a=await fetch("/api/hotel-booking-ai/stream",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({engineId:t,engineType:s,config:l,message:e,stream:!0,createNew:!t&&!!s})});if(!a.ok)throw Error("Stream request failed");let c=a.body?.getReader();if(!c)throw Error("No response body");let d=new TextDecoder,h="";for(;;){let{done:e,value:t}=await c.read();if(e)break;let a=(h+=d.decode(t,{stream:!0})).split("\n\n");for(let e of(h=a.pop()||"",a))if(e.startsWith("event:")){let t=e.match(/event: (\w+)\ndata: ([\s\S]+)/);if(t){let[,e,a]=t;try{let t=JSON.parse(a),s={type:e,...t};switch(e){case"connected":x("Connected");break;case"progress":x(t.message||t.step||"");break;case"tools":t.tools&&g(t.tools),x(`Executed ${t.tools?.length||0} tools`);break;case"chunk":m(e=>e+(e?" ":"")+t.text),i?.(t.text);break;case"complete":x("Complete"),t.toolsUsed&&g(t.toolsUsed),n?.({response:t.response,toolsUsed:t.toolsUsed});break;case"error":f(t.error),o?.(t.error)}r?.(s)}catch(e){console.error("Failed to parse SSE data:",e)}}}}}catch(e){f(e.message),o?.(e.message)}finally{d(!1)}},[t,s,l,r,i,n,o,b]),isStreaming:c,currentProgress:h,streamedText:u,toolsExecuted:p,error:y,reset:b}}({engineId:e,onComplete:e=>{let t={role:"assistant",content:e.response,timestamp:new Date().toISOString(),toolCalls:e.toolsUsed?.map(e=>({name:e,parameters:{}}))};n(e=>[...e,t]),u(!1)},onError:e=>{f(e),u(!1)}}),K=g||F;(0,a.useEffect)(()=>{W(),X()},[e]),(0,a.useEffect)(()=>{q.current?.scrollIntoView({behavior:"smooth"})},[i]);let W=async()=>{try{let t=await fetch(`/api/hotel-booking-ai?action=engine&id=${e}`),a=await t.json();if(a.success){p({id:a.data.id,templateName:a.data.template.name,persona:a.data.template.persona,status:a.data.status});let t=await fetch(`/api/hotel-booking-ai/chat?instanceId=${e}&action=greeting&language=${s}`),l=await t.json();l.success&&l.data.greeting&&n([{role:"assistant",content:l.data.greeting,timestamp:new Date().toISOString()}])}}catch(e){f(e.message)}},X=async()=>{try{let t=await fetch("/api/hotel-booking-ai/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"history",instanceId:e})}),a=await t.json();a.success&&a.data.history.length>0&&n(a.data.history)}catch(e){console.error("Failed to fetch history:",e)}},G=async()=>{if(!c.trim()||h||I)return;let e={role:"user",content:c.trim(),timestamp:new Date().toISOString()};n(t=>[...t,e]);let t=c.trim();d(""),u(!0),f(null),J();try{await U(t)}catch(e){f(e.message||"Network error"),u(!1)}finally{O.current?.focus()}},Q=async()=>{try{let t=await fetch("/api/hotel-booking-ai/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"clear",instanceId:e})});(await t.json()).success&&(n([]),await W())}catch(e){f(e.message)}},Y=async(e,t)=>{try{await navigator.clipboard.writeText(t),R(e),setTimeout(()=>R(null),2e3)}catch(e){console.error("Failed to copy:",e)}};return(0,t.jsxs)("div",{className:`flex flex-col h-full bg-gray-50 ${r}`,dir:P?"rtl":"ltr",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 bg-white border-b border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[l&&(0,t.jsx)("button",{onClick:l,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,t.jsx)(A.ChevronLeft,{className:`w-5 h-5 ${P?"rotate-180":""}`})}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:(0,t.jsx)(L.Bot,{className:"w-5 h-5 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900",children:m?.persona?"he"===s?m.persona.nameHe:m.persona.name:"he"===s?"注专 转":"Booking Assistant"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:m?.persona?"he"===s?m.persona.roleHe:m.persona.role:m?.templateName})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>j(!b),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:b?"Unmute":"Mute",children:b?(0,t.jsx)(S,{className:"w-5 h-5 text-gray-500"}):(0,t.jsx)(C,{className:"w-5 h-5 text-gray-500"})}),(0,t.jsx)("button",{onClick:Q,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"he"===s?"拽 砖":"Clear chat",children:(0,t.jsx)(x.Trash2,{className:"w-5 h-5 text-gray-500"})})]})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto px-4 py-6 space-y-4",children:[i.map((e,a)=>(0,t.jsxs)("div",{className:`flex gap-3 ${"user"===e.role?"flex-row-reverse":""}`,children:["assistant"===e.role&&(0,t.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:(0,t.jsx)(L.Bot,{className:"w-4 h-4 text-white"})}),(0,t.jsxs)("div",{className:`group relative max-w-[80%] rounded-2xl px-4 py-3 ${"user"===e.role?"bg-blue-600 text-white":"bg-white border border-gray-200 text-gray-900"}`,children:[(0,t.jsx)("p",{className:"whitespace-pre-wrap",children:e.content}),e.toolCalls&&e.toolCalls.length>0&&(0,t.jsx)("div",{className:"mt-2 pt-2 border-t border-gray-100",children:(0,t.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[(0,t.jsx)(o.Sparkles,{className:"w-3 h-3"}),e.toolCalls.length," ","he"===s?" 驻注":"tools used"]})}),(0,t.jsx)("button",{onClick:()=>Y(a,e.content),className:`absolute -top-2 ${P?"left-2":"right-2"} opacity-0 group-hover:opacity-100 p-1.5 bg-white border border-gray-200 rounded-lg shadow-sm transition-opacity`,children:H===a?(0,t.jsx)($.Check,{className:"w-3 h-3 text-green-500"}):(0,t.jsx)(T.Copy,{className:"w-3 h-3 text-gray-400"})}),(0,t.jsx)("div",{className:`text-xs mt-1 ${"user"===e.role?"text-blue-200":"text-gray-400"}`,children:new Date(e.timestamp).toLocaleTimeString("he"===s?"he-IL":"en-US",{hour:"2-digit",minute:"2-digit"})})]}),"user"===e.role&&(0,t.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center",children:(0,t.jsx)(E.User,{className:"w-4 h-4 text-gray-600"})})]},a)),I&&D&&(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:(0,t.jsx)(L.Bot,{className:"w-4 h-4 text-white"})}),(0,t.jsx)("div",{className:"bg-white border border-gray-200 rounded-2xl px-4 py-3 max-w-[80%]",children:(0,t.jsx)(B,{text:D,isStreaming:I})})]}),(h||I)&&(0,t.jsx)(z,{isActive:h||I,currentStep:V,toolsExecuted:Z,className:"mx-4"}),K&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-red-500 bg-red-50 rounded-lg px-4 py-3",children:[(0,t.jsx)(y.AlertCircle,{className:"w-5 h-5"}),(0,t.jsx)("span",{children:K})]}),(0,t.jsx)("div",{ref:q})]}),(0,t.jsxs)("div",{className:"px-4 py-3 bg-white border-t border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>{k(!v)},className:`p-3 rounded-full transition-colors ${v?"bg-red-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:v?(0,t.jsx)(M,{className:"w-5 h-5"}):(0,t.jsx)(w,{className:"w-5 h-5"})}),(0,t.jsx)("input",{ref:O,type:"text",value:c,onChange:e=>d(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),G())},placeholder:"he"===s?"拽 注...":"Type a message...",disabled:h,className:"flex-1 px-4 py-3 bg-gray-100 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:bg-white transition-colors"}),(0,t.jsx)("button",{onClick:G,disabled:!c.trim()||h,className:"p-3 bg-blue-500 text-white rounded-full hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,t.jsx)(N.Send,{className:`w-5 h-5 ${P?"rotate-180":""}`})})]}),(0,t.jsx)("p",{className:"text-xs text-gray-400 text-center mt-2",children:"he"===s?"驻注 注  Hotel Booking AI":"Powered by Hotel Booking AI"})]})]})}function R(){let[e,s]=(0,a.useState)(null),[l,r]=(0,a.useState)("en");return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("div",{className:"fixed top-4 right-4 z-50",children:(0,t.jsx)("button",{onClick:()=>r(e=>"en"===e?"he":"en"),className:"px-3 py-1.5 bg-white border border-gray-200 rounded-lg text-sm font-medium hover:bg-gray-50 transition-colors shadow-sm",children:"en"===l?"注专转":"English"})}),e?(0,t.jsx)("div",{className:"h-screen",children:(0,t.jsx)(H,{instanceId:e,language:l,onBack:()=>{s(null)},className:"h-full"})}):(0,t.jsx)(v,{language:l,onSelectEngine:e=>{s(e)}})]})}e.s(["default",()=>R],886781)}]);