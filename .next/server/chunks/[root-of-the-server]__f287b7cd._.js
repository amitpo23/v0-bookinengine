module.exports=[18622,(e,t,n)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,t,n)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,t,n)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},24725,(e,t,n)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},93695,(e,t,n)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},44098,(e,t,n)=>{"use strict";t.exports=e.r(18622)},23223,(e,t,n)=>{"use strict";t.exports=e.r(44098).vendored["react-rsc"].React},77516,e=>{"use strict";var t=e.i(74119),n=e.i(74815),s=e.i(66969),a=e.i(8984),r=e.i(80568),o=e.i(85983),i=e.i(51311),l=e.i(48892),c=e.i(16339),u=e.i(34600),d=e.i(71794),p=e.i(4358),g=e.i(80603),v=e.i(79181),x=e.i(53442),m=e.i(70798),h=e.i(93695);e.i(51004);var R=e.i(64291),f=e.i(14539),E=e.i(91275),C=e.i(98897),w=e.i(73453);async function y(e){let{searchParams:t}=new URL(e.url),n=t.get("action"),s=(0,E.getAIEngineManager)();try{switch(n){case"templates":return f.NextResponse.json({success:!0,templates:C.allTemplates.map(e=>({id:e.id,type:e.type,name:e.name,nameHe:e.nameHe,description:e.description,descriptionHe:e.descriptionHe,capabilities:e.capabilities,skillCount:e.skills.length,persona:e.persona}))});case"skills":return f.NextResponse.json({success:!0,skills:w.allSkills.map(e=>({id:e.id,name:e.name,nameHe:e.nameHe,category:e.category,capabilities:e.capabilities,isEnabled:e.isEnabled,toolCount:e.tools.length,tools:e.tools.map(e=>e.name)}))});case"engines":let e=s.getAllEngines();return f.NextResponse.json({success:!0,engines:e.map(e=>({instanceId:e.instanceId,templateId:e.template.id,name:e.template.name,type:e.template.type,status:e.status,activeConversations:e.activeConversations,totalConversations:e.totalConversations,toolCount:e.tools.length}))});case"stats":let t=s.getAllEngines(),a=t.filter(e=>"active"===e.status).length,r=t.reduce((e,t)=>e+t.totalConversations,0),o=t.reduce((e,t)=>e+t.activeConversations,0);return f.NextResponse.json({success:!0,stats:{totalEngines:t.length,activeEngines:a,totalConversations:r,activeConversations:o,totalMessages:s.getConversationAnalytics().totalMessages||0,...s.getEngineStats()}});default:return f.NextResponse.json({success:!0,summary:{version:"1.0.0",templateCount:C.allTemplates.length,skillCount:w.allSkills.length,engineCount:s.getAllEngines().length,activeConversations:s.getConversationAnalytics().activeConversations},endpoints:{"GET ?action=templates":"List all engine templates","GET ?action=skills":"List all available skills","GET ?action=engines":"List all engine instances","GET ?action=stats":"Get aggregate statistics","POST /start-conversation":"Start a new conversation","POST /send-message":"Send message to conversation","POST /execute-tool":"Execute a tool directly"}})}}catch(e){return f.NextResponse.json({success:!1,error:e.message},{status:500})}}async function A(e){let{searchParams:t}=new URL(e.url),n=t.get("action"),s=(0,E.getAIEngineManager)();try{let t=await e.json();switch(n){case"start-conversation":{let{engineId:e,userId:n,sessionId:a,context:r}=t,o=e;if(!o){let e=s.getAllEngines().find(e=>"multi-agent"===e.template.type);o=e?.instanceId}if(!o)return f.NextResponse.json({success:!1,error:"No engine specified and no orchestrator found"},{status:400});let i=s.startConversation(o,n,a,r);if(!i)return f.NextResponse.json({success:!1,error:"Failed to start conversation"},{status:500});let l=s.getEngine(o),c=l?.template.prompts.greetingMessage||"Hello! How can I help you?",u=l?.template.prompts.greetingMessageHe;return f.NextResponse.json({success:!0,conversation:{conversationId:i.conversationId,engineId:i.engineInstanceId,engineName:l?.template.name,persona:l?.template.persona},greeting:c,greetingHe:u})}case"end-conversation":{let{conversationId:e}=t;return s.endConversation(e),f.NextResponse.json({success:!0})}case"execute-tool":{let{toolName:e,parameters:n,conversationId:a}=t,r=a?s.getConversation(a):void 0;r||(r={conversationId:`temp-${Date.now()}`,engineInstanceId:"",startedAt:new Date,lastActivityAt:new Date,messageCount:0,extractedEntities:{},bookingData:{},preferences:{},metadata:{}});let o=await s.executeTool(e,n,r);return f.NextResponse.json({success:o.success,result:o.result,error:o.error})}case"get-tools":{let{engineId:e}=t;if(!e)return f.NextResponse.json({success:!1,error:"engineId is required"},{status:400});let n=s.formatToolsForLLM(e);return f.NextResponse.json({success:!0,tools:n,count:n.length})}case"handoff":{let{conversationId:e,targetEngineId:n}=t,a=await s.executeHandoff(e,n);return f.NextResponse.json(a)}default:return f.NextResponse.json({success:!1,error:`Unknown action: ${n}`},{status:400})}}catch(e){return console.error("[AI Engines API] Error:",e),f.NextResponse.json({success:!1,error:e.message},{status:500})}}e.s(["GET",()=>y,"POST",()=>A],17641);var N=e.i(17641);let T=new t.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/ai-engines/route",pathname:"/api/ai-engines",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/v0-bookinengine/app/api/ai-engines/route.ts",nextConfigOutput:"",userland:N}),{workAsyncStorage:b,workUnitAsyncStorage:j,serverHooks:k}=T;function I(){return(0,s.patchFetch)({workAsyncStorage:b,workUnitAsyncStorage:j})}async function S(e,t,s){T.isDev&&(0,a.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let f="/api/ai-engines/route";f=f.replace(/\/index$/,"")||"/";let E=await T.prepare(e,t,{srcPage:f,multiZoneDraftMode:!1});if(!E)return t.statusCode=400,t.end("Bad Request"),null==s.waitUntil||s.waitUntil.call(s,Promise.resolve()),null;let{buildId:C,params:w,nextConfig:y,parsedUrl:A,isDraftMode:N,prerenderManifest:b,routerServerContext:j,isOnDemandRevalidate:k,revalidateOnlyGenerated:I,resolvedPathname:S,clientReferenceManifest:P,serverActionsManifest:H}=E,O=(0,l.normalizeAppPath)(f),M=!!(b.dynamicRoutes[O]||b.routes[S]),q=async()=>((null==j?void 0:j.render404)?await j.render404(e,t,A,!1):t.end("This page could not be found"),null);if(M&&!N){let e=!!b.routes[S],t=b.dynamicRoutes[O];if(t&&!1===t.fallback&&!e){if(y.experimental.adapterPath)return await q();throw new h.NoFallbackError}}let _=null;!M||T.isDev||N||(_="/index"===(_=S)?"/":_);let U=!0===T.isDev||!M,D=M&&!U;H&&P&&(0,o.setReferenceManifestsSingleton)({page:f,clientReferenceManifest:P,serverActionsManifest:H,serverModuleMap:(0,i.createServerModuleMap)({serverActionsManifest:H})});let L=e.method||"GET",$=(0,r.getTracer)(),F=$.getActiveScopeSpan(),G={params:w,prerenderManifest:b,renderOpts:{experimental:{authInterrupts:!!y.experimental.authInterrupts},cacheComponents:!!y.cacheComponents,supportsDynamicResponse:U,incrementalCache:(0,a.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:y.cacheLife,waitUntil:s.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,n,s)=>T.onRequestError(e,t,s,j)},sharedContext:{buildId:C}},K=new c.NodeNextRequest(e),B=new c.NodeNextResponse(t),V=u.NextRequestAdapter.fromNodeNextRequest(K,(0,u.signalFromNodeResponse)(t));try{let o=async e=>T.handle(V,G).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let n=$.getRootSpanAttributes();if(!n)return;if(n.get("next.span_type")!==d.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${n.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let s=n.get("next.route");if(s){let t=`${L} ${s}`;e.setAttributes({"next.route":s,"http.route":s,"next.span_name":t}),e.updateName(t)}else e.updateName(`${L} ${f}`)}),i=!!(0,a.getRequestMeta)(e,"minimalMode"),l=async a=>{var r,l;let c=async({previousCacheEntry:n})=>{try{if(!i&&k&&I&&!n)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let r=await o(a);e.fetchMetrics=G.renderOpts.fetchMetrics;let l=G.renderOpts.pendingWaitUntil;l&&s.waitUntil&&(s.waitUntil(l),l=void 0);let c=G.renderOpts.collectedTags;if(!M)return await (0,g.sendResponse)(K,B,r,G.renderOpts.pendingWaitUntil),null;{let e=await r.blob(),t=(0,v.toNodeOutgoingHttpHeaders)(r.headers);c&&(t[m.NEXT_CACHE_TAGS_HEADER]=c),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let n=void 0!==G.renderOpts.collectedRevalidate&&!(G.renderOpts.collectedRevalidate>=m.INFINITE_CACHE)&&G.renderOpts.collectedRevalidate,s=void 0===G.renderOpts.collectedExpire||G.renderOpts.collectedExpire>=m.INFINITE_CACHE?void 0:G.renderOpts.collectedExpire;return{value:{kind:R.CachedRouteKind.APP_ROUTE,status:r.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:n,expire:s}}}}catch(t){throw(null==n?void 0:n.isStale)&&await T.onRequestError(e,t,{routerKind:"App Router",routePath:f,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:D,isOnDemandRevalidate:k})},j),t}},u=await T.handleResponse({req:e,nextConfig:y,cacheKey:_,routeKind:n.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:b,isRoutePPREnabled:!1,isOnDemandRevalidate:k,revalidateOnlyGenerated:I,responseGenerator:c,waitUntil:s.waitUntil,isMinimalMode:i});if(!M)return null;if((null==u||null==(r=u.value)?void 0:r.kind)!==R.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==u||null==(l=u.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});i||t.setHeader("x-nextjs-cache",k?"REVALIDATED":u.isMiss?"MISS":u.isStale?"STALE":"HIT"),N&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let d=(0,v.fromNodeOutgoingHttpHeaders)(u.value.headers);return i&&M||d.delete(m.NEXT_CACHE_TAGS_HEADER),!u.cacheControl||t.getHeader("Cache-Control")||d.get("Cache-Control")||d.set("Cache-Control",(0,x.getCacheControlHeader)(u.cacheControl)),await (0,g.sendResponse)(K,B,new Response(u.value.body,{headers:d,status:u.value.status||200})),null};F?await l(F):await $.withPropagatedContext(e.headers,()=>$.trace(d.BaseServerSpan.handleRequest,{spanName:`${L} ${f}`,kind:r.SpanKind.SERVER,attributes:{"http.method":L,"http.target":e.url}},l))}catch(t){if(t instanceof h.NoFallbackError||await T.onRequestError(e,t,{routerKind:"App Router",routePath:O,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:D,isOnDemandRevalidate:k})}),M)throw t;return await (0,g.sendResponse)(K,B,new Response(null,{status:500})),null}}e.s(["handler",()=>S,"patchFetch",()=>I,"routeModule",()=>T,"serverHooks",()=>k,"workAsyncStorage",()=>b,"workUnitAsyncStorage",()=>j],77516)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__f287b7cd._.js.map