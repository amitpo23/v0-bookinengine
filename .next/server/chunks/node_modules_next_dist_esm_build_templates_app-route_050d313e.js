module.exports=[781304,e=>{"use strict";var t=e.i(747909),a=e.i(174017),o=e.i(996250),r=e.i(759756),i=e.i(561916),n=e.i(114444),s=e.i(837092),l=e.i(869741),c=e.i(316795),d=e.i(487718),u=e.i(995169),m=e.i(47587),p=e.i(666012),g=e.i(570101),h=e.i(626937),y=e.i(10372),v=e.i(193695);e.i(52474);var b=e.i(257297),I=e.i(89171),R=e.i(369492);let f=[{},{hotelId:863233,hotelName:"Scarlet Hotel Tel Aviv",hotelImage:"/scarlet-hotel-main.jpg",images:["/scarlet-hotel-lobby.jpg","/scarlet-hotel-room.jpg","/scarlet-hotel-bathroom.jpg"],location:"Dizengoff Street, Tel Aviv",city:"Tel Aviv",stars:4,address:"123 Dizengoff St, Tel Aviv",description:"×ž×œ×•×Ÿ ×‘×•×˜×™×§ ×¨×•×ž× ×˜×™ ×‘×ž×¨×›×– ×ª×œ ××‘×™×‘. ×—×“×¨×™× ×ž×¢×•×¦×‘×™× ×‘×¢×™×¦×•×‘ ×¢×“×›× ×™, ×¨×—×•×§ ×ž×—×•×œ ×›× ×¡ ×•×‘×¨×™×.",facilities:["WiFi ×—×™× ×","×ž×˜×‘×— ××•×¨×—×™×","×˜×¨××¡ ×ž×§×•×¨×”","××•×¤× ×™×™×"],rooms:[{code:"SCARLET_DELUXE_001",roomId:"12466-1",roomName:"Deluxe Double",roomCategory:"Deluxe",categoryId:3,roomImage:"/scarlet-deluxe.jpg",images:[],bedding:"×ž×™×˜×” ×–×•×’×™×ª King",board:"×—×“×¨ ×‘×œ×‘×“",boardId:1,boardType:"RO",maxOccupancy:2,size:28,view:"× ×•×£ ×œ×¢×™×¨",amenities:["×ž×–×’×Ÿ","×˜×œ×•×•×™×–×™×”","×ž×™× ×™ ×‘×¨","×©×™×¨×•×ª×™× ×™×•×§×¨×ª×™×™×"],price:650,buyPrice:650,originalPrice:850,currency:"ILS",cancellationPolicy:"×‘×™×˜×•×œ ×—×™× × ×¢×“ 24 ×©×¢×•×ª ×œ×¤× ×™ ×”×”×’×¢×”",available:3},{code:"SCARLET_GARDEN_002",roomId:"12466-2",roomName:"Garden Room with Terrace",roomCategory:"Superior",categoryId:2,roomImage:"/scarlet-garden.jpg",images:[],bedding:"×ž×™×˜×” ×–×•×’×™×ª Queen",board:"×œ×™× ×” ×•××¨×•×—×ª ×‘×•×§×¨",boardId:2,boardType:"BB",maxOccupancy:2,size:32,view:"× ×•×£ ×œ×’×Ÿ",amenities:["×ž×–×’×Ÿ","×˜×œ×•×•×™×–×™×” ×—×›×ž×”","×ž×˜×‘×—×•×Ÿ","×˜×¨××¡"],price:750,buyPrice:750,originalPrice:950,currency:"ILS",cancellationPolicy:"×‘×™×˜×•×œ ×—×™× × ×¢×“ 48 ×©×¢×•×ª ×œ×¤× ×™ ×”×”×’×¢×”",available:2},{code:"SCARLET_SUITE_003",roomId:"12466-3",roomName:"Romantic Suite",roomCategory:"Suite",categoryId:4,roomImage:"/scarlet-suite.jpg",images:[],bedding:"×ž×™×˜×” ×–×•×’×™×ª King + ×¡×¤×”",board:"×œ×™× ×” ×•××¨×•×—×ª ×‘×•×§×¨",boardId:2,boardType:"BB",maxOccupancy:2,size:45,view:"× ×•×£ ×¤× ×•×¨×ž×™",amenities:["×ž×–×’×Ÿ","×’'×§×•×–×™","×˜×œ×•×•×™×–×™×” ×—×›×ž×”","×ž×˜×‘×—×•×Ÿ ×ž×œ×","×©×™× ×™×™×”"],price:1050,buyPrice:1050,originalPrice:1350,currency:"ILS",cancellationPolicy:"×‘×™×˜×•×œ ×—×™× × ×¢×“ 72 ×©×¢×•×ª ×œ×¤× ×™ ×”×”×’×¢×”",available:1}]},{hotelId:1001,hotelName:"Royal Beach Tel Aviv",hotelName:"Royal Beach Tel Aviv",hotelImage:"/luxury-beach-hotel-tel-aviv.jpg",images:["/luxury-hotel-lobby.png","/hotel-pool-sunset.jpg","/hotel-spa-relaxation.png"],location:"Herbert Samuel Promenade",city:"Tel Aviv",stars:5,address:"19 Herbert Samuel St, Tel Aviv",description:"×ž×œ×•×Ÿ ×‘×•×˜×™×§ ×™×•×§×¨×ª×™ ×¢×œ ×—×•×£ ×”×™× ×”×ª×™×›×•×Ÿ ×‘×œ×‘ ×ª×œ ××‘×™×‘. ×—×“×¨×™× ×ž×¢×•×¦×‘×™×, ×¡×¤× ×ž×¤× ×§ ×•×ž×¡×¢×“×” ×’×•×¨×ž×”.",facilities:["WiFi ×—×™× ×","×‘×¨×™×›×”","×¡×¤×","×ž×¡×¢×“×”","×—× ×™×”","×—×“×¨ ×›×•×©×¨"],rooms:[{code:"ROYAL_DELUXE_001",roomId:"101",roomName:"×—×“×¨ ×“×œ×•×§×¡ ×¢× × ×•×£ ×œ×™×",roomCategory:"Deluxe",categoryId:3,roomImage:"/deluxe-hotel-room-sea-view.jpg",images:[],bedding:"×ž×™×˜×” ×–×•×’×™×ª King",board:"×—×“×¨ ×‘×œ×‘×“",boardId:1,boardType:"RO",maxOccupancy:2,size:35,view:"× ×•×£ ×œ×™×",amenities:["×ž×–×’×Ÿ","×˜×œ×•×•×™×–×™×”","×ž×™× ×™ ×‘×¨","×ž×¨×¤×¡×ª"],price:1200,buyPrice:1200,originalPrice:1500,currency:"ILS",cancellationPolicy:"×‘×™×˜×•×œ ×—×™× × ×¢×“ 24 ×©×¢×•×ª ×œ×¤× ×™ ×”×”×’×¢×”",available:3},{code:"ROYAL_SUITE_002",roomId:"102",roomName:"×¡×•×•×™×˜×” ×¨×•×™××œ ×¢× ×’'×§×•×–×™",roomCategory:"Suite",categoryId:4,roomImage:"/luxury-hotel-suite-jacuzzi.jpg",images:[],bedding:"×ž×™×˜×” ×–×•×’×™×ª King + ×¡×¤×”",board:"×œ×™× ×” ×•××¨×•×—×ª ×‘×•×§×¨",boardId:2,boardType:"BB",maxOccupancy:4,size:60,view:"× ×•×£ ×¤× ×•×¨×ž×™ ×œ×™×",amenities:["×ž×–×’×Ÿ","×˜×œ×•×•×™×–×™×”","×ž×™× ×™ ×‘×¨","×ž×¨×¤×¡×ª","×’'×§×•×–×™","×¡×œ×•×Ÿ"],price:2400,buyPrice:2400,originalPrice:3e3,currency:"ILS",cancellationPolicy:"×‘×™×˜×•×œ ×—×™× × ×¢×“ 48 ×©×¢×•×ª ×œ×¤× ×™ ×”×”×’×¢×”",available:2}],requestJson:'{"demo":"true"}',responseJson:{}},{hotelId:1002,hotelName:"David Tower Jerusalem",hotelImage:"/luxury-hotel-jerusalem.jpg",images:["/jerusalem-hotel-night.jpg","/luxury-hotel-restaurant.png"],location:"King David Street",city:"Jerusalem",stars:5,address:"23 King David St, Jerusalem",description:"×ž×œ×•×Ÿ ××™×™×§×•× ×™ ×‘×œ×‘ ×™×¨×•×©×œ×™× ×¢× × ×•×£ ×œ×ž×–×¨×— ×”×ª×™×›×•×Ÿ. ×©×™×œ×•×‘ ×ž×•×©×œ× ×©×œ ×ž×¡×•×¨×ª ×•×™×•×§×¨×” ×ž×•×“×¨× ×™×ª.",facilities:["WiFi ×—×™× ×","×‘×¨×™×›×” ×ž×§×•×¨×”","×¡×¤×","3 ×ž×¡×¢×“×•×ª","×—× ×™×”","×—×“×¨ ×›×•×©×¨","×’×™× ×”"],rooms:[{code:"DAVID_CLASSIC_001",roomId:"201",roomName:"×—×“×¨ ×§×œ××¡×™",roomCategory:"Standard",categoryId:1,roomImage:"/classic-hotel-room.jpg",images:[],bedding:"2 ×ž×™×˜×•×ª ×™×—×™×“",board:"×—×“×¨ ×‘×œ×‘×“",boardId:1,boardType:"RO",maxOccupancy:2,size:28,view:"× ×•×£ ×œ×¢×™×¨",amenities:["×ž×–×’×Ÿ","×˜×œ×•×•×™×–×™×”","×ž×™× ×™ ×‘×¨","×›×¡×¤×ª"],price:950,buyPrice:950,originalPrice:1200,currency:"ILS",cancellationPolicy:"×‘×™×˜×•×œ ×—×™× × ×¢×“ 24 ×©×¢×•×ª ×œ×¤× ×™ ×”×”×’×¢×”",available:5}]},{hotelId:1003,hotelName:"Carmel Forest Spa Resort",hotelImage:"/spa-resort-forest.jpg",images:[],location:"Carmel Mountains",city:"Haifa",stars:5,address:"Carmel Forest, Haifa",description:"××ª×¨ × ×•×¤×© ×™×•×§×¨×ª×™ ×‘×™×¢×¨ ×”×›×¨×ž×œ. ×ž×•×©×œ× ×œ×‘×¨×™×—×” ×¨×•×ž× ×˜×™×ª ××• ×—×•×¤×©×” ×ž×©×¤×—×ª×™×ª ×ž×¨×¢× × ×ª.",facilities:["WiFi ×—×™× ×","×¡×¤× ×ž×œ×","×‘×¨×™×›×•×ª ×ž×—×•×ž×ž×•×ª","×ž×¡×¢×“×” ××•×¨×’× ×™×ª","×—× ×™×”","×˜×™×•×œ×™ ×˜×‘×¢"],rooms:[{code:"CARMEL_FOREST_001",roomId:"301",roomName:"×‘×§×ª×” ×‘×™×¢×¨",roomCategory:"Superior",categoryId:2,roomImage:"/forest-cabin-room.jpg",images:[],bedding:"×ž×™×˜×” ×–×•×’×™×ª Queen",board:"×—×¦×™ ×¤× ×¡×™×•×Ÿ",boardId:3,boardType:"HB",maxOccupancy:2,size:40,view:"× ×•×£ ×œ×™×¢×¨",amenities:["×ž×–×’×Ÿ","×§×ž×™×Ÿ","×ž×¨×¤×¡×ª ×¤×¨×˜×™×ª","××ž×‘×˜ ×’×“×•×œ"],price:1800,buyPrice:1800,originalPrice:2200,currency:"ILS",cancellationPolicy:"×‘×™×˜×•×œ ×—×™× × ×¢×“ 72 ×©×¢×•×ª ×œ×¤× ×™ ×”×”×’×¢×”",available:4}]}];async function P(e){try{let t=await e.json();console.log("ðŸ” V2 API SEARCH - Body received:",JSON.stringify(t,null,2));let{hotelName:a,city:o,adults:r,children:i,stars:n,limit:s}=t,l=t.dateFrom||t.checkIn,c=t.dateTo||t.checkOut,d=t.city||t.destination;if(console.log("ðŸ” V2 API SEARCH - Parameters:"),console.log("dateFrom:",l),console.log("dateTo:",c),console.log("cityParam:",d),console.log("hotelName:",a),console.log("FORCE_REAL_API:",!0),!l||!c)return I.NextResponse.json({error:"dateFrom and dateTo are required"},{status:400});if(!a&&!d)return I.NextResponse.json({error:"Either hotelName or city is required"},{status:400});console.log("ðŸŒ V2 REAL API MODE: Calling Medici API..."),console.log("mediciApi parameters:",{dateFrom:l,dateTo:c,hotelName:a||void 0,city:o||void 0,adults:r||2,children:i||[],stars:n?Number(n):void 0,limit:s?Number(s):20});let u=await R.mediciApi.searchHotels({dateFrom:l,dateTo:c,hotelName:a||void 0,city:o||void 0,adults:r||2,children:i||[],stars:n?Number(n):void 0,limit:s?Number(s):20});if(console.log("ðŸŽ¯ V2 Medici API returned:",u.length,"results"),u.length>0)console.log("First result:",JSON.stringify(u[0],null,2));else{console.log("âš ï¸  V2 No results from Medici API - using fallback with dynamic prices");let e=new Date(l).getDate()%10,t=f.map(t=>({hotelId:t.hotelId,hotelName:t.hotelName,city:t.city,stars:t.stars,address:t.address,imageUrl:t.hotelImage,images:t.images,description:t.description,facilities:t.facilities,rooms:t.rooms.map(t=>({...t,price:t.price+15*e,buyPrice:t.buyPrice+15*e})),requestJson:JSON.stringify({version:"v2",fallback:!0,dateVariation:e,originalParams:{dateFrom:l,dateTo:c,hotelName:a,city:o,adults:r,children:i}}),responseJson:JSON.stringify({fallback:"medici_api_failed",version:"v2"})}));return I.NextResponse.json({success:!0,data:t,count:t.length,note:`V2 Fallback mode - API unavailable, using dynamic prices (variation: +${15*e}â‚ª)`,version:"v2"})}let m=await Promise.all(u.map(async e=>{let t=0;"number"==typeof e.hotelId&&e.hotelId>0?t=e.hotelId:"string"==typeof e.hotelId&&e.hotelId&&(t=Number.parseInt(e.hotelId,10)||0);let a=(e.rooms||[]).map((e,t)=>({code:e.code||e.rateKey||e.roomCode||"",roomId:String(e.roomId||e.id||t+1),roomName:e.roomName||e.name||"Standard Room",roomCategory:e.roomCategory||e.roomType||"standard",buyPrice:Number(e.buyPrice||e.price||0),currency:e.currency||"ILS"}));return{hotelId:t,hotelName:e.hotelName||e.name,city:e.city,address:e.address,rooms:a,requestJson:JSON.stringify({version:"v2",realAPI:!0}),responseJson:JSON.stringify(e)}}));return I.NextResponse.json({success:!0,data:m,count:m.length,version:"v2",note:"Real API data"})}catch(e){return console.error("V2 API Search error:",e),I.NextResponse.json({success:!1,error:e.message||"Search failed",version:"v2"},{status:500})}}e.s(["POST",()=>P],899815);var N=e.i(899815);let S=new t.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/hotels/search-v2/route",pathname:"/api/hotels/search-v2",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/app/api/hotels/search-v2/route.ts",nextConfigOutput:"",userland:N}),{workAsyncStorage:A,workUnitAsyncStorage:E,serverHooks:C}=S;function x(){return(0,o.patchFetch)({workAsyncStorage:A,workUnitAsyncStorage:E})}async function T(e,t,o){S.isDev&&(0,r.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let I="/api/hotels/search-v2/route";I=I.replace(/\/index$/,"")||"/";let R=await S.prepare(e,t,{srcPage:I,multiZoneDraftMode:!1});if(!R)return t.statusCode=400,t.end("Bad Request"),null==o.waitUntil||o.waitUntil.call(o,Promise.resolve()),null;let{buildId:f,params:P,nextConfig:N,parsedUrl:A,isDraftMode:E,prerenderManifest:C,routerServerContext:x,isOnDemandRevalidate:T,revalidateOnlyGenerated:w,resolvedPathname:O,clientReferenceManifest:_,serverActionsManifest:j}=R,D=(0,l.normalizeAppPath)(I),H=!!(C.dynamicRoutes[D]||C.routes[O]),L=async()=>((null==x?void 0:x.render404)?await x.render404(e,t,A,!1):t.end("This page could not be found"),null);if(H&&!E){let e=!!C.routes[O],t=C.dynamicRoutes[D];if(t&&!1===t.fallback&&!e){if(N.experimental.adapterPath)return await L();throw new v.NoFallbackError}}let M=null;!H||S.isDev||E||(M="/index"===(M=O)?"/":M);let F=!0===S.isDev||!H,U=H&&!F;j&&_&&(0,n.setReferenceManifestsSingleton)({page:I,clientReferenceManifest:_,serverActionsManifest:j,serverModuleMap:(0,s.createServerModuleMap)({serverActionsManifest:j})});let k=e.method||"GET",q=(0,i.getTracer)(),B=q.getActiveScopeSpan(),J={params:P,prerenderManifest:C,renderOpts:{experimental:{authInterrupts:!!N.experimental.authInterrupts},cacheComponents:!!N.cacheComponents,supportsDynamicResponse:F,incrementalCache:(0,r.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:N.cacheLife,waitUntil:o.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,a,o)=>S.onRequestError(e,t,o,x)},sharedContext:{buildId:f}},K=new c.NodeNextRequest(e),z=new c.NodeNextResponse(t),V=d.NextRequestAdapter.fromNodeNextRequest(K,(0,d.signalFromNodeResponse)(t));try{let n=async e=>S.handle(V,J).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let a=q.getRootSpanAttributes();if(!a)return;if(a.get("next.span_type")!==u.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${a.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let o=a.get("next.route");if(o){let t=`${k} ${o}`;e.setAttributes({"next.route":o,"http.route":o,"next.span_name":t}),e.updateName(t)}else e.updateName(`${k} ${I}`)}),s=!!(0,r.getRequestMeta)(e,"minimalMode"),l=async r=>{var i,l;let c=async({previousCacheEntry:a})=>{try{if(!s&&T&&w&&!a)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let i=await n(r);e.fetchMetrics=J.renderOpts.fetchMetrics;let l=J.renderOpts.pendingWaitUntil;l&&o.waitUntil&&(o.waitUntil(l),l=void 0);let c=J.renderOpts.collectedTags;if(!H)return await (0,p.sendResponse)(K,z,i,J.renderOpts.pendingWaitUntil),null;{let e=await i.blob(),t=(0,g.toNodeOutgoingHttpHeaders)(i.headers);c&&(t[y.NEXT_CACHE_TAGS_HEADER]=c),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let a=void 0!==J.renderOpts.collectedRevalidate&&!(J.renderOpts.collectedRevalidate>=y.INFINITE_CACHE)&&J.renderOpts.collectedRevalidate,o=void 0===J.renderOpts.collectedExpire||J.renderOpts.collectedExpire>=y.INFINITE_CACHE?void 0:J.renderOpts.collectedExpire;return{value:{kind:b.CachedRouteKind.APP_ROUTE,status:i.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:a,expire:o}}}}catch(t){throw(null==a?void 0:a.isStale)&&await S.onRequestError(e,t,{routerKind:"App Router",routePath:I,routeType:"route",revalidateReason:(0,m.getRevalidateReason)({isStaticGeneration:U,isOnDemandRevalidate:T})},x),t}},d=await S.handleResponse({req:e,nextConfig:N,cacheKey:M,routeKind:a.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:C,isRoutePPREnabled:!1,isOnDemandRevalidate:T,revalidateOnlyGenerated:w,responseGenerator:c,waitUntil:o.waitUntil,isMinimalMode:s});if(!H)return null;if((null==d||null==(i=d.value)?void 0:i.kind)!==b.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==d||null==(l=d.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});s||t.setHeader("x-nextjs-cache",T?"REVALIDATED":d.isMiss?"MISS":d.isStale?"STALE":"HIT"),E&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let u=(0,g.fromNodeOutgoingHttpHeaders)(d.value.headers);return s&&H||u.delete(y.NEXT_CACHE_TAGS_HEADER),!d.cacheControl||t.getHeader("Cache-Control")||u.get("Cache-Control")||u.set("Cache-Control",(0,h.getCacheControlHeader)(d.cacheControl)),await (0,p.sendResponse)(K,z,new Response(d.value.body,{headers:u,status:d.value.status||200})),null};B?await l(B):await q.withPropagatedContext(e.headers,()=>q.trace(u.BaseServerSpan.handleRequest,{spanName:`${k} ${I}`,kind:i.SpanKind.SERVER,attributes:{"http.method":k,"http.target":e.url}},l))}catch(t){if(t instanceof v.NoFallbackError||await S.onRequestError(e,t,{routerKind:"App Router",routePath:D,routeType:"route",revalidateReason:(0,m.getRevalidateReason)({isStaticGeneration:U,isOnDemandRevalidate:T})}),H)throw t;return await (0,p.sendResponse)(K,z,new Response(null,{status:500})),null}}e.s(["handler",()=>T,"patchFetch",()=>x,"routeModule",()=>S,"serverHooks",()=>C,"workAsyncStorage",()=>A,"workUnitAsyncStorage",()=>E],781304)}];

//# sourceMappingURL=node_modules_next_dist_esm_build_templates_app-route_050d313e.js.map