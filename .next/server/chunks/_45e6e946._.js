module.exports=[304101,e=>{"use strict";let t={phone:"+972-3-SCARLET",email:"reservations@scarlet-tlv.com",website:"https://scarlet-tlv.com",whatsapp:"+972-50-SCARLET"},o={identity:{name:"××œ×•×Ÿ ×¡×§×¨×œ×˜ ×ª×œ ××‘×™×‘",englishName:"Scarlet Hotel Tel Aviv",tagline:"×”×™×›×Ÿ ×©×”××•×¨×‘× ×™ ×¤×•×’×© ××ª ×”×¨×•×× ×˜×™",taglineEnglish:"Where Urban Meets Romantic",concept:"××œ×•×Ÿ ×‘×•×˜×™×§ ×¨×•×× ×˜×™ ×¢× ×¢×™×¦×•×‘ × ×•×¢×– ×•×¦×‘×¢×•× ×™ ×‘×œ×‘ ×ª×œ ××‘×™×‘",personality:["×¨×•×× ×˜×™","××•×“×¨× ×™","××•×¨×‘× ×™","×¦×¢×™×¨ ×‘×¨×•×—","××¡×‘×™×¨ ×¤× ×™×","××™× ×˜×™××™"],targetAudience:"×–×•×’×•×ª, ××˜×™×™×œ×™× ×¦×¢×™×¨×™×, ×× ×©×™ ×¢×¡×§×™× ×©××—×¤×©×™× ×—×•×•×™×” ×™×™×—×•×“×™×ª",uniqueSellingPoints:["×¢×™×¦×•×‘ ×¦×‘×¢×•× ×™ ×•× ×•×¢×– - ×›×œ ×—×“×¨ ×¢× ××•×•×™×¨×” ×™×™×—×•×“×™×ª","××™×§×•× ××¨×›×–×™ - 5 ×“×§×•×ª ××¨×•×˜×©×™×œ×“, 10 ×“×§×•×ª ××—×•×£ ×”×™×","×—×•×•×™×” ×¨×•×× ×˜×™×ª - ×—×“×¨×™× ×¢× ×××‘×˜×™×•×ª Free-standing ×•××™×˜×•×ª ×¢×’×•×œ×•×ª","×©×™×¨×•×ª ××™×©×™ - ×¦×•×•×ª ×§×˜×Ÿ ×•××¡×•×¨","×’××™×©×•×ª - ××¤×©×¨×•×ª ×œ×”×•×¡×¤×ª ×©×™×¨×•×ª×™× ×•×—×‘×™×œ×•×ª"]},location:{address:"×¨×—×•×‘ ×’'×•Ö¹×¨×“×•Ö¹×Ÿ 17, ×ª×œ ××‘×™×‘-×™×¤×•",neighborhood:"×œ×‘ ×”×¢×™×¨, ×œ×™×“ ×¨×•×˜×©×™×œ×“",coordinates:{lat:32.0667,lng:34.7833},nearbyAttractions:[{name:"×©×“×¨×•×ª ×¨×•×˜×©×™×œ×“",distance:"5 ×“×§×•×ª ×”×œ×™×›×”",description:"×©×“×¨×” ××¨×›×–×™×ª ×¢× ×‘×ª×™ ×§×¤×” ×•××¡×¢×“×•×ª"},{name:"×—×•×£ ×”×™× ×©×œ ×ª×œ ××‘×™×‘",distance:"10 ×“×§×•×ª ×”×œ×™×›×”",description:"×˜×™×™×œ×ª ×•×—×•×£ ×™×"},{name:"×©×•×§ ×”×›×¨××œ",distance:"7 ×“×§×•×ª ×”×œ×™×›×”",description:"×©×•×§ ×¢×××™ ×ª×•×¡×¡"},{name:"×©×•×§ ×”× ××œ",distance:"15 ×“×§×•×ª ×”×œ×™×›×”",description:"×©×•×§ ××•×›×œ ×•××•×× ×•×ª"},{name:"×™×¤×• ×”×¢×ª×™×§×”",distance:"20 ×“×§×•×ª × ×¡×™×¢×”",description:"×¢×™×¨ ×¢×ª×™×§×” ××¨×”×™×‘×”"},{name:"×©×›×•× ×ª × ×•×•×” ×¦×“×§",distance:"12 ×“×§×•×ª ×”×œ×™×›×”",description:"×©×›×•× ×” ××§×¡×™××” ×¢× ×‘×•×˜×™×§×™×"}],transportation:{fromAirport:'30-40 ×“×§×•×ª ×× ×ª×‘"×’ ×‘××•× ×™×ª/×©×™×¨×•×ª ×”×¡×¢×•×ª',publicTransport:"×ª×—× ×ª ××•×˜×•×‘×•×¡ 2 ×“×§×•×ª ×”×œ×™×›×”",parking:"×—× ×™×” ×¦×™×‘×•×¨×™×ª ×‘×¡×‘×™×‘×” (×‘×ª×©×œ×•×)",bikeRental:"×¢××“×•×ª Tel-O-Fun ×‘×§×¨×‘×ª ××§×•×"}},rooms:[{id:"classic-double",name:"Classic Double Room",hebrewName:"×”×§×œ××¡×™ ×”×–×•×’×™",emoji:"ğŸ’",tagline:"×©×§×˜, ××“×•×™×§ ×•×›×œ ××” ×©×¦×¨×™×š ×œ×—×•×¤×©×” ××•×¨×‘× ×™×ª",taglineEn:"Quiet, precise and everything you need for an urban vacation",description:'×”×—×“×¨ ×”×§×œ××¡×™ ×©×œ× ×• ×ª×•×›× ×Ÿ ×‘×§×¤×™×“×” ×›×“×™ ×œ×”×¢× ×™×§ ×œ×›× ××¤×œ×˜ ×©×œ ×©×§×˜ ×‘×œ×‘ ×”×¢×™×¨. ×¢× ×¢×™×¦×•×‘ ××•×“×¨× ×™ ×•× ×¢×™× ×‘×’×•×“×œ 15 ×"×¨, ×–×”×• ×”××¨×—×‘ ×”××™×“×™××œ×™ ×œ×–×•×’×•×ª ××• ×™×—×™×“×™× ×©××—×¤×©×™× ××ª ×”×©×™×œ×•×‘ ×”××•×©×œ× ×‘×™×Ÿ × ×•×—×•×ª ×œ×¡×˜×™×™×œ. ×›××Ÿ ×ª×•×›×œ×• ×œ×”×™×¨×’×¢ ××•×œ ×”×˜×œ×•×•×™×–×™×” ×”×—×›××”, ×œ×™×”× ×•×ª ××§×¤×” ××™×›×•×ª×™ ×•×œ×”×ª×¢×•×¨×¨ ×¨×¢× × ×™× ×œ×™×•× ×—×“×©.',descriptionEn:"Our classic room is carefully designed to give you a peaceful retreat in the heart of the city. With a modern and pleasant design of 15 sqm, this is the ideal space for couples or singles looking for the perfect combination of comfort and style.",size:15,maxGuests:2,basePrice:450,features:["××™×˜×” ×–×•×’×™×ª ××¤× ×§×ª","×˜×œ×•×•×™×–×™×” ×—×›××”","×¤×™× ×ª ×§×¤×” ×•×ª×”","××™×–×•×’ ××•×•×™×¨","×—×“×¨ ×¨×—×¦×” ×××•×‘×–×¨","××’×‘×•×ª ×¨×›×•×ª ×•×ª××¨×•×§×™×","× ×•×£ ××•×¨×‘× ×™ ××• ×—×¦×¨ ×¤× ×™××™×ª"],featuresEn:["Pampering double bed","Smart TV","Coffee and tea corner","Air conditioning","Equipped bathroom","Soft towels and toiletries","Urban view or courtyard"],suitableFor:"×–×•×’×•×ª ××• ×™×—×™×“×™×",suitableForEn:"Couples or singles",images:["https://wsmchexmtiijufemzzwu.supabase.co/storage/v1/object/public/hotel-assets/classic-balcony/SCARLET%20DAY2-1.jpg","https://wsmchexmtiijufemzzwu.supabase.co/storage/v1/object/public/hotel-assets/classic-balcony/SCARLET%20DAY2-2.jpg","https://wsmchexmtiijufemzzwu.supabase.co/storage/v1/object/public/hotel-assets/classic-balcony/SCARLET%20DAY2-3.jpg","https://wsmchexmtiijufemzzwu.supabase.co/storage/v1/object/public/hotel-assets/classic-balcony/urban-plus-dave-1900.jpg","https://wsmchexmtiijufemzzwu.supabase.co/storage/v1/object/public/hotel-assets/classic-balcony/urban-plus-dave.jpg","https://wsmchexmtiijufemzzwu.supabase.co/storage/v1/object/public/hotel-assets/classic-balcony/urbn-plus-dave-1-1900.jpg"]},{id:"romantic-double",name:"Romantic Double Room",hebrewName:"×”×¨×•×× ×˜×™ ×”×–×•×’×™",emoji:"â¤ï¸",tagline:"×œ×”×¦×™×ª ××ª ×”××”×‘×” ××—×“×© â€“ ×¢× ×˜××¥' ×©×œ ×™×•×§×¨×”",taglineEn:"Rekindle the love â€“ with a touch of luxury",description:"×—×“×¨ ××¢×•×¦×‘ ×‘×§×¤×™×“×” ×¢× ×¦×‘×¢×™× × ×•×¢×–×™× ×•××¡×¤×§ ×—×•×•×™×” ×–×•×’×™×ª ×‘×œ×ª×™ × ×©×›×—×ª. ×’×•×œ×ª ×”×›×•×ª×¨×ª ×”×™× ××™×˜×” ×¢×’×•×œ×” ×”×××•×§××ª ×‘××¨×›×– ×”×—×“×¨ ×©××©×§×™×¤×” ××œ ×××‘×˜×™×” ××¢×•×¦×‘×ª (Free-standing), ×©× ×•×¢×“×” ×œ×¨×’×¢×™× ×©×œ ×¨×•×’×¢ ×•×¤×™× ×•×§ ××©×•×ª×£. ×–×”×• ×”×—×“×¨ ×”××•×©×œ× ×œ×—×’×•×’ ×‘×• ××”×‘×”, ×™××™ ×”×•×œ×“×ª ××• ×¤×©×•×˜ ×œ×‘×¨×•×— ××”×©×’×¨×”.",descriptionEn:"A carefully designed room with bold colors providing an unforgettable couples experience. The highlight is a round bed in the center of the room overlooking a designer free-standing bathtub, designed for moments of shared relaxation and pampering.",size:18,maxGuests:2,basePrice:650,features:["××™×˜×” ×¢×’×•×œ×” ×‘××¨×›×– ×”×—×“×¨","×××‘×˜×™×” ×™×•×§×¨×ª×™×ª Free-standing","×›×¡×¤×ª ××™×©×™×ª","×˜×œ×•×•×™×–×™×” ×—×›××”","×¤×™× ×ª ×§×¤×”/×ª×”","××•×¦×¨×™ ×¨×—×¦×” ××¤× ×§×™×","×¢×™×¦×•×‘ ×¦×‘×¢×•× ×™ ×•× ×•×¢×–","× ×•×£ ××•×¨×‘× ×™ ××• ×—×¦×¨ ×¤× ×™××™×ª"],featuresEn:["Round bed in room center","Luxury free-standing bathtub","Personal safe","Smart TV","Coffee/tea corner","Pampering bath products","Colorful and bold design","Urban view or courtyard"],suitableFor:"×–×•×’×•×ª ×œ×¨×’×¢×™× ×¨×•×× ×˜×™×™×",suitableForEn:"Couples for romantic moments",special:"×××‘×˜×™×” ×™×•×§×¨×ª×™×ª ×‘××¨×›×– ×”×—×œ×œ",specialEn:"Luxury bathtub in the center of the space",images:["https://wsmchexmtiijufemzzwu.supabase.co/storage/v1/object/public/hotel-assets/romantic-classic/Scarlet%20Hotel-100.jpg","https://wsmchexmtiijufemzzwu.supabase.co/storage/v1/object/public/hotel-assets/romantic-classic/Scarlet%20Hotel-101.jpg","https://wsmchexmtiijufemzzwu.supabase.co/storage/v1/object/public/hotel-assets/romantic-classic/Scarlet%20Hotel-102.jpg","https://wsmchexmtiijufemzzwu.supabase.co/storage/v1/object/public/hotel-assets/romantic-classic/Scarlet%20Hotel-103.jpg"]},{id:"economy-double",name:"Economy Double Room",hebrewName:"×”××§×•× ×•××™ ×”×–×•×’×™",emoji:"ğŸ’¼",tagline:"×§×•××¤×§×˜×™, ××©×ª×œ× ×•××œ× ×‘×¡×˜×™×™×œ",description:'×”×¤×ª×¨×•×Ÿ ×”××•×©×œ× ×œ××™ ×©×¨×•×¦×” ×œ×—×•×•×ª ××ª ×”×¢×™×¨ ×‘××—×™×¨ ××©×ª×œ× ×‘×œ×™ ×œ×”×ª×¤×©×¨ ×¢×œ ×”××™×›×•×ª. ×‘×—×“×¨ ×©×œ 12 ×"×¨ ×”×¦×œ×—× ×• ×œ×”×›× ×™×¡ ××ª ×›×œ ××” ×©×—×©×•×‘: ×¢×™×¦×•×‘ ×—×›×, ××™×˜×” × ×¢×™××” ×•××•×•×™×¨×” ××–××™× ×”. ××™×“×™××œ×™ ×œ××˜×™×™×œ×™× ×©×¨×•×¦×™× ×œ×‘×œ×•×ª ××ª ×¨×•×‘ ×”×™×•× ×‘×—×•×¥ ×•×œ×—×–×•×¨ ×œ×¤×™× ×” ×—××” ×•× ×¢×™××” ×‘×œ×™×œ×”.',size:12,maxGuests:2,basePrice:350,features:["××™×˜×” ×–×•×’×™×ª × ×•×—×”","×›×¡×¤×ª ××™×©×™×ª","×˜×œ×•×•×™×–×™×” ×—×›××”","××–×’×Ÿ","×¢×¨×›×ª ×§×¤×”/×ª×”","×¢×™×¦×•×‘ ×—×›×","× ×•×£ ××•×¨×‘× ×™ ××• ×—×¦×¨ ×¤× ×™××™×ª"],suitableFor:"××˜×™×™×œ×™× ×•×ª×§×¦×™×‘ ×—×›×",images:["https://wsmchexmtiijufemzzwu.supabase.co/storage/v1/object/public/hotel-assets/romantic-classic/Scarlet%20Hotel-100.jpg","https://wsmchexmtiijufemzzwu.supabase.co/storage/v1/object/public/hotel-assets/romantic-classic/Scarlet%20Hotel-101.jpg"]},{id:"classic-balcony",name:"Classic Balcony Room",hebrewName:"×§×œ××¡×™ ×¢× ××¨×¤×¡×ª",emoji:"â˜€ï¸",tagline:"×œ× ×©×•× ××ª ×”××•×•×™×¨ ×©×œ ×ª×œ ××‘×™×‘",description:'×›×œ ×”×™×ª×¨×•× ×•×ª ×©×œ ×”×—×“×¨ ×”×§×œ××¡×™ ×”××”×•×‘, ×¢× ×ª×•×¡×¤×ª ××©×“×¨×’×ª: ××¨×¤×¡×ª ×¤×¨×˜×™×ª ×¦××•×“×”. ××™×Ÿ ×›××• ×œ×¤×ª×•×— ××ª ×”×‘×•×§×¨ ×¢× ×›×•×¡ ×§×¤×” ×‘××•×•×™×¨ ×”×¤×ª×•×— ××• ×œ×¡×™×™× ××ª ×”×™×•× ×¢× ×›×•×¡ ×™×™×Ÿ ××•×œ ×‘×¨×™×–×” × ×¢×™××”. ×”××¨×—×‘ (15 ×"×¨) ××¢×•×¦×‘ ×‘×§×¤×™×“×” ×›×“×™ ×œ×”×¢× ×™×§ ×œ×›× ×ª×—×•×©×ª ×—×•×¤×© ×××™×ª×™×ª.',size:15,maxGuests:2,basePrice:550,features:["××¨×¤×¡×ª ×¤×¨×˜×™×ª ×××•×‘×–×¨×ª","××™×˜×” ×–×•×’×™×ª ×’×“×•×œ×”","×›×¡×¤×ª ××™×©×™×ª","×˜×œ×•×•×™×–×™×” ×—×›××”","××™×–×•×’ ××•×•×™×¨","××•×¦×¨×™ ×¨×—×¦×” ××™×›×•×ª×™×™×","×¤×™× ×ª ×§×¤×” ×•×ª×”"],suitableFor:"×–×•×’×•×ª ×©××•×”×‘×™× ××•×•×™×¨ ×¤×ª×•×—",special:"××¨×¤×¡×ª ×¤×¨×˜×™×ª ×•×××•×‘×–×¨×ª",images:["https://wsmchexmtiijufemzzwu.supabase.co/storage/v1/object/public/hotel-assets/romantic-classic/Scarlet%20Hotel-102.jpg","https://wsmchexmtiijufemzzwu.supabase.co/storage/v1/object/public/hotel-assets/romantic-classic/Scarlet%20Hotel-103.jpg"]},{id:"deluxe",name:"Deluxe Room",hebrewName:"×—×“×¨ ×“×œ××§×¡",emoji:"ğŸŒŸ",tagline:"×”××¨×—×‘ ×”××•×©×œ× ×œ××©×¤×—×” ××• ×—×‘×¨×™×",description:'×›×©×¦×¨×™×š ×§×¦×ª ×™×•×ª×¨ ××§×•× ×œ× ×©×•×, ×—×“×¨ ×”×“×œ××§×¡ ×”×•× ×”×ª×©×•×‘×”. ×¢× ×—×œ×œ ××¨×•×•×— ×©×œ 22 ×"×¨, ×”×—×“×¨ ×”×–×” ××ª××™× ×‘× ×•×—×•×ª ×œ×¢×“ 4 ××•×¨×—×™×. ×”×¢×™×¦×•×‘ ×”×’××™×© ×•×”××¨×•×•×— ×××¤×©×¨ ×œ×›×•×œ× ×œ×™×”× ×•×ª ×™×—×“, ××‘×œ×™ ×œ×•×•×ª×¨ ×¢×œ ×”× ×•×—×•×ª ×”××™×©×™×ª.',size:22,maxGuests:4,basePrice:750,features:['×—×œ×œ ××¨×•×•×— 22 ×"×¨',"××™×˜×” ×–×•×’×™×ª + ××•×¤×¦×™×” ×œ××™×˜×•×ª × ×•×¡×¤×•×ª","×›×¡×¤×ª ××™×©×™×ª","×˜×œ×•×•×™×–×™×” ×—×›××”","×¤×™× ×ª ×§×¤×” ×•×ª×”","××™×–×•×’ ××•×•×™×¨","×—×“×¨ ×¨×—×¦×” ×××•×‘×–×¨"],suitableFor:"×¢×“ 4 ××•×¨×—×™× - ××©×¤×—×•×ª ×•×—×‘×¨×™×",images:["https://wsmchexmtiijufemzzwu.supabase.co/storage/v1/object/public/hotel-assets/deluxe/_92a9431%20%28i%29.jpg","https://wsmchexmtiijufemzzwu.supabase.co/storage/v1/object/public/hotel-assets/deluxe/_92a9487.jpg","https://wsmchexmtiijufemzzwu.supabase.co/storage/v1/object/public/hotel-assets/deluxe/Scarlet%20Hotel-27.jpg","https://wsmchexmtiijufemzzwu.supabase.co/storage/v1/object/public/hotel-assets/deluxe/Scarlet%20Hotel-28.jpg","https://wsmchexmtiijufemzzwu.supabase.co/storage/v1/object/public/hotel-assets/deluxe/Scarlet%20Hotel-29.jpg","https://wsmchexmtiijufemzzwu.supabase.co/storage/v1/object/public/hotel-assets/deluxe/Scarlet%20Hotel-30.jpg"]},{id:"deluxe-balcony-bathtub",name:"Deluxe Balcony & Bathtub",hebrewName:"×“×œ××§×¡ ×¢× ××¨×¤×¡×ª ×•×××‘×˜×™×”",emoji:"ğŸ›",tagline:"×”×—×™×™× ×”×˜×•×‘×™× â€“ ×˜×‘×™×œ×” ×ª×—×ª ×›×™×¤×ª ×”×©××™×™×",description:"×—×“×¨ ×©×”×•× ×—×•×•×™×” ×‘×¤× ×™ ×¢×¦××”. ×“××™×™× ×• ××ª ×¢×¦××›× ××©×ª×›×©×›×™× ×‘×××‘×˜×™×” ×¤×¨×˜×™×ª ×”×××•×§××ª ×‘××¨×¤×¡×ª ×©×œ×›×, ×‘××•×•×™×¨ ×”×¤×ª×•×—. ×”×—×“×¨ ×”××™×•×—×“ ×”×–×” ××ª××™× ×œ×¢×“ 3 ××•×¨×—×™× ×•××¦×™×¢ ×©×™×œ×•×‘ × ×“×™×¨ ×©×œ ××¨×—×‘ ×¤× ×™××™ ××¤× ×§ ×•××¨×—×‘ ×—×™×¦×•× ×™ ×™×•×§×¨×ª×™.",size:22,maxGuests:3,basePrice:850,features:["×××‘×˜×™×” ×—×™×¦×•× ×™×ª ×‘××¨×¤×¡×ª","××™×˜×” ×–×•×’×™×ª + ××•×¤×¦×™×” ×œ××™×˜×” × ×•×¡×¤×ª","××¨×¤×¡×ª ×¤×¨×˜×™×ª","×›×¡×¤×ª ××™×©×™×ª","×˜×œ×•×•×™×–×™×” ×—×›××”","×¤×™× ×•×§×™ ×¨×—×¦×”","× ×•×£ ××•×¨×‘× ×™ ××• ×—×¦×¨"],suitableFor:"×¢×“ 3 ××•×¨×—×™×",special:"×××‘×˜×™×” ×—×™×¦×•× ×™×ª ×‘××¨×¤×¡×ª ×”×¤×¨×˜×™×ª",wowFactor:!0,images:["https://wsmchexmtiijufemzzwu.supabase.co/storage/v1/object/public/hotel-assets/romantic-classic/Scarlet%20Hotel-102.jpg","https://wsmchexmtiijufemzzwu.supabase.co/storage/v1/object/public/hotel-assets/romantic-classic/Scarlet%20Hotel-103.jpg"]},{id:"suite",name:"The Suite",hebrewName:"×”×¡×•×•×™×˜×”",emoji:"ğŸ‘‘",tagline:"×—×•×•×™×ª ×”××™×¨×•×— ×”××•×œ×˜×™××˜×™×‘×™×ª",description:'×”×¡×•×•×™×˜×” ×©×œ× ×• ×”×™× ×”×™×”×œ×•× ×©×‘×›×ª×¨. ×“×™×¨×ª × ×•×¤×© ×™×•×§×¨×ª×™×ª ×‘×’×•×“×œ 50 ×"×¨ ×”××¢× ×™×§×” ×ª×—×•×©×” ×©×œ ×‘×™×ª ×”×¨×—×§ ××”×‘×™×ª. ×¢× ×¡×œ×•×Ÿ ××¨×•×•×—, ×¡×¤×” × ×¤×ª×—×ª ×•××¨×¤×¡×ª ×¢× ×§×™×ª ×©×‘×” ××—×›×” ×œ×›× ×××‘×˜×™×” ××¤× ×§×ª â€“ ×–×”×• ×”××§×•× ×”××•×©×œ× ×œ××©×¤×—×•×ª ××• ×§×‘×•×¦×•×ª ×©×¨×•×¦×•×ª ××ª ×”×˜×•×‘ ×‘×™×•×ª×¨.',size:50,maxGuests:5,basePrice:1200,features:['×“×™×¨×ª × ×•×¤×© 50 ×"×¨',"×¡×œ×•×Ÿ × ×¤×¨×“ ×•××¨×•×•×—","××¨×¤×¡×ª ×¢× ×§×™×ª","×××‘×˜×™×” ×—×™×¦×•× ×™×ª","×¡×¤×” × ×¤×ª×—×ª","××™×˜×•×ª ××™×›×•×ª×™×•×ª","×›×¡×¤×ª ××™×©×™×ª","×˜×œ×•×•×™×–×™×” ×—×›××”","××˜×‘×— ×§×˜×Ÿ ×××•×‘×–×¨","×›×œ ×”××‘×–×•×¨ ×œ×—×•×¤×©×” ××•×©×œ××ª"],suitableFor:"×¢×“ 5 ××•×¨×—×™× - ××©×¤×—×•×ª ×•×§×‘×•×¦×•×ª",special:"×¡×œ×•×Ÿ × ×¤×¨×“, ××¨×¤×¡×ª ×¢× ×§×™×ª ×•×××‘×˜×™×” ×—×™×¦×•× ×™×ª",isPremium:!0,images:["https://wsmchexmtiijufemzzwu.supabase.co/storage/v1/object/public/hotel-assets/suite/Scarlet%20Hotel-9.jpg","https://wsmchexmtiijufemzzwu.supabase.co/storage/v1/object/public/hotel-assets/suite/Scarlet%20Hotel-10.jpg","https://wsmchexmtiijufemzzwu.supabase.co/storage/v1/object/public/hotel-assets/suite/Scarlet%20Hotel-11.jpg","https://wsmchexmtiijufemzzwu.supabase.co/storage/v1/object/public/hotel-assets/suite/Scarlet%20Hotel-12.jpg","https://wsmchexmtiijufemzzwu.supabase.co/storage/v1/object/public/hotel-assets/suite/Scarlet%20Hotel-13.jpg","https://wsmchexmtiijufemzzwu.supabase.co/storage/v1/object/public/hotel-assets/suite/Scarlet%20Hotel-14.jpg","https://wsmchexmtiijufemzzwu.supabase.co/storage/v1/object/public/hotel-assets/suite/Scarlet%20Hotel-15.jpg","https://wsmchexmtiijufemzzwu.supabase.co/storage/v1/object/public/hotel-assets/suite/Scarlet%20Hotel-16.jpg"]}].map(e=>({...e,detailedFeatures:{bedding:"romantic-double"===e.id?"××™×˜×” ×¢×’×•×œ×” ×™×™×—×•×“×™×ª ×‘××¨×›×– ×”×—×“×¨":"suite"===e.id?"××™×˜×” ×§×™× ×’ ×¡×™×™×– + ×¡×¤×” ××ª×§×¤×œ×ª":"××™×˜×” ×–×•×’×™×ª ××™×›×•×ª×™×ª",bathroom:"romantic-double"===e.id||"deluxe-balcony-bathtub"===e.id?"×××‘×˜×™×” Free-standing ×™×•×§×¨×ª×™×ª":"suite"===e.id?"2 ×—×“×¨×™ ×¨×—×¦×” ××œ××™×":"××§×œ×—×ª ×¢× ×¤×™× ×•×§",view:e.id.includes("balcony")?"× ×•×£ ××•×¨×‘× ×™ ××¨×”×™×‘ ××”××¨×¤×¡×ª":"× ×•×£ ××•×¨×‘× ×™ ××• ×—×¦×¨ ×¤× ×™××™×ª ×©×§×˜×”",technology:['×˜×œ×•×•×™×–×™×” ×—×›××” 43"',"WiFi ××”×™×¨ (×œ×œ× ×”×’×‘×œ×”)","×©×§×¢×™ USB ×‘×›×œ ××§×•×","×›×¡×¤×ª ××™×©×™×ª","××™×–×•×’ ××•×•×™×¨ ×—×›×"],amenities:["××™× ×™ ×‘×¨ (×‘×ª×©×œ×•×)","×¤×™× ×ª ×§×¤×” ×•×ª×” ×—×™× ×","××•×¦×¨×™ ×˜×™×¤×•×— ××™×›×•×ª×™×™×","××’×‘×•×ª ×¨×›×•×ª ×•××¦×¢×™× ××™×›×•×ª×™×™×","××™×™×‘×© ×©×™×¢×¨","×›×œ×™ ×’×™×”×•×¥ (×œ×¤×™ ×‘×§×©×”)"]},idealFor:"romantic-double"===e.id?["×–×•×’×•×ª ×¨×•×× ×˜×™×™×","×—×’×™×’×•×ª ××™×•×—×“×•×ª","×™×¨×— ×“×‘×©"]:"suite"===e.id?["××©×¤×—×•×ª ×§×˜× ×•×ª","×©×”×™×•×ª ××¨×•×›×•×ª","××™×¨×•×— ××•×¨×—×™×"]:"economy-double"===e.id?["×ª×§×¦×™×‘ ××•×’×‘×œ","×¢×¡×§×™× ×§×¦×¨×™×","×˜×™×•×œ×™× ×¡×•×œ×•"]:e.id.includes("deluxe")?["×—×•×•×™×” ×™×•×§×¨×ª×™×ª","×©×”×™×™×” ××¤× ×§×ª","××™×¨×•×¢×™× ××™×•×—×“×™×"]:["×©×”×™×™×” ×¨×’×™×œ×”","×¢×¡×§×™×","×˜×™×•×œ×™× ×§×¦×¨×™×"],restrictions:"economy-double"===e.id?["××ª××™× ×œ××§×¡×™××•× 2 ××•×¨×—×™×","××™×Ÿ ××¤×©×¨×•×ª ×œ×”×•×¡×¤×ª ××™×˜×”"]:e.maxGuests>=4?["× ×™×ª×Ÿ ×œ×”×•×¡×™×£ ×¢×¨×™×¡×” ×œ×ª×™× ×•×§"]:[]})),services:{frontDesk:{hours:"24/7",languages:["×¢×‘×¨×™×ª","×× ×’×œ×™×ª","×¨×•×¡×™×ª"],services:["×¦'×§-××™×Ÿ ××”×™×¨ (14:00)","×¦'×§-×××•×˜ ×’××™×© (×¢×“ 11:00, ××¤×©×¨×•×ª ×œ×”××¨×›×”)","×©××™×¨×ª ×›×‘×•×“×” ×—×™× ×","×”××œ×¦×•×ª ××§×•××™×•×ª","×¢×–×¨×” ×‘×”×–×× ×ª ××•× ×™×•×ª ×•××¡×¢×“×•×ª","×©×™×¨×•×ª ×§×•× ×¡×™×™×¨×–'"]},inRoom:["×©×™×¨×•×ª ×—×“×¨×™× (7:00-23:00)","× ×™×§×™×•×Ÿ ×™×•××™","×”×—×œ×¤×ª ××¦×¢×™× ×•××’×‘×•×ª","×›×‘×™×¡×” (×‘×ª×©×œ×•×)","×©×™×¨×•×ª×™ ×§×•× ×¡×™×™×¨×–'"],hotelFacilities:["××™× ×˜×¨× ×˜ ××œ×—×•×˜×™ ××”×™×¨ ×‘×›×œ ×”××œ×•×Ÿ","×œ×•×‘×™ ××¢×•×¦×‘ ×¢× ×¤×™× ×ª ×™×©×™×‘×”","××¨×¤×¡×ª ×’×’ ××©×•×ª×¤×ª","×—×“×¨ ×›×•×©×¨ ×§×˜×Ÿ (×œ×¤×™ ×ª×™××•×)","××—×¡×•×Ÿ ××•×¤× ×™×™×","××–×’×Ÿ ××¨×›×–×™","××¢×¨×›×ª ×›×™×‘×•×™ ××© ×•×‘×˜×™×—×•×ª"],specialServices:["××¨×’×•×Ÿ ×˜×™×•×œ×™× ×•×¤×¢×™×œ×•×™×•×ª","×”×¡×¢×•×ª ×/×œ×©×“×” ×”×ª×¢×•×¤×” (×‘×ª×©×œ×•×)","×©×™×¨×•×ª×™ ×¢×™×¡×•×™ (×‘×ª×™××•× ××¨××©)","×—×‘×™×œ×•×ª ×¨×•×× ×˜×™×•×ª","××¨×•×—×ª ×‘×•×§×¨ ×œ×—×“×¨ (×‘×ª×•×¡×¤×ª ×ª×©×œ×•×)","××™×¨×•×— ×—×™×•×ª ××—××“ (×œ×¤×™ ××™×©×•×¨)"]},dining:{breakfast:{available:!1,note:"×”××œ×•×Ÿ ×œ× ×›×•×œ×œ ××¨×•×—×ª ×‘×•×§×¨",alternatives:["×”××œ×¦×•×ª ××˜×•×‘××•×Ÿ ×œ×‘×ª×™ ×§×¤×” ×‘×§×¨×‘×ª ××§×•×","××¤×©×¨×•×ª ×œ×”×–×× ×ª ××¨×•×—×ª ×‘×•×§×¨ ×œ×—×“×¨ ×××¡×¢×“×•×ª ×©×•×ª×¤×•×ª","×¤×™× ×ª ×§×¤×” ×•×ª×” ×‘×—×“×¨"]},nearbyRestaurants:[{name:"×©×•×§ ×”×›×¨××œ",type:"×©×•×§ ××•×›×œ",distance:"7 ×“×§×•×ª",cuisine:"××’×•×•×Ÿ"},{name:"×¨×•×˜×©×™×œ×“",type:"×¨×—×•×‘ ××¡×¢×“×•×ª",distance:"5 ×“×§×•×ª",cuisine:"×‘×™× ×œ××•××™"},{name:"×©×•×§ ×”× ××œ",type:"×©×•×§ ××•×›×œ",distance:"15 ×“×§×•×ª",cuisine:"××•×× ×•×ª ××•×›×œ"}]},promotions:[{id:"miluim-special",title:"××‘×¦×¢ ×œ××™×œ×•××™×× ×™×§×™×",titleEn:"Reservists Special",discount:20,description:"20% ×”× ×—×” ×œ××™×œ×•××™×× ×™×§×™× ×¢× ×ª×¢×•×“×”",badge:"ğŸ–ï¸ ××‘×¦×¢ ××™×œ×•××™×",badgeColor:"bg-blue-600",validUntil:"2025-12-31",terms:"×‘×”×¦×’×ª ×¦×• 8 ××• ×ª×¢×•×“×ª ××™×œ×•××™×"},{id:"third-night-free",title:"25% ×”× ×—×” ×¢×œ ×”×œ×™×œ×” ×”×©×œ×™×©×™",titleEn:"25% Off 3rd Night",discount:25,description:"×”×–××™× ×• 3 ×œ×™×œ×•×ª ×•×”×œ×™×œ×” ×”×©×œ×™×©×™ ×‘-25% ×”× ×—×”",badge:"ğŸ‰ 3 ×œ×™×œ×•×ª",badgeColor:"bg-purple-600",validUntil:"2025-12-31",terms:"×ª×§×£ ×œ×”×–×× ×•×ª ×©×œ 3 ×œ×™×œ×•×ª ×•××¢×œ×”"},{id:"weekend-special",title:'××‘×¦×¢ ×¡×•×¤"×©',titleEn:"Weekend Special",discount:15,description:"15% ×”× ×—×” ×¢×œ ×¡×•×¤×™ ×©×‘×•×¢",badge:'ğŸŒŸ ×¡×•×¤"×©',badgeColor:"bg-pink-600",validUntil:"2025-12-31",terms:"×ª×§×£ ×œ×©×™×©×™-×©×‘×ª"},{id:"early-bird",title:"×”×–×× ×” ××•×§×“××ª",titleEn:"Early Bird",discount:30,description:"30% ×”× ×—×” ×œ×”×–×× ×•×ª 30 ×™×•× ××¨××©",badge:"ğŸ¦ ××•×§×“×",badgeColor:"bg-orange-600",validUntil:"2025-12-31",terms:"×œ×”×–×× ×•×ª 30+ ×™×•× ××¨××©"}],policies:{checkIn:"14:00 (××¤×©×¨×•×ª ×¦'×§-××™×Ÿ ××•×§×“× ×‘×›×¤×•×£ ×œ×–××™× ×•×ª)",checkOut:"11:00 (××¤×©×¨×•×ª ×œ×”××¨×›×” ×¢×“ 13:00 ×‘×ª×•×¡×¤×ª ×ª×©×œ×•×)",cancellation:["×‘×™×˜×•×œ ×—×™× × ×¢×“ 48 ×©×¢×•×ª ×œ×¤× ×™ ×”×”×’×¢×”","×‘×™×˜×•×œ ×‘××™×—×•×¨ - ×—×™×•×‘ ×œ×™×œ×” ××—×“","××™ ×”×’×¢×” - ×—×™×•×‘ ××œ×"],payment:["×›×¨×˜×™×¡×™ ××©×¨××™: Visa, Mastercard, American Express","×ª×©×œ×•× ×‘××–×•××Ÿ (×©×§×œ×™× ×‘×œ×‘×“)","×”×¢×‘×¨×” ×‘× ×§××™×ª (×‘×ª×™××•× ××¨××©)"],childrenAndPets:{children:"×™×œ×“×™× ××›×œ ×’×™×œ ××•×–×× ×™×",infants:"×¢×¨×™×¡×” ×œ×ª×™× ×•×§ - ×—×™× × (×œ×¤×™ ×‘×§×©×” ××¨××©)",pets:"×—×™×•×ª ××—××“ - ×‘×›×¤×•×£ ×œ××™×©×•×¨ ××¨××© (×™×™×ª×›×Ÿ ×ª×•×¡×¤×ª ×ª×©×œ×•×)"},smoking:"××¡×•×¨ ×œ×¢×©×Ÿ ×‘×—×“×¨×™× - ×™×© ××¨×¤×¡×ª ×™×™×¢×•×“×™×ª ×œ××¢×©× ×™×"},contact:t,faq:[{q:"×”×× ×™×© ×—× ×™×” ×‘××œ×•×Ÿ?",a:"××™×Ÿ ×—× ×™×” ×¦××•×“×” ×œ××œ×•×Ÿ, ××š ×™×© ×—× ×™×” ×¦×™×‘×•×¨×™×ª ×‘×¡×‘×™×‘×” (×›-50 ××˜×¨). ×”×¦×•×•×ª ×™×¢×–×•×¨ ×¢× ×”××œ×¦×•×ª ×œ×”×•×¨×“×ª ×›×‘×•×“×”."},{q:"×”×× ×™×© ××¨×•×—×ª ×‘×•×§×¨?",a:"×”××œ×•×Ÿ ×œ× ×›×•×œ×œ ××¨×•×—×ª ×‘×•×§×¨, ××š ×™×© ×”××•×Ÿ ×‘×ª×™ ×§×¤×” ××¢×•×œ×™× ×‘×”×œ×™×›×” ×©×œ ×“×§×•×ª. ×”×¦×•×•×ª ×™×©××— ×œ×”××œ×™×¥."},{q:"×”×× ×™×© ×‘×¨×™×›×”?",a:"××™×Ÿ ×‘×¨×™×›×” ×‘××œ×•×Ÿ, ××š ×—×•×£ ×”×™× ×‘××¨×—×§ 10 ×“×§×•×ª ×”×œ×™×›×”."},{q:"××” ×”××¨×—×§ ×œ×©×“×” ×”×ª×¢×•×¤×”?",a:"30-40 ×“×§×•×ª × ×¡×™×¢×” ×‘×”×ª×× ×œ×ª× ×•×¢×”. ×× ×—× ×• ×™×›×•×œ×™× ×œ××¨×’×Ÿ ×”×¡×¢×” ××¨××©."},{q:"×”×× ××¤×©×¨ ×œ×¢×©×Ÿ ×‘×—×“×¨×™×?",a:"××¡×•×¨ ×œ×¢×©×Ÿ ×‘×—×“×¨×™×. ×™×© ××¨×¤×¡×ª ×™×™×¢×•×“×™×ª ×œ××¢×©× ×™×."},{q:"××” ×”×’×™×œ ×”××™× ×™××œ×™ ×œ×¦'×§-××™×Ÿ?",a:"18 ×©× ×™×. × ×“×¨×© ×ª×¢×•×“×” ××–×”×” ×‘×¦'×§-××™×Ÿ."}],seasonalInfo:{summer:{months:["×™×•× ×™","×™×•×œ×™","××•×’×•×¡×˜"],characteristics:"×¢×•× ×ª ×©×™× - ××–×’ ××•×•×™×¨ ×—×, ××•××œ×¥ ×—×“×¨ ×¢× ××™×–×•×’ ×˜×•×‘",tips:"×”×–××™× ×• ××¨××©! ×”×¢×™×¨ ×¢××•×¡×” ×‘×ª×™×™×¨×™×"},winter:{months:["×“×¦××‘×¨","×™× ×•××¨","×¤×‘×¨×•××¨"],characteristics:"×¢×•× ×” ×©×§×˜×” - ××–×’ ××•×•×™×¨ × ×¢×™×, ×¤×—×•×ª ×ª×™×™×¨×™×",tips:"××—×™×¨×™× ×˜×•×‘×™× ×™×•×ª×¨, ××¤×©×¨ ×œ× ×¡×•×ª ×œ×§×‘×œ ×©×“×¨×•×’ ×—×™× ×"},holidays:{jewish:["×¨××© ×”×©× ×”","×™×•× ×›×™×¤×•×¨","×¤×¡×—","×¡×•×›×•×ª"],note:"×‘××”×œ×š ×—×’×™× - ××—×™×¨×™× ×’×‘×•×”×™× ×™×•×ª×¨, ×™×© ×œ×”×–××™×Ÿ ××¨××©"}},neighborhoodGuide:{dining:["×¨×•×˜×©×™×œ×“ - ××¡×¢×“×•×ª ×™×•×§×¨×” ×•×‘×ª×™ ×§×¤×”","×©×•×§ ×”×›×¨××œ - ××•×›×œ ×¨×—×•×‘ ×–×•×œ ×•×˜×¢×™×","× ×•×•×” ×¦×“×§ - ××¡×¢×“×•×ª ×‘×•×˜×™×§"],nightlife:["×¨×—×•×‘ ××œ× ×‘×™ - ×‘×¨×™× ×•××•×¢×“×•× ×™×","×”× ××œ - ×‘×™×œ×•×™×™ ×œ×™×œ×” ××•×œ ×”×™×","×¤×œ×•×¨× ×˜×™×Ÿ - ×‘×¨×™× ××œ×˜×¨× ×˜×™×‘×™×™×"],shopping:["×“×™×–× ×’×•×£ ×¡× ×˜×¨ - ×§× ×™×•×Ÿ ××¨×›×–×™","×©×•×§ ×”×›×¨××œ - ×§× ×™×•×ª ×‘××•×•×™×¨×” ××§×•××™×ª","× ×•×•×” ×¦×“×§ - ×‘×•×˜×™×§×™× ×™×™×—×•×“×™×™×"],culture:["×ª×™××˜×¨×•×Ÿ ×”×‘×™××”","××•×–×™××•×Ÿ ×ª×œ ××‘×™×‘","×’×œ×¨×™×•×ª ××× ×•×ª ×‘×¨×•×˜×©×™×œ×“","×‘×™×ª ××’×¨×•×Ÿ"]},reviews:{averageRating:4.7,totalReviews:342,highlights:["××™×§×•× ××¢×•×œ×” - 95% ×—×™×•×‘×™","× ×™×§×™×•×Ÿ - 92% ×—×™×•×‘×™","×©×™×¨×•×ª - 89% ×—×™×•×‘×™","×¢×™×¦×•×‘ ×™×™×—×•×“×™ - 94% ×—×™×•×‘×™"],commonPraise:["×¢×™×¦×•×‘ ××“×”×™× ×•×¦×‘×¢×•× ×™","×¦×•×•×ª ××¡×‘×™×¨ ×¤× ×™× ×•×¢×•×–×¨","××™×§×•× ××•×©×œ× ×œ××˜×™×™×œ×™×","×—×“×¨×™× × ×§×™×™× ×•××¢×•×¦×‘×™× ×™×¤×”","××•×•×™×¨×” ×¨×•×× ×˜×™×ª"],areasForImprovement:["××™×Ÿ ××¨×•×—×ª ×‘×•×§×¨","×—×“×¨×™× ×§×˜× ×™× ×‘×—×œ×§×","××™×Ÿ ×—× ×™×” ×¦××•×“×”"]}};o.location.nearbyAttractions,o.promotions,o.reviews.averageRating,o.reviews.totalReviews,o.reviews.highlights,o.seasonalInfo,t.whatsapp;let a=`
# ××œ×•×Ÿ ×¡×§×¨×œ×˜ ×ª×œ ××‘×™×‘ - ×§×•× ×¡×™×™×¨×–' ×•×™×¨×˜×•××œ×™ ××ª×§×“×

## ×–×”×•×ª ×•×ª×¤×§×™×“
××ª×” ×”×§×•× ×¡×™×™×¨×–' ×”×•×™×¨×˜×•××œ×™ ×”××ª×§×“× ×©×œ ××œ×•×Ÿ ×¡×§×¨×œ×˜ ×ª×œ ××‘×™×‘ - ××œ×•×Ÿ ×‘×•×˜×™×§ ×¨×•×× ×˜×™ ×•××™×•×—×“ ×‘×œ×‘ ×”×¢×™×¨.
×ª×¤×§×™×“×š ×”×•× ×œ×¡×¤×§ ×©×™×¨×•×ª ××™×©×™, ×—× ×•××§×¦×•×¢×™ ×œ××•×¨×—×™× ×¤×•×˜× ×¦×™××œ×™×™× ×•× ×•×›×—×™×™× ×¢× 13 ×™×›×•×œ×•×ª ××ª×§×“××•×ª.

## 13 ×”×™×›×•×œ×•×ª ×”×—×›××•×ª ×©×œ×š

### 1. ğŸ” ×—×™×¤×•×© ×—×›× (availabilityCheck)
- ×—×™×‘×•×¨ ×™×©×™×¨ ×œ-Knowaa API (hotelId: 863233)
- ×‘×“×™×§×ª ×–××™× ×•×ª ×‘×–××Ÿ ×××ª
- ××—×™×¨×™× ××¢×•×“×›× ×™× ×œ×ª××¨×™×›×™× ×¡×¤×¦×™×¤×™×™×
- ×”×¦×’×ª ××¤×©×¨×•×™×•×ª ×—×œ×•×¤×™×•×ª ×× ××™×Ÿ ×–××™× ×•×ª

### 2. â¤ï¸ ×”××œ×¦×•×ª ××™×©×™×•×ª (roomRecommendation)
- × ×™×ª×•×— ×¦×¨×›×™×: ×–×•×’ ×¨×•×× ×˜×™ â†’ Romantic Double
- ×”×ª×××ª ×ª×§×¦×™×‘: ××•×’×‘×œ â†’ Economy, ×’×‘×•×” â†’ Suite/Deluxe
- ×”×¢×“×¤×•×ª ××™×•×—×“×•×ª: ××¨×¤×¡×ª â†’ Deluxe Balcony, ×××‘×˜×™×” â†’ Romantic/Deluxe Bathtub
- ×ª××™×“ ×”×¦×¢ 2-3 ××¤×©×¨×•×™×•×ª ×¢× ×”×¡×‘×¨×™× ×‘×¨×•×¨×™×

### 3. ğŸ§® ×—×™×©×•×‘ ××—×™×¨×™× (priceCalculation)
- ××—×™×¨ ×‘×¡×™×¡ \xd7 ××¡×¤×¨ ×œ×™×œ×•×ª
- ×‘×“×™×§×” ××•×˜×•××˜×™×ª ×©×œ ××‘×¦×¢×™× ×¤×¢×™×œ×™×
- ×”×—×œ×ª ×§×•×“×™ ×§×•×¤×•×Ÿ ×•×”× ×—×•×ª
- ×”×¦×’×ª ×¤×™×¨×•×˜ ×‘×¨×•×¨ ×©×œ ×”×¡×›×•× ×”×¡×•×¤×™

### 4. ğŸ’³ ×œ×™×•×•×™ ×”×–×× ×” (bookingAssistant)
- ×”×¡×‘×¨ ×¢×œ ×ª×”×œ×™×š ×”-PreBook (30 ×“×§×•×ª)
- ×œ×™×•×•×™ ×‘××™×œ×•×™ ×¤×¨×˜×™× ××™×©×™×™×
- ×¡×™×•×¢ ×‘×ª×©×œ×•× ×•××‘×˜×—×”
- ×©×œ×™×—×ª ××™×©×•×¨ ××™×™×“×™

### 5. ğŸ“ ××•××—×” ××§×•××™ (localExpert)
- ×”××œ×¦×•×ª ××¡×¢×“×•×ª: ×¨×•×˜×©×™×œ×“ (5 ×“×§×³), ×©×•×§ ×”×›×¨××œ (7 ×“×§×³)
- ××˜×¨×§×¦×™×•×ª: ×—×•×£ ×”×™× (10 ×“×§×³), ×™×¤×• ×”×¢×ª×™×§×” (20 ×“×§×³)
- ×—×™×™ ×œ×™×œ×”: ×¨×—×•×‘ ××œ× ×‘×™, ×”× ××œ, ×¤×œ×•×¨× ×˜×™×Ÿ
- ×˜×™×¤×™× ××§×•××™×™×: ×ª×—×‘×•×¨×”, ×©×¢×•×ª, ××™×¨×•×¢×™×

### 6. âœ¨ ×‘×§×©×•×ª ××™×•×—×“×•×ª (specialRequests)
- ×—×‘×™×œ×•×ª ×¨×•×× ×˜×™×•×ª: ×¤×¨×—×™×, ×©××¤× ×™×”, ×©×•×§×•×œ×“
- ×—×’×™×’×•×ª: ×¢×•×’×”, ×‘×œ×•× ×™×, ×§×™×©×•×˜×™×
- ×¦×¨×›×™× ××™×•×—×“×™×: ××œ×¨×’×™×•×ª, × ×’×™×©×•×ª, ×“×™××˜×”
- ×©×™×¨×•×ª×™×: ×¢×™×¡×•×™, ×”×¡×¢×•×ª, ×˜×™×•×œ×™× ×××•×¨×’× ×™×

### 7. â­ ×‘×™×§×•×¨×•×ª ×•×“×™×¨×•×’×™× (reviewsSystem)
- ×“×™×¨×•×’ ×›×•×œ×œ: 4.7/5 (342 ×‘×™×§×•×¨×•×ª)
- ×¤×™×¨×•×˜: ××™×§×•× 5/5, × ×™×§×™×•×Ÿ 5/5, ×©×™×¨×•×ª 4.5/5, ×¢×¨×š 4.2/5
- ×”×“×’×©×ª × ×§×•×“×•×ª ×—×•×–×§: "×¢×™×¦×•×‘ ××“×”×™×", "××™×§×•× ××•×©×œ×"
- ××¢× ×” ×œ×—×©×©×•×ª: "××™×Ÿ ×—× ×™×”" â†’ ×”×¡×‘×¨ ×¢×œ ×—× ×™×” ×¦×™×‘×•×¨×™×ª ×§×¨×•×‘×”

### 8. ğŸŸï¸ ××‘×¦×¢×™× ×•×§×•×¤×•× ×™× (promotionsManager)
- **MOBILE_FLASH_2024:** 20% ××•×‘×™×™×œ (24 ×©×¢×•×ª!)
- **EARLY_BIRD_2024:** 15% ×”×–×× ×” ××•×§×“××ª (30+ ×™××™× ××¨××©)
- **WEEKEND_SPECIAL:** 500â‚ª ×”× ×—×” ×¡×•×¤"×©
- ×™×¦×™×¨×ª ×“×—×™×¤×•×ª: "× ×•×ª×¨×• ×¨×§ 3 ×©×¢×•×ª ×œ××‘×¦×¢!"

### 9. ğŸ‘‘ ××•×¢×“×•×Ÿ VIP (loyaltyProgram)
- **Silver:** 5% ×”× ×—×” ×§×‘×•×¢×”
- **Gold:** 10% ×”× ×—×” + ×¦×³×§-××™×Ÿ ××•×§×“× ×—×™× ×
- **Platinum:** 15% ×”× ×—×” + ×©×“×¨×•×’ ×—×™× × + Late checkout
- ×”×¨×©××”: ×”×¦×¢ ×”×˜×‘×ª 10% ×¢×œ ×”×”×–×× ×” ×”×‘××”

### 10. â˜ï¸ ××–×’ ××•×•×™×¨ ×•××˜×¨×§×¦×™×•×ª (weatherAndAttractions)
- ×ª×—×–×™×ª ××“×•×™×§×ª ×œ×ª××¨×™×›×™ ×”×©×”×™×™×”
- ×”××œ×¦×•×ª ×œ×¤×™ ××–×’ ××•×•×™×¨: ×—× â†’ ×—×•×£ ×”×™×, ×§×¨ â†’ ××•×–×™××•× ×™×
- ××™×¨×•×¢×™× ××™×•×—×“×™× ×‘×ª××¨×™×›×™× (×¤×¡×˜×™×‘×œ×™×, ×—×’×™×)
- ××¤×ª ××˜×¨×§×¦×™×•×ª ×‘×”×œ×™×›×” ××”××œ×•×Ÿ

### 11. ğŸ“ˆ ×˜×¨× ×“×™× ×•×ª×•×‘× ×•×ª (travelTrends)
- ×ª×§×•×¤×•×ª ×¤×•×¤×•×œ×¨×™×•×ª: ×§×™×¥ (×™×•×œ×™-××•×’×•×¡×˜), ×—×’×™×
- ×ª×§×•×¤×•×ª ×©×§×˜×•×ª: ×—×•×¨×£ (×™× ×•××¨-×¤×‘×¨×•××¨) â†’ ××—×™×¨×™× ×˜×•×‘×™×
- ×”×©×•×•××ª ××—×™×¨×™×: ×ª×œ ××‘×™×‘ vs ×™×¢×“×™× ××—×¨×™×
- ×”××œ×¦×•×ª ×¢×œ ×ª×–××•×Ÿ: "×”×–××™× ×• ×¢×›×©×™×• ×œ×—×’×™×!"

### 12. ğŸ’¬ ×ª××™×›×” ×‘WhatsApp (whatsappSupport)
- ×©×œ×™×—×ª ×§×™×©×•×¨ ×™×©×™×¨ ×œ×©×™×—×”
- ××™×©×•×¨×™ ×”×–×× ×” ×‘×•×•××˜×¡××¤
- ×¢×“×›×•× ×™ ×¡×˜×˜×•×¡ real-time
- ×©×œ×™×—×ª ×ª××•× ×•×ª ×—×“×¨×™× ×•××™×“×¢ × ×•×¡×£

### 13. ğŸ“Š ××¢×§×‘ ×—×›× (analyticsTracking)
- ×–×™×”×•×™ ×“×¤×•×¡×™×: ×¦×¤×™×™×” ×‘-3 ×—×“×¨×™× ×¨×•×× ×˜×™×™× â†’ ×–×•×’ ××—×¤×© ×—×•×•×™×”
- ×©×™×¤×•×¨ ×”××œ×¦×•×ª: ×”×ª×¢× ×™×™×Ÿ ×‘-Deluxe â†’ ×”×¦×¢ Suite
- ×–×™×”×•×™ × ×˜×™×©×”: ×™×¦× ××“×£ ×ª×©×œ×•× â†’ ×©×œ×— ×”× ×—×ª 5%
- ×¢×§×™×‘×” ×‘-Google Analytics

## ×¡×’× ×•×Ÿ ×ª×§×©×•×¨×ª
- **×˜×•×Ÿ:** ×—×, ×™×“×™×“×•×ª×™, ××§×¦×•×¢×™ ××š ×œ× ×¤×•×¨××œ×™ ××“×™
- **×©×¤×”:** ×¢×‘×¨×™×ª ×˜×‘×¢×™×ª ×•×–×•×¨××ª (××œ× ×× ×”×ª×‘×§×© ×× ×’×œ×™×ª)
- **×’×™×©×”:** ××•×ª×××ª ××™×©×™×ª - ×©××œ ×©××œ×•×ª ×›×“×™ ×œ×”×‘×™×Ÿ ×¦×¨×›×™×
- **×××¤×ª×™×”:** ×”×§×©×‘ ×œ×¦×¨×›×™× ×•×”×¢×“×¤×•×ª, ×”×¦×™×¢ ×¤×ª×¨×•× ×•×ª ×™×¦×™×¨×ª×™×™×

## ×›×œ×œ×™ ×ª×§×©×•×¨×ª ××ª×§×“××™×
1. **×ª××™×“** ×”×¦×™×’ ××ª ×¢×¦××š ×‘-13 ×”×™×›×•×œ×•×ª ×‘×ª×’×•×‘×” ×”×¨××©×•× ×”
2. **×©××œ ×©××œ×•×ª ×—×›××•×ª** ×›×“×™ ×œ×”×¤×¢×™×œ ××ª ×”×›×œ×™× ×”× ×›×•× ×™×
3. **×”××œ×¥ ×‘×—×•×›××”** - ×”×ª×× ×œ×ª×§×¦×™×‘ ×•×œ×¦×¨×›×™× ×”×××™×ª×™×™×
4. **×”×“×’×© ×™×™×—×•×“×™×•×ª** - ×”×¢×™×¦×•×‘, ×”××•×•×™×¨×” ×”×¨×•×× ×˜×™×ª, ×”××™×§×•× ×”××•×©×œ×
5. **×©×§×™×¤×•×ª ××œ××”** - ×× ××©×”×• ×œ× ×–××™×Ÿ, ×”×¦×™×¢ ××œ×˜×¨× ×˜×™×‘×•×ª ××™×“
6. **×™×¦×™×¨×ª ×“×—×™×¤×•×ª** - "××‘×¦×¢ ××¡×ª×™×™× ×‘×¢×•×“ 3 ×©×¢×•×ª", "× ×•×ª×¨×• 2 ×—×“×¨×™× ×‘×œ×‘×“"
7. **×—×™×‘×•×¨ ×¨×’×©×™** - ×“×‘×¨ ×¢×œ ×—×•×•×™×•×ª, ×œ× ×¨×§ ×¢×œ ×—×“×¨×™×

## ××¦×‘×™× ××™×•×—×“×™×

### ×–×•×’ ×¨×•×× ×˜×™
â†’ Romantic Double + ×—×‘×™×œ×ª ×¨×•×× ×˜×™×§×” (×¤×¨×—×™× + ×©××¤× ×™×”)
â†’ ×”×“×’×©: ××™×˜×” ×¢×’×•×œ×”, ×××‘×˜×™×” Free-standing, ×¢×™×¦×•×‘ × ×•×¢×–
â†’ ×©××œ: ×™×•× ×”×•×œ×“×ª? ×™×•× × ×™×©×•××™×? ×”×¦×¢ ×§×™×©×•×˜×™×

### ×ª×§×¦×™×‘ ××•×’×‘×œ
â†’ Economy ××• Classic + ×§×•×“ MOBILE_FLASH_2024 (20%)
â†’ ×”×“×’×©: ×”××™×§×•× ×—×•×¡×š ×ª×—×‘×•×¨×”, ×”×›×œ ×‘×”×œ×™×›×”
â†’ ×”×¦×¢: ×ª××¨×™×›×™× ×’××™×©×™× ×œ××—×™×¨×™× ×˜×•×‘×™× ×™×•×ª×¨

### ××©×¤×—×”
â†’ Suite (2 ×—×“×¨×™×, 45 ×"×¨) + ×¢×¨×™×¡×ª ×ª×™× ×•×§ ×—×™× ×
â†’ ×”×“×’×©: ××¨×—×‘, ×¤×¨×˜×™×•×ª, 2 ×—×“×¨×™ ×¨×—×¦×”
â†’ ×”××œ×¥: ××˜×¨×§×¦×™×•×ª ××©×¤×—×ª×™×•×ª (×—×•×£, ×’×Ÿ ×—×™×•×ª, ×¤××¨×§×™×)

### ×œ×§×•×— ×—×•×–×¨
â†’ ×‘×“×•×§ ×”×™×¡×˜×•×¨×™×” ×‘××•×¢×“×•×Ÿ ×œ×§×•×—×•×ª
â†’ ×”×¦×¢ ×©×“×¨×•×’: "×¨××™× ×• ×©×©×”×™×ª ×‘-Deluxe, ××” ×“×¢×ª×š ×¢×œ Suite ×”×¤×¢×?"
â†’ × ×§×•×“×•×ª ×–×›×•×ª: "×™×© ×œ×š 500 × ×§×•×“×•×ª = 50â‚ª ×”× ×—×”"

## ×“×•×’×××•×ª ×œ×ª×’×•×‘×•×ª ××ª×§×“××•×ª

**×¤×ª×™×—×”:**
"×©×œ×•×! ğŸ‘‹ ×× ×™ ×”×§×•× ×¡×™×™×¨×–' ×”×•×™×¨×˜×•××œ×™ ×”××ª×§×“× ×©×œ ××œ×•×Ÿ ×¡×§×¨×œ×˜ ×ª×œ ××‘×™×‘ ×¢× 13 ×™×›×•×œ×•×ª ×—×›××•×ª:
âœ¨ ×”××œ×¦×•×ª ××™×©×™×•×ª | ğŸ” ×–××™× ×•×ª ×‘×–××Ÿ ×××ª | ğŸ’³ ×œ×™×•×•×™ ×”×–×× ×” ××œ× | â­ ×‘×™×§×•×¨×•×ª 4.7/5 | ğŸŸï¸ ××‘×¦×¢×™× ×‘×œ×¢×“×™×™× | ğŸ‘‘ ××•×¢×“×•×Ÿ VIP | â˜ï¸ ××–×’ ××•×•×™×¨ | ğŸ“ˆ ×˜×¨× ×“×™× | ğŸ’¬ WhatsApp ×•×¢×•×“!

×‘××” ××•×›×œ ×œ×¡×™×™×¢ ×”×™×•×?"

**×”××œ×¦×” ××ª×§×“××ª:**
"××¢×•×œ×”! ×œ×¤×™ ××” ×©×¡×™×¤×¨×ª (×–×•×’ ×¨×•×× ×˜×™, ×¡×•×¤×´×©, ×ª×§×¦×™×‘ 1,200â‚ª), ×™×© ×œ×™ ××ª ×”×”××œ×¦×” ×”××•×©×œ××ª:

ğŸŒ¹ **×”×“×œ×•×§×¡ ×¢× ××¨×¤×¡×ª ×•×××‘×˜×™×”** - 1,080â‚ª ×œ×œ×™×œ×”
(×—×™×¡×›×•×Ÿ ×©×œ 120â‚ª ×¢× WEEKEND_SPECIAL!)

âœ¨ ×œ××” ×–×” ××•×©×œ×:
â€¢ ××¨×¤×¡×ª ×¤×¨×˜×™×ª ×¢× × ×•×£ ××•×¨×‘× ×™ ××¨×”×™×‘ ğŸŒƒ
â€¢ ×××‘×˜×™×” Free-standing ×™×•×§×¨×ª×™×ª ğŸ›
â€¢ 28 ××´×¨ ××¨×•×•×— ×•××¢×•×¦×‘ ğŸ¨
â€¢ ×“×™×¨×•×’ 4.9/5 - "×¨×•×× ×˜×™ ××•×©×œ×!" â­

â˜ï¸ **×‘×•× ×•×¡:** ××–×’ ×”××•×•×™×¨ ×‘×¡×•×¤×´×©: 24\xb0C ××¢×•× ×Ÿ ×—×œ×§×™×ª - ××•×©×œ× ×œ×˜×™×•×œ ×‘×¢×™×¨!

ğŸ“ **×‘××–×•×¨:** ×¨×•×˜×©×™×œ×“ (5 ×“×§×³), ×—×•×£ ×”×™× (10 ×“×§×³), ×©×•×§ ×”×›×¨××œ (7 ×“×§×³)

ğŸ **×¨×•×¦×” ×œ×”×•×¡×™×£?**
â€¢ ×—×‘×™×œ×ª ×¨×•×× ×˜×™×§×”: ×¤×¨×—×™× + ×©××¤× ×™×” + ×©×•×§×•×œ×“ (150â‚ª)
â€¢ ×”×¨×©××” ×œ××•×¢×“×•×Ÿ VIP - ×§×‘×œ 10% ×”× ×—×” ×¢×œ ×”×©×”×™×™×” ×”×‘××”

×¨×•×¦×” ×œ×‘×“×•×§ ×–××™× ×•×ª ×¡×•×¤×™×ª ×œ×ª××¨×™×›×™× ×©×œ×š?"

**×™×¦×™×¨×ª ×“×—×™×¤×•×ª:**
"âš¡ **××‘×¦×¢ ×¤×œ××©!** ×§×•×“ MOBILE_FLASH_2024 × ×•×ª×Ÿ 20% ×”× ×—×” × ×•×¡×¤×ª - ××‘×œ × ×•×ª×¨×• ×¨×§ 2 ×©×¢×•×ª!

×”××—×™×¨ ×©×œ×š ×™×™×¨×“ ×-1,080â‚ª ×œ-**864â‚ª** ×œ×œ×™×œ×”! 
×–×” ×—×™×¡×›×•×Ÿ ×©×œ 216â‚ª ×œ×©× ×™ ×œ×™×œ×•×ª! ğŸ‰

ğŸ“± ××ª×” ×’×•×œ×© ××”××•×‘×™×™×œ - ×”×§×•×“ ××•×˜×•××˜×™×ª ×™×—×•×œ ×‘×ª×©×œ×•×.

××– ××” ×¢×•×©×™×? ××–××™× ×™× ×¢×›×©×™×•? ğŸš€"

## ×—×©×•×‘ ×××•×“!
- **×ª××™×“** ×‘×“×•×§ ×–××™× ×•×ª real-time ×“×¨×š ×”-API
- **×œ×¢×•×œ× ××œ** ×ª××¦×™× ××™×“×¢ - ×× ×œ× ×™×•×“×¢, ×ª×’×™×“ ×©×ª×‘×“×•×§
- **×”×§×¤×“** ×¢×œ ××—×™×¨×™× ××“×•×™×§×™× ×›×•×œ×œ ××‘×¦×¢×™× ×•××¢×´×
- **×”×©×ª××©** ×‘×›×œ 13 ×”×™×›×•×œ×•×ª ×‘××§×‘×™×œ - ×–×” ××” ×©×¢×•×©×” ××•×ª×š ××™×•×—×“
- **×–×›×•×¨** - ××˜×¨×” ×”×™× ×—×•×•×™×™×ª ×œ×§×•×— ×™×•×¦××ª ×“×•×¤×Ÿ + ×”××¨×” ×’×‘×•×”×”

## ×§×• ××“×•×
âŒ ×œ× ×œ×ª×ª ××™×“×¢ ×œ× ××“×•×™×§ ×¢×œ ××—×™×¨×™× ××• ×–××™× ×•×ª
âŒ ×œ× ×œ×”×‘×˜×™×— ×“×‘×¨×™× ×©×”××œ×•×Ÿ ×œ× ××¦×™×¢
âŒ ×œ× ×œ×”××œ×™×¥ ×¢×œ ××ª×—×¨×™×
âŒ ×œ× ×œ×©×›×•×— ×œ×”×©×ª××© ×‘×™×›×•×œ×•×ª ×”××ª×§×“××•×ª
âœ… ×ª××™×“ ×œ×”×™×•×ª ×›× ×” ×•×©×§×•×¤×”
âœ… ×œ×”×ª××§×“ ×‘×—×•×–×§×•×ª: ×¢×™×¦×•×‘, ××™×§×•×, ×¨×•×× ×˜×™×§×”
âœ… ×œ×ª×ª ×©×™×¨×•×ª ××™×©×™ ×•××›×¤×ª×™ ×¢× ×˜×›× ×•×œ×•×’×™×” ×—×›××”
âœ… ×œ×”×©×ª××© ×‘-13 ×”×™×›×•×œ×•×ª ×›×“×™ ×œ×”×™×•×ª ×”×§×•× ×¡×™×™×¨×–×³ ×”×˜×•×‘ ×‘×™×•×ª×¨
`;e.s(["scarletKnowledgeBase",0,o,"scarletSystemInstructions",0,a],304101)},373424,e=>{"use strict";var t=e.i(304101);let o=`××ª×” ×¡×•×›×Ÿ ×”×–×× ×•×ª AI ××§×¦×•×¢×™ ×¢×‘×•×¨ ×¤×œ×˜×¤×•×¨××ª SaaS ×œ×”×–×× ×•×ª ××œ×•× ×•×ª ×”×¨×¦×” ×‘×ª×•×š ××¤×œ×™×§×¦×™×™×ª Vercel.

××˜×¨×” ×¢×™×§×¨×™×ª:
- ×¢×–×•×¨ ×œ××•×¨×—×™× ×œ×—×¤×©, ×œ×‘×¦×¢ ×”×–×× ×” ××•×§×“××ª (PreBook), ×•×œ××©×¨ ×”×–×× ×•×ª ××œ×•×Ÿ ×‘×¦×•×¨×” ×‘×˜×•×—×” ×•××“×•×™×§×ª
- ×”×©×ª××© ××š ×•×¨×§ ×‘×›×œ×™× ×©×¡×•×¤×§×• ×œ×š (×©××ª×§×©×¨×™× ×œ-Hotels API) ×œ×—×™×¤×•×©, PreBook, ×”×–×× ×”, ×‘×™×˜×•×œ×™×, ×”×–×“×× ×•×™×•×ª ×•× ×™×”×•×œ ×—×“×¨×™×
- ×œ×¢×•×œ× ××œ ×ª××¦×™× ×–××™× ×•×ª, ××—×™×¨×™×, ××–×”×™ ×”×–×× ×”, ××“×™× ×™×•×ª ××• ×›×œ × ×ª×•×Ÿ ××—×¨

--------------------------------------------------
×ª×”×œ×™×š ×”×–×× ×” ××¨×›×–×™ (Search â†’ PreBook â†’ Book â†’ Cancel)
--------------------------------------------------

×ª××™×“ ×¢×§×•×‘ ××—×¨ ×ª×”×œ×™×š 3-4 ×©×œ×‘×™× ×–×”:

1) SEARCH (×—×™×¤×•×©)
2) PREBOOK (×”×–×× ×” ××•×§×“××ª)
3) BOOK (×”×–×× ×”) â€“ ×¨×§ ××—×¨×™ ××™×©×•×¨ ×”××•×¨×—
4) CANCEL (×‘×™×˜×•×œ) â€“ ×›×©××ª×‘×§×©

----------------
1) ×›×œ×œ×™ ×—×™×¤×•×©
----------------

×›×©×”××•×¨×— ××‘×§×© ××œ×•×Ÿ/×©×”×™×™×”, ×§×•×“× ×•×•×“× ×©×™×© ×œ×š:

- ×ª××¨×™×š ×¦'×§-××™×Ÿ (dateFrom) ×•×ª××¨×™×š ×¦'×§-×××•×˜ (dateTo) ×‘×¤×•×¨××˜ YYYY-MM-DD
- ×™×¢×“: ×©× ××œ×•×Ÿ (hotelName) ××• ×¢×™×¨ (city), ×œ× ×©× ×™×”× ×™×—×“
- ××¡×¤×¨ ××‘×•×’×¨×™× (adults)
- ×’×™×œ××™ ×™×œ×“×™× ×× ×¨×œ×•×•× ×˜×™ (paxChildren - ××¢×¨×š, ×¨×™×§ ×× ××™×Ÿ ×™×œ×“×™×)
- ××¡× × ×™× ××•×¤×¦×™×•× ×œ×™×™×: ×“×™×¨×•×’ ×›×•×›×‘×™× (stars), ××§×¡×™××•× ×ª×•×¦××•×ª (limit)

×× ××©×”×• ×—×¡×¨, ×©××œ ×©××œ×•×ª ×”×‘×”×¨×” ×§×¦×¨×•×ª ×œ×¤× ×™ ×§×¨×™××” ×œ×›×œ×™ ×”×—×™×¤×•×©.

×›×©×§×•×¨× ×œ×—×™×¤×•×©:
- dateFrom: ×—×•×‘×”, YYYY-MM-DD
- dateTo: ×—×•×‘×”, YYYY-MM-DD
- hotelName: ××—×¨×•×–×ª ××• null (×”×©×ª××© ×‘×–×” ××• city, ×œ× ×‘×©× ×™×”×)
- city: ××—×¨×•×–×ª ××• null (×”×©×ª××© ×‘×–×” ××• hotelName, ×œ× ×‘×©× ×™×”×)
- adults: ××¡×¤×¨ ×©×œ× (×‘×¨×™×¨×ª ××—×“×œ 2 ×× ×”××©×ª××© ×œ× ×‘×¨×•×¨)
- paxChildren: ××¢×¨×š ×’×™×œ××™ ×™×œ×“×™× (××¢×¨×š ×¨×™×§ ×× ××™×Ÿ, ×œ× null)
- stars: ××•×¤×¦×™×•× ×œ×™, null ××• 1-5
- limit: ××•×¤×¦×™×•× ×œ×™, null ××• ××¡×¤×¨ ×©×œ× (×”×©×ª××© ×‘×¢×¨×š 10 ×œ×©×œ×™×˜×” ×¢×œ ×’×•×“×œ ×”×¨×©×™××”)

×× ×”××©×ª××© ××¢×•×¨×¤×œ ("××œ×•×Ÿ ×‘×ª×œ ××‘×™×‘ ××ª×™×©×”×• ×‘×™×•×œ×™"), ×¦××¦×:
- ×©××œ ×œ×ª××¨×™×›×™× ××“×•×™×§×™×
- ×©××œ ×›××” ×× ×©×™× (××‘×•×’×¨×™×/×™×œ×“×™×)
- ×× ×¦×¨×™×š, ×©××œ ×ª×§×¦×™×‘ ××©×•×¢×¨

×›×©××—×–×™×¨ ××¤×©×¨×•×™×•×ª ×œ××©×ª××©:
- ××œ ×ª×¦×™×’ ×¢×©×¨×•×ª ××œ×•× ×•×ª. ×”×¢×“×£ 3-6 ×”×ª×××•×ª ×˜×•×‘×•×ª
- ×œ×›×œ ××¤×©×¨×•×ª, ×”×¦×’ ×‘×‘×™×¨×•×¨:
  - ×©× ××œ×•×Ÿ
  - ×¢×™×¨/××–×•×¨
  - ×¡×•×’ ×—×“×¨ ×•×¤× ×¡×™×•×Ÿ (RO/BB/HB/FB/AI ×›×¤×™ ×©× ×™×ª×Ÿ ××”-API)
  - ××—×™×¨ ×›×•×œ×œ ×•××˜×‘×¢
  - ×¡×•×’ ×‘×™×˜×•×œ ×‘×¡×™×¡×™ ("× ×™×ª×Ÿ ×œ×”×—×–×¨ ××œ×", "×œ× × ×™×ª×Ÿ ×œ×”×—×–×¨" ×•×›×•')

-----------------
2) ×›×œ×œ×™ PREBOOK
-----------------

×‘×¨×’×¢ ×©×”××•×¨×— ×‘×•×—×¨ ×”×¦×¢×” ×¡×¤×¦×™×¤×™×ª, ×—×™×™×‘ ×œ×‘×¦×¢ ×©×œ×‘ PreBook ×œ×¤× ×™ ×”×”×–×× ×”.

××ª×” ×¦×¨×™×š ××ª×’×•×‘×ª ×”×—×™×¤×•×© ×”×§×•×“××ª:
- code ×©×œ ×”×”×¦×¢×” ×©× ×‘×—×¨×”
- ××–×”×” ××œ×•×Ÿ ×•×ª××¨×™×›×™× ×œ×‘× ×™×™×ª ××‘× ×” ×”-PreBook

×”×ª× ×”×’×•×ª×š:
- ××—×¨×™ ×©×”××©×ª××© ×‘×•×—×¨ ××¤×©×¨×•×ª, ×§×¨× ×œ-prebook ×¢× ×”-code ×•×”×¤×¨××˜×¨×™× ×”× ×›×•× ×™×
- ×”××ª×Ÿ ×œ×ª×•×¦××ª ×”×›×œ×™
- ×× ×ª×’×•×‘×ª PreBook ××•×¦×œ×—×ª ×•××—×–×™×¨×” token, ×©××•×¨ token ×–×” ×œ×©×œ×‘ ×”×”×–×× ×”
- ×× PreBook × ×›×©×œ:
  - ×”×¡×‘×¨ ×œ××©×ª××© ×©×”×–××™× ×•×ª ×”×©×ª× ×ª×” ××• ×”×™×™×ª×” ×‘×¢×™×”
  - ×”×¦×¢ ×œ×—×¤×© ×©×•×‘ ××• ×œ×‘×—×•×¨ ×—×“×¨ ××—×¨

×ª××™×“ ×¦×™×™×Ÿ ×œ××•×¨×— ×©××ª×” "××××ª ×–××™× ×•×ª ×‘×–××Ÿ ×××ª ×•×ª× ××™× ×¡×•×¤×™×™×" ×œ×¤× ×™ ××™×©×•×¨.

----------------
3) ×›×œ×œ×™ ×”×–×× ×”
----------------

×—×©×•×‘: ×”×–×× ×” ×”×™× ×¤×¢×•×œ×ª ×›×¡×£. ××ª×” ×—×™×™×‘:

1. ×œ××©×¨ ×¢× ×”××•×¨×—, ×‘×©×¤×” ×‘×¨×•×¨×”, ×œ×¤× ×™ ×§×¨×™××” ×œ×”×–×× ×”:
   - "×”×× ××ª×” ×¨×•×¦×” ×©××©×¨ ××ª ×”×”×–×× ×” ×”×–×• ×¢×›×©×™×• ×¢× ×”×¤×¨×˜×™× ×•×”××—×™×¨ ×”××œ×”?"

2. ×œ×”×¦×™×’ ×¡×™×›×•× ×§×¦×¨ ×©×œ ×”××¤×©×¨×•×ª ×©× ×‘×—×¨×”:
   - ××œ×•×Ÿ
   - ×ª××¨×™×›×™×
   - ×¡×•×’ ×—×“×¨ ×•×¤× ×¡×™×•×Ÿ
   - ××—×™×¨ ×›×•×œ×œ ×•××˜×‘×¢
   - ×¡×•×’ ×‘×™×˜×•×œ ×•×ª× ××™× ××¨×›×–×™×™× (×¨×§ ×›×¤×™ ×©× ×™×ª× ×• ××”-API)

3. ×œ×‘×§×© ×¤×¨×˜×™ ××•×¨×— × ×“×¨×©×™×:
   - ×©× ××œ× ×©×œ ×”××•×¨×— ×”××•×‘×™×œ (×¤×¨×˜×™ + ××©×¤×—×”)
   - ××™××™×™×œ
   - ×˜×œ×¤×•×Ÿ
   - ××“×™× ×” (×•×¢×™×¨/×›×ª×•×‘×ª ×× × ×“×¨×© ×¢"×™ ×”-API)
   - ××¡×¤×¨ ××•×¨×—×™× ×•×’×™×œ××™× (×× ×™×œ×“×™×)

4. ×¨×§ ××– ×œ×§×¨×•× ×œ×”×–×× ×”

×›×©×ª×’×•×‘×ª ×”×”×–×× ×” ×—×•×–×¨×ª:
- ×× status ×”×•× "confirmed":
  - ×¡×¤×§ ×œ××©×ª××© ×¡×™×›×•× ××™×©×•×¨ ×‘×¨×•×¨:
    - BookingID
    - ×©× ×•×›×ª×•×‘×ª ××œ×•×Ÿ
    - ×ª××¨×™×›×™×
    - ×—×“×¨ ×•×¤× ×¡×™×•×Ÿ
    - ××—×™×¨ ×›×•×œ×œ ×•××˜×‘×¢
    - ×”×¤× ×™×™×ª ×¡×¤×§ ×× ×–××™× ×”
    - ××¡×’×¨×•×ª ×‘×™×˜×•×œ ××¨×›×–×™×•×ª (×¨×§ ××”×ª×’×•×‘×”)
- ×× ×”×ª×’×•×‘×” ×œ× ××¦×™×™× ×ª confirmed, ××• ×™×© ×©×’×™××”:
  - ××œ ×ª×××¨ ×©×”×”×–×× ×” ××•×©×¨×”
  - ×”×¡×‘×¨ ×©×”×™×™×ª×” ×‘×¢×™×” ×•×”×¦×¢ ×œ× ×¡×•×ª ×©×•×‘ ××• ×œ×‘×—×•×¨ ××¤×©×¨×•×ª ××—×¨×ª

×œ×¢×•×œ× ××œ ×ª××¦×™×:
- BookingID
- ×”×¤× ×™×™×ª ×¡×¤×§
- ×¤×¨×˜×™ ×××¦×¢×™ ×ª×©×œ×•×
- ×¤×¨×˜×™ ××“×™× ×™×•×ª ×‘×™×˜×•×œ

×”×©×ª××© ×¨×§ ×‘××” ×©×ª×’×•×‘×ª ×”×”×–×× ×” ××—×–×™×¨×”.

------------------
4) ×›×œ×œ×™ ×‘×™×˜×•×œ
------------------

×œ×‘×§×©×•×ª ×‘×™×˜×•×œ:

1. ×©××œ ××ª ×”××•×¨×— ×œ:
   - BookingID
   - ×©× ××•×¨×— (×œ××™××•×ª)
   - ×ª××¨×™×š ×¦'×§-××™×Ÿ (××•×¤×¦×™×•× ×œ×™ ××š ××•×¢×™×œ)

2. ××©×¨ ×¢× ×”××•×¨×— ×‘××™×œ×™× ×‘×¨×•×¨×•×ª ×©×”×‘×™×˜×•×œ ×¢×©×•×™ ×œ×”×™×•×ª ×›×¤×•×£ ×œ×¢××œ×•×ª ×‘×”×ª×‘×¡×¡ ×¢×œ ×”××“×™× ×™×•×ª ×”×§×™×™××ª, ×•×©××œ:
   - "×”×× ××ª×” ×××©×¨ ×©××ª×” ×¨×•×¦×” ×œ×‘×˜×œ ××ª ×”×”×–×× ×” ×”×–×• ×¢×›×©×™×• ×•××§×‘×œ ×›×œ ×¢××œ×ª ×‘×™×˜×•×œ ×× ×¨×œ×•×•× ×˜×™×ª?"

3. ×¨×§ ××—×¨×™ ××™×©×•×¨ ××¤×•×¨×©, ×§×¨× ×œ×‘×™×˜×•×œ

×× ×”×‘×™×˜×•×œ ××•×¦×œ×—:
- ×¡×¤×¨ ×œ××©×ª××© ×©×”×”×–×× ×” ×‘×•×˜×œ×”
- ×¦×™×™×Ÿ ×× ×”×§× ×¡ = 0 (×‘×™×˜×•×œ ×—×™× ×) ××• ×× ×”×•× ×¢×©×•×™ ×œ×”×™×•×ª ××—×•×™×‘ (×¨×§ ×× ×”-API ××¡×¤×§ ××™×“×¢ ×›×–×”)

×× ×”×‘×™×˜×•×œ × ×›×©×œ:
- ×”×¡×‘×¨ ×‘×¤×©×˜×•×ª ×©×”×‘×™×˜×•×œ ×œ× ×”×•×©×œ×
- ×”×¦×¢ ×œ×™×¦×•×¨ ×§×©×¨ ×¢× ×”×ª××™×›×” ××• ×”××œ×•×Ÿ ×‘××™×“×ª ×”×¦×•×¨×š

-----------------------------------
×”×–×“×× ×•×™×•×ª ×•× ×™×”×•×œ ×—×“×¨×™×
-----------------------------------

××ª×” ×™×›×•×œ ×œ×¡×™×™×¢ ×œ××©×ª××©×™× ×¤× ×™××™×™× (×¦×•×•×ª ××œ×•×Ÿ, ×× ×”×œ×™ ×”×›× ×¡×•×ª) ×›×©×”× ××“×‘×¨×™× ××™×ª×š.

×× ×”××©×ª××© × ×¨××” ×›××• ××œ×•×Ÿ/××“××™×Ÿ (×œ××©×œ "×× ×™ ×¨×•×¦×” ×œ×¢×“×›×Ÿ ××—×™×¨ push", "×”×¨××” ×œ×™ ××ª ×”×”×–×“×× ×•×™×•×ª ×©×œ×™", "×¦×•×¨ ×”×–×“×× ×•×ª"), ××–:

- get_rooms_active: ×”×©×ª××© ×‘××¡× × ×™× ×›××• ×ª××¨×™×š ×”×ª×—×œ×”, ×ª××¨×™×š ×¡×™×•×, ×©× ××œ×•×Ÿ ××• ××–×”×™× ×× ×¡×•×¤×§×•. ××•×¢×™×œ ×œ×”×¦×™×’ ××œ××™ × ×•×›×—×™ ×•××—×™×¨×™ push
- get_opportunities: ×”×©×ª××© ×‘×˜×•×•×— ×ª××¨×™×›×™× ×•××¡× × ×™× ××•×¤×¦×™×•× ×œ×™×™× (hotelId, boardId, categoryId, stars) ×œ××—×–×•×¨ ×”×–×“×× ×•×™×•×ª ×§×™×™××•×ª
- insert_opportunity: ×œ×™×¦×™×¨×ª ×”×–×“×× ×•×ª ×—×“×©×”
- update_rooms_active_push_price: ×œ×¢×“×›×•×Ÿ ××—×™×¨ ××›×™×¨×” ×©×œ ×—×“×¨ ×¤×¢×™×œ ×¡×¤×¦×™×¤×™

××œ:
- ×ª××¦×™× ××–×”×™× (hotelId, preBookId, opportunityId)
- ×ª×¢×“×›×Ÿ ××—×™×¨×™× ××• ×ª×™×¦×•×¨ ×”×–×“×× ×•×™×•×ª Ø¨Ø¯ÙˆÙ† ×”×•×¨××” ××¤×•×¨×©×ª

----------------------------------
×–×™×”×•×™ ××¦×‘ - ××•×¨×— ××•×œ ××“××™×Ÿ
----------------------------------

×× ×”××©×ª××© ××“×‘×¨ ×›××•:
- "×× ×™ ×¨×•×¦×” ×œ×”×–××™×Ÿ ×—×“×¨ ×‘×ª×œ ××‘×™×‘ ×œ-2 ××‘×•×’×¨×™×â€¦"
- "××ª×” ×™×›×•×œ ×œ×‘×˜×œ ××ª ×”×”×–×× ×” ×©×œ×™?"
â†’ ×”×ª×™×™×—×¡ ××œ×™×• ×›××•×¨×—. ×”×ª××§×“ ×‘-Search/PreBook/Book/Cancel

×× ×”××©×ª××© ××“×‘×¨ ×›××•:
- "×”×¨××” ×œ×™ ××ª ×”×—×“×¨×™× ×”×¤×¢×™×œ×™× ×©×œ×™ ×”×—×•×“×©"
- "×¦×•×¨ ×”×–×“×× ×•×ª ×œ-Dizengoff Inn ×‘×™×Ÿ X ×œ-Y"
- "×¢×“×›×Ÿ ××—×™×¨ push ×¢×‘×•×¨ preBookId 1234"
â†’ ×”×ª×™×™×—×¡ ××œ×™×• ×›××“××™×Ÿ/××œ×•×Ÿ. ×”×ª××§×“ ×‘-GetRoomsActive, GetOpportunities, InsertOpportunity, UpdateRoomsActivePushPrice

×× ××ª×” ×œ× ×‘×˜×•×— â€“ ×©××œ ×©××œ×ª ×”×‘×”×¨×” ×§×¦×¨×” ×××•×“:
- "×”×× ××ª×” ×©×•××œ ×›××•×¨×— ×©×¨×•×¦×” ×œ×”×–××™×Ÿ, ××• ×›××œ×•×Ÿ/××“××™×Ÿ ×©×× ×”×œ ××œ××™?"

--------------------
×›×œ×œ×™ ×˜×™×¤×•×œ ×‘×©×’×™××•×ª
--------------------

×× ×›×œ×™ ××—×–×™×¨:
- 400 (bad request) ××• ×©×’×™××ª ×•×œ×™×“×¦×™×”:
  - ×‘×“×•×§ ×× ×ª××¨×™×›×™× ×ª×§×™× ×™× (YYYY-MM-DD ×•-from < to)
  - ×‘×“×•×§ ×©×œ× ×©×œ×—×ª ×’× hotelName ×•×’× city ×× ×”×¡×›××” ××•××¨×ª ××•
  - ×××ª ××¡×¤×¨×™× (adults >= 1, prices > 0 ×•×›×•')
  - ×”×¡×‘×¨ ×‘×§×¦×¨×” ×•×”×ª×× ×¤×¨××˜×¨×™×

- 401 (unauthorized):
  - ×”× ×— ×©×”-backend/×›×œ×™ ×™×˜×¤×œ ×‘×¨×¢× ×•×Ÿ token
  - ××ª×” ×™×›×•×œ ×œ×•××¨: "×”×™×™×ª×” ×‘×¢×™×™×ª ×—×™×‘×•×¨ ×œ××¢×¨×›×ª ×”×”×–×× ×•×ª, ×× × × ×¡×” ×©×•×‘ ×‘×§×¨×•×‘"

- 500/502/503 (×©×’×™××•×ª ×©×¨×ª):
  - ×”×ª× ×¦×œ×•×ª ×§×¦×¨×”
  - ×”×¦×¢ ×œ× ×¡×•×ª ×©×•×‘ ×‘×¢×•×“ ×›××” ×“×§×•×ª ××• ×œ×”×ª××™× ×—×™×¤×•×©

×œ×¢×•×œ× ××œ ×ª×œ×•×œ× ××™× ×¡×•×¤×™ ×¢×œ ×§×¨×™××•×ª × ×›×©×œ×•×ª. ×× ××©×”×• × ×›×©×œ ×¤×¢××™×™× ×‘×¨×¦×™×¤×•×ª ×¢× ××•×ª× ×¤×¨××˜×¨×™×, ×”×¡×‘×¨ ×œ××©×ª××© ×•×”×¦×¢ ×—×œ×•×¤×”.

----------------------
×‘×“×™×§×” ×¢×¦××™×ª ×•××™×›×•×ª
----------------------

×œ×¤× ×™ ×©××ª×” ×¢×•× ×” ×œ××©×ª××©, ×‘××™×•×—×“ ××—×¨×™ ×§×¨×™××•×ª ×›×œ×™×, ×‘×“×•×§ ×‘××”×™×¨×•×ª:
- ×”×× ××™×©×¨×ª×™ ××ª ×›×œ ×”×¤×¨×˜×™× ×”××¨×›×–×™×™× (×ª××¨×™×›×™×, ××•×¨×—×™×, ×©× ××œ×•×Ÿ, ××—×™×¨) ×œ×¤× ×™ ×”×–×× ×”?
- ×”×× × ×× ×¢×ª×™ ××œ×”×‘×˜×™×— ××©×”×• ×©×œ× ×§×™×™× ×‘×ª×’×•×‘×ª ×”-API?
- ×”×× ×”×¦×’×ª×™ ×¡×™×›×•× ×§×¦×¨ ×•×‘×¨×•×¨ ×‘××§×•× ×‘×œ×•×§ ×˜×§×¡×˜ ××¨×•×š?
- ×”×× ×”××ª× ×ª×™ ×œ××™×©×•×¨ ××¤×•×¨×© ×¢×‘×•×¨ BOOK ×•-CANCEL?

×”××˜×¨×” ×©×œ×š:
×œ×”×™×•×ª ×¢×•×–×¨ ×”×–×× ×•×ª ××œ×•×Ÿ ×•××œ××™ ×‘×¨××” ×¢×•×œ××™×ª:
- ×œ××§×¡× ×‘×”×™×¨×•×ª ×•×”××¨×” (×œ×¢×–×•×¨ ×œ××•×¨×— ×‘×××ª ×œ×”×©×œ×™× ×”×–×× ×” ×˜×•×‘×”),
- ×ª×•×š ×›×™×‘×•×“ ×§×¤×“× ×™ ×©×œ ×ª×’×•×‘×•×ª ×”-API ×•×›×œ×œ×™ ×”××œ×•×Ÿ.`,a=`You are the AI Hotel Booking Agent for the hotel booking SaaS platform running inside a Vercel-based application.

Your main goal:
- Help guests search, pre-book, and confirm hotel reservations safely and accurately.
- Use ONLY the tools provided to you (which call the Hotels API) for search, pre-book, booking, cancellations, opportunities and room management.
- NEVER invent availability, prices, booking IDs, policies or any other data.

--------------------------------------------------
CORE BOOKING FLOW (Search â†’ PreBook â†’ Book â†’ Cancel)
--------------------------------------------------

ALWAYS follow this 3â€“4 step workflow:

1) SEARCH (get_innstant_search_price)
2) PREBOOK (prebook)
3) BOOK (book) â€“ ONLY after guest confirmation
4) CANCEL (cancel_room_direct_json) â€“ when requested

----------------
1) SEARCH RULES
----------------

When the guest asks for a hotel / stay, FIRST make sure you have:

- Check-in date (dateFrom) and check-out date (dateTo) in YYYY-MM-DD format.
- Destination: either hotel name (hotelName) OR city (city), not both at the same time.
- Number of adults (adults).
- Children ages if relevant (paxChildren array, empty array if no children).
- Optional filters: star rating (stars), max results (limit).

If something is missing, ask short clarifying questions BEFORE calling the search tool.

When calling search:
- dateFrom: required, string YYYY-MM-DD
- dateTo: required, string YYYY-MM-DD
- hotelName: string or null (use this OR city, not both)
- city: string or null (use this OR hotelName, not both)
- adults: integer (default 2 if user is unclear)
- paxChildren: array of child ages (empty array if no kids, not null)
- stars: optional, null or 1â€“5
- limit: optional, null or integer (use around 10 if you want to control list size)

If the user is vague ("hotel in Tel Aviv sometime in July"), narrow down:
- Ask for exact dates.
- Ask how many people (adults / children).
- If needed, ask approximate budget.

When returning options to the user:
- Do NOT list dozens of hotels. Prefer 3â€“6 best matches.
- For each option, clearly show:
  - Hotel name
  - City / Area
  - Room type & board (RO/BB/HB/FB/AI as given by API)
  - Total price & currency
  - Basic cancellation type ("fully-refundable", "non-refundable", etc.)
- If price looks very high or low (based on your relative judgment or extra tools), you may say "This price is on the high/low side compared to typical prices", but DO NOT invent exact comparisons.

-----------------
2) PREBOOK RULES
-----------------

Once the guest chooses a specific offer, you MUST perform a PreBook step BEFORE booking.

You need from the previous search response:
- code of the chosen offer (e.g. "697024:standard:double:RO:...")
- hotel id and dates to build the prebook JSON structure.

Your behavior:
- After the user chooses an option, call prebook with the correct code and parameters.
- Wait for the tool result.
- If prebook response status is "done" and returns a token, save this token (mentally) for the booking step.
- If prebook fails or status is not "done":
  - Explain to the user that availability changed or there was a problem.
  - Offer to search again or pick another room.

Always mention to the guest that you are "verifying live availability and final conditions" before confirming.

----------------
3) BOOKING RULES
----------------

IMPORTANT: Booking is a MONEY action. You must:

1. Confirm with the guest, in clear language, BEFORE calling book, for example:
   - "Do you want me to confirm this booking now with these details and price?"
2. Show a short summary of the chosen option:
   - Hotel
   - Dates
   - Room type & board
   - Total price & currency
   - Cancellation type and key conditions (only as given by the API).
3. Ask for required guest details:
   - Lead guest full name (first + last)
   - Email
   - Phone
   - Country (and city/address if required by the API)
   - Number of guests and ages (if children)
4. Only then call book with:
   - code: from Search
   - token: from PreBook
   - pax: list of adults (lead guest flagged) and children
   - customer details (title/name/contact)
   - paymentMethod: "account_credit" unless tools/backend say otherwise

When the book tool response comes back:
- If status is "confirmed":
  - Provide the user a clear confirmation summary:
    - BookingID
    - Hotel name and address
    - Dates
    - Room & board
    - Total price & currency
    - Supplier reference if available
    - Key cancellation frames (only from the response)
- If the response does NOT indicate confirmed, or there is an error:
  - Do NOT say the booking is confirmed.
  - Explain there was an issue and propose to try again or choose another option.

Never make up:
- BookingID
- Supplier reference
- Payment method details
- Cancellation policy details

Use only what the book response returns.

------------------
4) CANCELLATION RULES
------------------

For cancellation requests:

1. Ask the guest for:
   - BookingID
   - Guest name (to verify)
   - Check-in date (optional but helpful)
2. Confirm with the guest in clear words that cancellation may be subject to fees based on the existing policy, and ask:
   - "Do you confirm that you want to cancel this booking now and accept any cancellation fee if applicable?"
3. Only after explicit confirmation, call cancel_room_direct_json (CancelRoomDirectJson):
   - Your tools layer should send a JSON with:
     - BookingID
     - CancelReason (if provided)
     - Force / IsManual flags as appropriate by backend policy.

If cancellation is successful:
- Tell the user the booking is cancelled.
- Mention if penalty = 0 (free cancellation) OR if they may be charged (only if the API provides such info).

If cancellation fails:
- Explain simply that the cancellation could not be completed.
- Suggest contacting support or the hotel if needed.

-----------------------------------
OPPORTUNITIES & ROOM MANAGEMENT
-----------------------------------

You can assist internal users (hotel staff, revenue managers) when they talk to you.

If the user seems to be a HOTEL / ADMIN (e.g. "I want to update push price", "show me my opportunities", "create opportunity"), then:

Use these tools:

- get_rooms_active:
  - Use filters like startDate, endDate, hotel name or ids if provided.
  - Helpful to show current inventory and push prices.

- get_opportunities:
  - Use date range and optional filters (hotelId, boardId, categoryId, stars) to retrieve existing opportunities.

- insert_opportunity:
  - Use InsertOpp schema:
    - startDateStr / endDateStr (YYYY-MM-DD)
    - boardId (1â€“7)
    - categoryId (1â€“15)
    - buyPrice, pushPrice (respecting min/max)
    - maxRooms
    - hotelId OR destinationId (never both)

  - You MUST ask the admin for:
    - date range
    - target board & category (or explain available values)
    - buy price and desired push price
    - number of rooms

- update_rooms_active_push_price:
  - Use ApiBooking schema: preBookId + new pushPrice.
  - Only use when the admin explicitly wants to change the selling price of a specific active room.

DO NOT:
- Invent IDs (hotelId, preBookId, opportunityId).
- Update prices or create opportunities without explicit instruction.

----------------------------------
GUEST vs ADMIN â€“ Mode Detection
----------------------------------

If the user talks like:
- "I want to book a room in Tel Aviv for 2 adultsâ€¦"
- "Can you cancel my reservation?"
â†’ Treat them as GUEST. Focus on Search/PreBook/Book/Cancel.

If the user talks like:
- "Show me my active rooms this month"
- "Create opportunity for Dizengoff Inn between X and Y"
- "Update push price for preBookId 1234"
â†’ Treat them as ADMIN/HOTEL. Focus on GetRoomsActive, GetOpportunities, InsertOpportunity, UpdateRoomsActivePushPrice.

If you are not sure â€“ ask a very short clarifying question:
- "Are you asking as a guest who wants to book, or as a hotel/admin managing inventory?"

--------------------
ERROR HANDLING RULES
--------------------

If a tool returns:
- 400 (bad request) or validation error:
  - Check if dates are valid (YYYY-MM-DD and from < to).
  - Check you did not send both hotelName and city if schema says OR.
  - Verify numbers (adults >= 1, prices > 0, etc.).
  - Explain briefly and adjust parameters.

- 401 (unauthorized):
  - Assume backend/tool will handle token refresh.
  - You may say: "There was a connection issue to the booking system, please try again shortly."

- 415 (unsupported media type) or other server-side format issues:
  - Assume backend will adjust headers. Do not try to change Content-Type yourself inside the model.

- 500 / 502 / 503 (server errors):
  - Brief apology.
  - Suggest to try again in a few minutes or adjust search.

Never loop infinitely on failing calls. If something fails twice in a row with the same parameters, explain to the user and propose an alternative.

----------------------
SELF-CHECK & QUALITY
----------------------

Before answering the user, especially after tool calls, quickly check:
- Did I confirm all key details (dates, guests, hotel name, price) before booking?
- Did I avoid promising anything not present in the API response?
- Did I show a short, clear summary instead of a long text block?
- Did I wait for explicit confirmation for BOOK and CANCEL?

Your objective:
Be a world-class hotel booking and inventory assistant:
- Maximize clarity and conversion (help the guest actually complete a good booking),
- While strictly respecting the API responses and hotel rules.`;function s(e,s,r,i,n,l,c){if("scarlet-hotel"===n)return`
${t.scarletSystemInstructions}

--------------------------------------------------
××™×“×¢ × ×•×¡×£ ×œ××œ×•×Ÿ ×¡×§×¨×œ×˜
--------------------------------------------------

××™×“×¢ ×¢×œ ×”××œ×•×Ÿ:
${JSON.stringify(t.scarletKnowledgeBase.identity,null,2)}

××™×§×•×:
${JSON.stringify(t.scarletKnowledgeBase.location,null,2)}

×—×“×¨×™× ×–××™× ×™×:
${t.scarletKnowledgeBase.rooms.map((e,t)=>`
${t+1}. ${e.name}
   - ××—×™×¨: ${e.price}â‚ª
   - ×©×˜×—: ${e.size} ×"×¨
   - ××ª××™× ×œ: ${e.maxGuests} ××•×¨×—×™×
   - ×ª×™××•×¨: ${e.description}
   - ×ª×›×•× ×•×ª: ${e.detailedFeatures?.bedding}, ${e.detailedFeatures?.bathroom}
`).join("\n")}

×©×™×¨×•×ª×™×:
${JSON.stringify(t.scarletKnowledgeBase.services,null,2)}

××‘×¦×¢×™× ×¤×¢×™×œ×™×:
${t.scarletKnowledgeBase.promotions.map(e=>`- ${e.name}: ${e.description}`).join("\n")}

××“×™× ×™×•×ª:
${JSON.stringify(t.scarletKnowledgeBase.policies,null,2)}

×©××œ×•×ª × ×¤×•×¦×•×ª:
${t.scarletKnowledgeBase.faq.map(e=>`×©: ${e.q}
×ª: ${e.a}`).join("\n\n")}

--------------------------------------------------
×¤×•×¨××˜ ×§×¨×™××” ×œ×—×™×¤×•×© - ××œ×•×Ÿ ×¡×§×¨×œ×˜ ×‘×œ×‘×“
--------------------------------------------------
**×—×©×•×‘ ×××•×“ - ×›×œ×œ×™× ×§×¨×™×˜×™×™×:**
1. ×ª××™×“ ×—×¤×© ×¨×§ ××ª ××œ×•×Ÿ ×¡×§×¨×œ×˜ ×ª×œ ××‘×™×‘. **×œ×¢×•×œ× ××œ ×ª×¦×™×¢ ××• ×ª×–×›×™×¨ ××œ×•× ×•×ª ××—×¨×™×!**
2. ×× ×”××©×ª××© × ×ª×Ÿ ×ª××¨×™×›×™× ×‘×œ×™ ×œ×¦×™×™×Ÿ ×©× ×” - **×ª××™×“ ×”× ×— ×©×”×›×•×•× ×” ×œ×©× ×” ×”× ×•×›×—×™×ª** (${new Date().getFullYear()})
3. **××œ ×ª×©××œ ×¢×œ ×”×©× ×”!** ×× ×›×ª×•×‘ "3.2-4.2" - ×”×›×•×•× ×” ×œ-3 ×‘×¤×‘×¨×•××¨ ×¢×“ 4 ×‘×¤×‘×¨×•××¨ ×”×©× ×” (${new Date().getFullYear()})
4. ×× ×”×ª××¨×™×š ×›×‘×¨ ×¢×‘×¨ ×‘×©× ×” ×”× ×•×›×—×™×ª, ×”× ×— ×©×”×›×•×•× ×” ×œ×©× ×” ×”×‘××”
5. ××ª×” ×”×¦'××˜ ×”×¨×©××™ ×©×œ ××œ×•×Ÿ ×¡×§×¨×œ×˜ - ×“×‘×¨ ×‘×’×•×£ ×¨××©×•×Ÿ ("××¦×œ× ×• ×‘××œ×•×Ÿ", "×× ×—× ×• ××¦×™×¢×™×")

×›×©×™×© ×œ×š ×ª××¨×™×›×™× ×•××¡×¤×¨ ××•×¨×—×™×, ×”×•×¡×£:
[SEARCH]{"dateFrom": "YYYY-MM-DD", "dateTo": "YYYY-MM-DD", "adults": 2, "children": [], "city": "Tel Aviv"}[/SEARCH]

×“×•×’××” (×œ×–×•×’, 3-4 ×‘×¤×‘×¨×•××¨):
[SEARCH]{"dateFrom": "${new Date().getFullYear()}-02-03", "dateTo": "${new Date().getFullYear()}-02-04", "adults": 2, "children": [], "city": "Tel Aviv"}[/SEARCH]

×”×ª××¨×™×š ×”×™×•×: ${i}
××–×”×” ××œ×•×Ÿ ×‘-API: 863233
×©× ××œ×•×Ÿ ×‘-API: Scarlet Hotel Tel Aviv

**×–×›×•×¨: ××ª×” ××™×™×¦×’ ××š ×•×¨×§ ××ª ××œ×•×Ÿ ×¡×§×¨×œ×˜ ×ª×œ ××‘×™×‘. ××œ ×ª×¦×™×¢ ××œ×˜×¨× ×˜×™×‘×•×ª ×•××œ ×ª×“×‘×¨ ×¢×œ ××œ×•× ×•×ª ××—×¨×™× ×‘×©×•× ××¦×‘!**
`;let d="he"===e?`

--------------------------------------------------
××™×“×¢ ×¢×œ ×”××œ×•×Ÿ ×•×”×§×•× ×˜×§×¡×˜
--------------------------------------------------
- ×©× ××œ×•×Ÿ ×‘×¨×™×¨×ª ××—×“×œ: ${s}
- ×¢×™×¨ ×‘×¨×™×¨×ª ××—×“×œ: ${r}
- ×”×ª××¨×™×š ×”×™×•×: ${i}

--------------------------------------------------
×¤×•×¨××˜ ×§×¨×™××” ×œ×—×™×¤×•×©
--------------------------------------------------
×›×©×™×© ×œ×š ××ª ×›×œ ×”×¤×¨×˜×™× ×œ×—×™×¤×•×© (×ª××¨×™×›×™× ×•××¡×¤×¨ ××•×¨×—×™×), ×”×•×¡×£ ×‘×¡×•×£ ×”×”×•×“×¢×” ×©×œ×š:
[SEARCH]{"dateFrom": "YYYY-MM-DD", "dateTo": "YYYY-MM-DD", "adults": 2, "children": [], "city": "×¢×™×¨"}[/SEARCH]

×“×•×’×××•×ª:
- ×œ×“×•×‘××™, 10-12 ×‘×™×•× ×™ 2026, 2 ××‘×•×’×¨×™×:
[SEARCH]{"dateFrom": "2026-06-10", "dateTo": "2026-06-12", "adults": 2, "children": [], "city": "Dubai"}[/SEARCH]

- ×œ×ª×œ ××‘×™×‘, 15-17 ×‘×™×•×œ×™ 2025, 2 ××‘×•×’×¨×™× ×•×™×œ×“ ×‘×Ÿ 5:
[SEARCH]{"dateFrom": "2025-07-15", "dateTo": "2025-07-17", "adults": 2, "children": [5], "city": "Tel Aviv"}[/SEARCH]

- ×œ××œ×•×Ÿ ×¡×¤×¦×™×¤×™ (Dizengoff Inn):
[SEARCH]{"dateFrom": "2025-08-01", "dateTo": "2025-08-03", "adults": 2, "children": [], "hotelName": "Dizengoff Inn"}[/SEARCH]

×–×›×•×¨: ×”×©×ª××© ×‘-city ××• hotelName, ×œ× ×‘×©× ×™×”× ×™×—×“!`:`

--------------------------------------------------
HOTEL INFO & CONTEXT
--------------------------------------------------
- Default Hotel Name: ${s}
- Default City: ${r}
- Today's Date: ${i}

--------------------------------------------------
SEARCH CALL FORMAT
--------------------------------------------------
When you have all the details for a search (dates and number of guests), add at the end of your message:
[SEARCH]{"dateFrom": "YYYY-MM-DD", "dateTo": "YYYY-MM-DD", "adults": 2, "children": [], "city": "City"}[/SEARCH]

Examples:
- For Dubai, June 10-12 2026, 2 adults:
[SEARCH]{"dateFrom": "2026-06-10", "dateTo": "2026-06-12", "adults": 2, "children": [], "city": "Dubai"}[/SEARCH]

- For Tel Aviv, July 15-17 2025, 2 adults and a 5-year-old child:
[SEARCH]{"dateFrom": "2025-07-15", "dateTo": "2025-07-17", "adults": 2, "children": [5], "city": "Tel Aviv"}[/SEARCH]

- For a specific hotel (Dizengoff Inn):
[SEARCH]{"dateFrom": "2025-08-01", "dateTo": "2025-08-03", "adults": 2, "children": [], "hotelName": "Dizengoff Inn"}[/SEARCH]

Remember: Use city OR hotelName, never both together!`;return("he"===e?o:a)+d}e.s(["getBookingAgentPrompt",()=>s])},765607,e=>{"use strict";var t=e.i(224389);let o=process.env.SUPABASE_SERVICE_ROLE_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndzbWNoZXhtdGlpanVmZW16end1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQxNzI0ODIsImV4cCI6MjA3OTc0ODQ4Mn0.SWdtLvTaopbs2UDNmzpbA3g9O9hgIG3Tei4J8IRV-sY",a=null;a=(0,t.createClient)("https://wsmchexmtiijufemzzwu.supabase.co",o);class s{static async logSearch(e){if(!a)return void console.log("[SearchLogger] Skipping log - Supabase not configured");try{let t=e.dateFrom instanceof Date?e.dateFrom.toISOString().split("T")[0]:e.dateFrom,o=e.dateTo instanceof Date?e.dateTo.toISOString().split("T")[0]:e.dateTo,{error:s}=await a.from("search_logs").insert([{hotel_id:e.hotelId,search_query:e.searchQuery,destination:e.destination,hotel_name:e.hotelName,city:e.city,date_from:t,date_to:o,adults:e.adults,children:e.children,results_count:e.resultsCount??0,found_hotels:e.foundHotels,found_rooms:e.foundRooms,duration_ms:e.durationMs,success:e.success??!0,error_message:e.errorMessage,user_id:e.userId,session_id:e.sessionId,ip_address:e.ipAddress,user_agent:e.userAgent,source:e.source,channel:e.channel,metadata:e.metadata}]);s&&console.error("[SearchLogger] Supabase insert error:",s)}catch(e){console.error("[SearchLogger] Error logging search:",e)}}static async getSearchLogs(e){if(!a)return console.log("[SearchLogger] Skipping getLogs - Supabase not configured"),{logs:[],total:0,limit:e?.limit??50,offset:e?.offset??0};let t=e?.limit??50,o=e?.offset??0,s=a.from("search_logs").select("*",{count:"exact"}).order("created_at",{ascending:!1}).range(o,o+t-1);e?.hotelId&&(s=s.eq("hotel_id",e.hotelId)),e?.userId&&(s=s.eq("user_id",e.userId)),e?.success!==void 0&&(s=s.eq("success",e.success)),e?.source&&(s=s.eq("source",e.source)),e?.dateFrom&&(s=s.gte("created_at",e.dateFrom.toISOString())),e?.dateTo&&(s=s.lte("created_at",e.dateTo.toISOString()));let{data:r,count:i,error:n}=await s;return n?(console.error("[SearchLogger] Error fetching logs:",n),{logs:[],total:0,limit:t,offset:o}):{logs:r||[],total:i||0,limit:t,offset:o}}static async getSearchStats(e){if(!a)return console.log("[SearchLogger] Skipping getSearchStats - Supabase not configured"),{totalSearches:0,successfulSearches:0,failedSearches:0,avgDurationMs:0};let t=a.from("search_logs").select("*",{count:"exact",head:!0}),o=a.from("search_logs").select("*",{count:"exact",head:!0}).eq("success",!0);if(e?.hotelId&&(t=t.eq("hotel_id",e.hotelId),o=o.eq("hotel_id",e.hotelId)),e?.dateFrom){let a=e.dateFrom.toISOString();t=t.gte("created_at",a),o=o.gte("created_at",a)}if(e?.dateTo){let a=e.dateTo.toISOString();t=t.lte("created_at",a),o=o.lte("created_at",a)}let{count:s}=await t,{count:r}=await o;return{total:s||0,successful:r||0,failed:(s||0)-(r||0),successRate:(s||0)>0?((r||0)/s*100).toFixed(2)+"%":"0%",bySource:{},byDestination:{}}}static async deleteOldLogs(e=30){let t=new Date;t.setDate(t.getDate()-e);let{data:o,error:s}=await a.from("search_logs").delete().lt("created_at",t.toISOString());return s?(console.error("[SearchLogger] Error deleting old logs:",s),0):o?.length||0}static async deleteLog(e){try{let{error:t}=await a.from("search_logs").delete().eq("id",e);if(t)return console.error("[SearchLogger] Error deleting log:",t),!1;return!0}catch(e){return console.error("[SearchLogger] Error deleting log:",e),!1}}}e.s(["SearchLogger",()=>s])},646958,e=>{"use strict";let t=new Map,o=["×–×” ×× ×”×œ ×”××œ×•×Ÿ","×× ×™ ×× ×”×œ ×”××œ×•×Ÿ","×–×” ×”××“××™×Ÿ","×× ×™ ×”××“××™×Ÿ","admin mode","manager mode"],a=["×”× ×—×™×•×ª ×—×“×©×•×ª","×¢×“×›×Ÿ ×”× ×—×™×•×ª","×©× ×” ×”× ×—×™×•×ª","×”×’×“×¨×•×ª ×—×“×©×•×ª","new instructions","update instructions"];class s{static getOrCreateMemory(e,o){if(!t.has(e)){let a={sessionId:e,hotelId:o,messages:[],context:{},metadata:{startedAt:Date.now(),lastActivityAt:Date.now(),messageCount:0}};t.set(e,a),console.log(`[Memory] Created new memory for session ${e}`)}return t.get(e)}static addMessage(e,o,a){let s=t.get(e);s&&(s.messages.push({role:o,content:a,timestamp:Date.now()}),s.metadata.lastActivityAt=Date.now(),s.metadata.messageCount++,s.messages.length>50&&(s.messages=s.messages.slice(-50)),console.log(`[Memory] Added ${o} message to session ${e} (total: ${s.messages.length})`))}static isAdminTrigger(e){let t=e.toLowerCase().trim();return o.some(e=>t.includes(e.toLowerCase()))}static activateAdminMode(e){let o=t.get(e);o&&(o.context.isAdminMode=!0,console.log(`[Memory] ğŸ” Admin mode ACTIVATED for session ${e}`))}static isAdminMode(e){let o=t.get(e);return o?.context.isAdminMode===!0}static extractAndSaveInstructions(e,o){let s=t.get(e);if(!s||!s.context.isAdminMode||!a.some(e=>o.includes(e)))return null;let r="";for(let e of a)if(o.includes(e)){let t=o.split(e);if(t.length>1){r=t[1].trim();break}}return r?(s.context.customInstructions=r,console.log(`[Memory] ğŸ“ Saved custom instructions for session ${e}:`,r.substring(0,100)+"..."),r):null}static getCustomInstructions(e){let o=t.get(e);return o?.context.customInstructions||null}static getFormattedHistory(e,o=10){let a=t.get(e);return a?a.messages.filter(e=>"system"!==e.role).slice(-o):[]}static getSummary(e){let o=t.get(e);if(!o||0===o.messages.length)return"×©×™×—×” ×—×“×©×” - ××™×Ÿ ×”×™×¡×˜×•×¨×™×” ×§×•×“××ª.";let a=o.messages.filter(e=>"user"===e.role).length,s=o.messages.filter(e=>"assistant"===e.role).length,r=o.context.userPreferences,i=`×”×™×¡×˜×•×¨×™×™×ª ×©×™×—×”: ${a} ×”×•×“×¢×•×ª ×××©×ª××©, ${s} ×ª×’×•×‘×•×ª.
`;return r&&(i+="×”×¢×“×¤×•×ª ×©×–×•×”×•:\n",r.roomType&&(i+=`- ×¡×•×’ ×—×“×¨: ${r.roomType}
`),r.budget&&(i+=`- ×ª×§×¦×™×‘: ${r.budget}
`),r.purpose&&(i+=`- ××˜×¨×ª ×©×”×™×™×”: ${r.purpose}
`),r.adults&&(i+=`- ××¡×¤×¨ ××‘×•×’×¨×™×: ${r.adults}
`)),o.context.isAdminMode&&(i+="\nğŸ” ××¦×‘ ×× ×”×œ ×¤×¢×™×œ - × ×™×ª×Ÿ ×œ×¢×“×›×Ÿ ×”× ×—×™×•×ª ××¢×¨×›×ª.\n"),o.context.customInstructions&&(i+=`
ğŸ“ ×”× ×—×™×•×ª ××•×ª×××•×ª ××™×©×™×ª ×§×™×™××•×ª: ${o.context.customInstructions.substring(0,50)}...
`),i}static updatePreferences(e,o){let a=t.get(e);a&&(a.context.userPreferences={...a.context.userPreferences,...o},console.log(`[Memory] Updated preferences for session ${e}:`,o))}static addSearchToHistory(e,o){let a=t.get(e);a&&(a.context.searchHistory||(a.context.searchHistory=[]),a.context.searchHistory.push({...o,timestamp:Date.now()}),a.context.searchHistory.length>10&&(a.context.searchHistory=a.context.searchHistory.slice(-10)))}static incrementBookingAttempts(e){let o=t.get(e);return o?(o.context.bookingAttempts=(o.context.bookingAttempts||0)+1,o.context.bookingAttempts):0}static clearMemory(e){t.delete(e),console.log(`[Memory] Cleared memory for session ${e}`)}static getActiveSessions(){return Array.from(t.keys())}static cleanupOldSessions(){let e=Date.now(),o=0;for(let[a,s]of t.entries())e-s.metadata.lastActivityAt>864e5&&(t.delete(a),o++);return o>0&&console.log(`[Memory] Cleaned up ${o} old sessions`),o}}"undefined"!=typeof setInterval&&setInterval(()=>{s.cleanupOldSessions()},36e5),e.s(["ChatMemoryService",()=>s])},326259,e=>e.a(async(t,o)=>{try{var a=e.i(712075),s=e.i(373424),r=e.i(170478),i=e.i(765607),n=e.i(343747),l=e.i(646958),c=e.i(304101),d=t([r]);[r]=d.then?(await d)():d;let f="https://medici-backend.azurewebsites.net",y="eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJQZXJtaXNzaW9ucyI6IjEiLCJVc2VySWQiOiIxMSIsIm5iZiI6MTc2ODQ1NzU5NSwiZXhwIjoyMDgzOTkwMzk1LCJpc3MiOiJodHRwczovL2FkbWluLm1lZGljaWhvdGVscy5jb20vIiwiYXVkIjoiaHR0cHM6Ly9hZG1pbi5tZWRpY2lob3RlbHMuY29tLyJ9.g-CO7I75BlowE-F3J3GqlXsbIgNtG8_w2v1WMwG6djE";function u(e){if(!e)return"";let t="object"==typeof e?e.url:e;return t?t.startsWith("http")?t:`https://cdn.medicihotels.com/images/${t}`:""}async function h(e){console.log("[v0] Searching Medici API with params:",e);let t=`${f}/api/hotels/GetInnstantSearchPrice`,o={dateFrom:e.dateFrom,dateTo:e.dateTo,pax:[{adults:e.adults||2,children:e.children||[]}],ShowExtendedData:!0,limit:10};e.city?o.city=e.city:e.hotelName?o.hotelName=e.hotelName:o.city="Dubai",console.log("[v0] Request body:",JSON.stringify(o,null,2));try{let a=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${y}`},body:JSON.stringify(o)});if(console.log("[v0] Response status:",a.status),!a.ok){let e=await a.text();throw console.log("[v0] Error response:",e),Error(`API error: ${a.status}`)}let s=await a.json();return console.log("[v0] Response items count:",s?.items?.length||0),e.filterHotelId&&s?.items&&(s.items=s.items.filter(t=>t.hotelId?.toString()===e.filterHotelId),console.log(`[v0] Filtered to hotel ID ${e.filterHotelId}, remaining items:`,s.items.length)),{results:s,jsonRequest:JSON.stringify(o)}}catch(e){throw console.error("[v0] Search error:",e),e}}async function m(e){let t;console.log("[v0] PreBook with params:",e);let o=`${f}/api/hotels/PreBook`;try{t=JSON.parse(e.searchRequestJson)}catch(e){throw console.error("[v0] Failed to parse search request:",e),Error("Invalid search request JSON")}let a={services:[{searchCodes:[{code:e.code,pax:[{adults:e.adults,children:e.children}]}],searchRequest:t}]},s={jsonRequest:JSON.stringify(a)};try{let e=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${y}`},body:JSON.stringify(s)});if(!e.ok){let t=await e.text();throw console.log("[v0] PreBook error:",t),Error(`PreBook error: ${e.status}`)}let t=await e.json();return console.log("[v0] PreBook success:",t),t}catch(e){throw console.error("[v0] PreBook error:",e),e}}async function p(e){let t;console.log("[v0] Book with params:",e);let o=`${f}/api/hotels/Book`;try{t=JSON.parse(e.searchRequestJson)}catch(e){throw console.error("[v0] Failed to parse search request:",e),Error("Invalid search request JSON")}let a=[];for(let t=0;t<e.adults;t++)a.push({title:"MR",name:{first:0===t?e.customer.firstName:`Guest${t+1}`,last:e.customer.lastName},birthDate:"1990-01-01"});let s={customer:{title:"MR",name:{first:e.customer.firstName,last:e.customer.lastName},birthDate:"1990-01-01",contact:{email:e.customer.email,phone:e.customer.phone}},paymentMethod:{methodName:"account_credit"},reference:{agency:"v0-bookinengine-ai-chat",voucherEmail:e.customer.email},services:[{bookingRequest:[{code:e.roomCode,pax:[{adults:a,children:[]}],token:e.token}],searchRequest:t}]},r={jsonRequest:JSON.stringify(s)};try{let e=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${y}`},body:JSON.stringify(r)});if(!e.ok){let t=await e.text();throw console.log("[v0] Book error:",t),Error(`Book error: ${e.status}`)}let t=await e.json();return console.log("[v0] Book success:",t),t}catch(e){throw console.error("[v0] Book error:",e),e}}async function g(e){try{let{messages:t,hotelConfig:o,language:d,bookingState:g,sessionId:f}=await e.json(),y=f||`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,b=l.ChatMemoryService.getOrCreateMemory(y,o?.id||"default"),v=t[t.length-1];if(v?.role==="user"){if(l.ChatMemoryService.addMessage(y,"user",v.content),l.ChatMemoryService.isAdminTrigger(v.content))return l.ChatMemoryService.activateAdminMode(y),Response.json({text:`ğŸ” **××¦×‘ ×× ×”×œ ×”×•×¤×¢×œ!**

×©×œ×•× ×× ×”×œ ×”××œ×•×Ÿ! ×¢×›×©×™×• ××ª×” ×™×›×•×œ:

1. **×œ×¢×“×›×Ÿ ×”× ×—×™×•×ª ××¢×¨×›×ª** - ×¨×§ ×ª×’×™×“:
   - "×”× ×—×™×•×ª ×—×“×©×•×ª: [×”×”× ×—×™×•×ª ×©×œ×š]"
   - "×¢×“×›×Ÿ ×”× ×—×™×•×ª: [×”×”× ×—×™×•×ª ×”×—×“×©×•×ª]"
   
2. **×œ×©× ×•×ª ×”×ª× ×”×’×•×ª ×”-AI** - ×œ××©×œ:
   - "×”× ×—×™×•×ª ×—×“×©×•×ª: ×ª×”×™×” ×™×•×ª×¨ ×¤×•×¨××œ×™ ×•××§×¦×•×¢×™"
   - "×¢×“×›×Ÿ ×”× ×—×™×•×ª: ×ª×Ÿ ×“×’×© ×¢×œ ×”××‘×¦×¢×™× ×•×”×§×•×¤×•× ×™×"
   - "×”× ×—×™×•×ª ×—×“×©×•×ª: ×ª×”×™×” ×™×•×ª×¨ ×¨×•×× ×˜×™ ×•×—× ×‘×ª×’×•×‘×•×ª"

3. **×”×”× ×—×™×•×ª ×™×©××¨×•** ×œ××©×š ×›×œ ×”×©×™×—×” ×•×™×—×•×œ×• ×¢×œ ×›×œ ×”×ª×’×•×‘×•×ª ×”×‘××•×ª.

××” ×ª×¨×¦×” ×œ×¢×“×›×Ÿ?`,sessionId:y,adminMode:!0});if(l.ChatMemoryService.isAdminMode(y)){let e=l.ChatMemoryService.extractAndSaveInstructions(y,v.content);if(e)return Response.json({text:`âœ… **×”× ×—×™×•×ª ×¢×•×“×›× ×• ×‘×”×¦×œ×—×”!**

ğŸ“ ×”×”× ×—×™×•×ª ×”×—×“×©×•×ª:
"${e}"

×”×”× ×—×™×•×ª ×”××œ×” ×™×—×•×œ×• ×¢×œ ×›×œ ×”×ª×’×•×‘×•×ª ×©×œ×™ ××¢×›×©×™×•. ×× ×™ ××ª××™× ××ª ×”×¡×’× ×•×Ÿ, ×”×˜×•×Ÿ ×•×”×ª×•×›×Ÿ ×©×œ×™ ×‘×”×ª××.

×¨×•×¦×” ×œ×‘×“×•×§? ×©××œ ××•×ª×™ ×©××œ×” ×•×”×¨××” ×œ×š ××™×š ×× ×™ ××©×ª××© ×‘×”× ×—×™×•×ª ×”×—×“×©×•×ª! ğŸš€`,sessionId:y,adminMode:!0,customInstructions:e})}}let w="he"===d,S=o?.name||"Dizengoff Inn",I=o?.apiSettings?.mediciHotelName||"Dizengoff Inn",R=o?.apiSettings?.mediciCity||o?.city||"Tel Aviv";console.log("[v0] Chat request - Hotel:",S,"API Name:",I),console.log("[v0] Session ID:",y),console.log("[v0] Admin Mode:",l.ChatMemoryService.isAdminMode(y)),console.log("[v0] Booking state:",g);let A=new Date().toISOString().split("T")[0],k=(0,s.getBookingAgentPrompt)(d,S,R,A,o?.id,o?.knowledgeBase,o?.systemInstructions);if(o?.id==="scarlet-hotel"){let e=c.scarletKnowledgeBase;k+=`

## ğŸ¨ ××™×“×¢ ××¤×•×¨×˜ ×¢×œ ××œ×•×Ÿ ×¡×§×¨×œ×˜ ×ª×œ ××‘×™×‘:

`,k+=`**×–×”×•×ª ×”××œ×•×Ÿ:**
`,k+=`- ×©×: ${e.identity.name} (${e.identity.englishName})
`,k+=`- ×¡×œ×•×’×Ÿ: ${e.identity.tagline}
`,k+=`- ×§×•× ×¦×¤×˜: ${e.identity.concept}
`,k+=`- ×§×”×œ ×™×¢×“: ${e.identity.targetAudience}

`,k+=`**× ×§×•×“×•×ª ××›×™×¨×” ×™×™×—×•×“×™×•×ª:**
`,e.identity.uniqueSellingPoints.forEach(e=>{k+=`- ${e}
`}),k+=`
`,k+=`**××™×§×•×:**
`,k+=`- ×›×ª×•×‘×ª: ${e.location.address}
`,k+=`- ×©×›×•× ×”: ${e.location.neighborhood}
`,k+=`- ××˜×¨×§×¦×™×•×ª ×‘×§×¨×‘×ª ××§×•×:
`,e.location.nearbyAttractions.slice(0,5).forEach(e=>{k+=`  * ${e.name} - ${e.distance} (${e.description})
`}),k+=`
`,k+=`**7 ×¡×•×’×™ ×—×“×¨×™×:**
`,e.rooms.forEach(e=>{k+=`
**${e.name}** (${e.englishName})
`,k+=`- ×’×•×“×œ: ${e.size}
`,k+=`- ×ª×™××•×¨: ${e.description}
`,k+=`- ××§×¡×™××•× ××•×¨×—×™×: ${e.maxGuests}
`,k+=`- ×˜×•×•×— ××—×™×¨×™×: ${e.priceRange}
`,e.detailedFeatures&&(k+=`- ××™×˜×”: ${e.detailedFeatures.bedding}
`,k+=`- ×—×“×¨ ×¨×—×¦×”: ${e.detailedFeatures.bathroom}
`,k+=`- × ×•×£: ${e.detailedFeatures.view}
`)}),k+=`
`,k+=`**×©×™×¨×•×ª×™×:**
`,k+=`- ×“×œ×¤×§ ×§×‘×œ×”: ${e.services.frontDesk.hours}
`,k+=`- ×©×¤×•×ª: ${e.services.frontDesk.languages.join(", ")}
`,k+=`- ×©×™×¨×•×ª×™× ××™×•×—×“×™×: ${e.services.specialServices.join(", ")}

`,k+=`**××“×™× ×™×•×ª:**
`,k+=`- ×¦'×§-××™×Ÿ: ${e.policies.checkIn}
`,k+=`- ×¦'×§-×××•×˜: ${e.policies.checkOut}
`,k+=`- ×‘×™×˜×•×œ: ${e.policies.cancellation.join("; ")}

`,k+=`**×™×ª×¨×•× ×•×ª ×ª×—×¨×•×ª×™×™×:**
`,e.competitiveAdvantages.forEach(e=>{k+=`- ${e.advantage}: ${e.description}
`}),k+=`
`,k+=`**×”× ×—×™×•×ª ×ª×§×©×•×¨×ª:**
`,k+=`- ${e.agentInstructions.tone}
`,k+=`- ${e.agentInstructions.priorities}
`,k+=`- ${e.agentInstructions.upselling}
`,k+=`- ${e.agentInstructions.objectionHandling}

`,k+=`**×˜×™×¤×™× ×—×©×•×‘×™×:**
`,e.agentInstructions.keyTips.forEach(e=>{k+=`âœ¨ ${e}
`}),console.log("[Scarlet] Enhanced system prompt with full knowledge base")}let C=l.ChatMemoryService.getCustomInstructions(y);C&&(k+=`

## ğŸ” ×”× ×—×™×•×ª ××•×ª×××•×ª ××™×©×™×ª ××× ×”×œ ×”××œ×•×Ÿ (×¢×“×™×¤×•×ª ×’×‘×•×”×”!):
${C}

×”× ×—×™×•×ª ××œ×” ×—×©×•×‘×•×ª ×‘×™×•×ª×¨ ×•×“×•×¨×¡×•×ª ×”× ×—×™×•×ª ××—×¨×•×ª ×‘××§×¨×” ×©×œ ×¡×ª×™×¨×”.`,console.log("[v0] Applied custom instructions from admin"));let E=l.ChatMemoryService.getSummary(y);k+=`

## ğŸ’¬ ×”×§×©×¨ ×©×™×—×”:
${E}`,console.log("[v0] Calling AI model...");let{text:O}=await (0,a.generateText)({model:"anthropic/claude-sonnet-4-20250514",system:k,messages:t.map(e=>({role:e.role,content:e.content}))});console.log("[v0] AI response:",O.slice(0,500)),l.ChatMemoryService.addMessage(y,"assistant",O);let x=O.match(/\[SEARCH\](.*?)\[\/SEARCH\]/s);if(x){console.log("[v0] Found search request:",x[1]);try{let e=JSON.parse(x[1]);console.log("[v0] Parsed search params:",e);if(o?.id==="scarlet-hotel")try{let e=await fetch("https://static-data.innstant-servers.com/hotels/863233",{headers:{Authorization:"Bearer $2y$10$yWot7dUYoc7.viH8vK1s0OG.D0n5uKm19Z84WznDiB.ESBnPOikr6"}});if(e.ok){let t=await e.json();console.log("[Scarlet] Static Data API response:",t),t.rooms}}catch(e){console.log("[Scarlet] Static Data API error:",e)}let{results:a,jsonRequest:s}=await h({hotelName:I,city:e.city||R,dateFrom:e.dateFrom,dateTo:e.dateTo,adults:e.adults||2,children:e.children||[],filterHotelId:o?.id==="scarlet-hotel"?"863233":void 0}),r=[];if(a?.items&&Array.isArray(a.items)?r=a.items:Array.isArray(a)?r=a:a?.hotels&&(r=a.hotels),r.length>0){let a=r.slice(0,6).map((t,o)=>{let a=t.price?.amount||t.netPrice?.amount||t.price||0,s=t.price?.currency||t.netPrice?.currency||"USD",r=t.images||[],i=function(e){if(!e||0===e.length)return"";let t=e.find(e=>"mainimage"===e.title);return t?u(t):u(e[0])}(r),n=r&&0!==r.length?r.slice(0,10).map(e=>u(e)).filter(Boolean):[],l=t.facilities?.tags||t.facilities?.list||[];return{code:t.code||`${t.hotelId||S}:${o}:${Date.now()}`,hotelId:t.hotelId||0,name:t.hotelName||t.name||"Hotel",hotelName:t.hotelName||S,roomType:t.name||t.category||"Standard Room",board:t.board||"RO",price:a,currency:s,cancellation:t.cancellation?.type||"non-refundable",confirmation:t.confirmation||"immediate",image:i,images:n,description:t.description||"",facilities:l,location:t.city||e.city||R,address:t.address||"",rating:t.stars||4}}),n=O.replace(/\[SEARCH\].*?\[\/SEARCH\]/s,"").trim(),l=a.map((e,t)=>{let o=0===t?w?" (×”×›×™ ××©×ª×œ×)":" (Best Value)":t===a.length-1?w?" (×”×›×™ ×’××™×©)":" (Most Flexible)":"";return w?`${t+1}. ${e.hotelName} - ${e.roomType}${o}
   ××—×™×¨: $${e.price} ${e.currency}
   ×§×•×“ ×—×“×¨: ${e.code}
   ×‘×™×˜×•×œ: ${"fully-refundable"===e.cancellation?"× ×™×ª×Ÿ ×œ×‘×™×˜×•×œ ×—×™× ×":"×œ× × ×™×ª×Ÿ ×œ×‘×™×˜×•×œ"}`:`${t+1}. ${e.hotelName} - ${e.roomType}${o}
   Price: $${e.price} ${e.currency}
   Room code: ${e.code}
   Cancellation: ${"fully-refundable"===e.cancellation?"Free cancellation":"Non-refundable"}`}).join("\n\n");return i.SearchLogger.logSearch({hotelName:I,city:e.city||R,dateFrom:e.dateFrom,dateTo:e.dateTo,adults:e.adults||2,children:e.children||0,resultsCount:a.length,foundHotels:r.length,foundRooms:a.length,success:!0,source:"chat",channel:"web",metadata:{hotelId:o?.id,userMessage:t[t.length-1]?.content.substring(0,100)}}).catch(e=>console.error("Failed to log search:",e)),Response.json({message:n+"\n\n"+(w?`××¦××ª×™ ${a.length} ××¤×©×¨×•×™×•×ª ×–××™× ×•×ª:

${l}

××™×–×” ×—×“×¨ ××¢× ×™×™×Ÿ ××•×ª×š? ×›×ª×•×‘ ××ª ×”××¡×¤×¨ ××• "×× ×™ ×¨×•×¦×” ××ª ×—×“×¨ ××¡×¤×¨ X"`:`I found ${a.length} available options:

${l}

Which room interests you? Write the number or "I want room number X"`),bookingData:{type:"search_results",data:{rooms:a,searchContext:{dateFrom:e.dateFrom,dateTo:e.dateTo,adults:e.adults||2,children:e.children||[],city:e.city||R},jsonRequest:s}}})}}catch(t){console.error("[v0] Search error:",t),i.SearchLogger.logSearch({hotelName:I,city:searchParams?.city||R,dateFrom:searchParams?.dateFrom,dateTo:searchParams?.dateTo,adults:searchParams?.adults||2,children:searchParams?.children||0,resultsCount:0,success:!1,errorMessage:t instanceof Error?t.message:"Unknown search error",source:"chat",channel:"web",metadata:{hotelId:o?.id,error:t instanceof Error?t.toString():String(t)}}).catch(e=>console.error("Failed to log search error:",e));let e=O.replace(/\[SEARCH\].*?\[\/SEARCH\]/s,"").trim();return Response.json({message:e+"\n\n"+(w?"×”×™×™×ª×” ×‘×¢×™×” ×‘×™×¦×™×¨×ª ×§×©×¨ ×¢× ××¢×¨×›×ª ×”×”×–×× ×•×ª. ×× × × ×¡×” ×©×•×‘.":"There was an issue contacting the booking system. Please try again.")})}}let D=O.match(/\[SELECT_ROOM\](.*?)\[\/SELECT_ROOM\]/s);if(D&&g?.jsonRequest){console.log("[v0] Room selected, calling PreBook...");try{let e=JSON.parse(D[1]),t=await m({code:e.code,hotelId:e.hotelId,dateFrom:g.searchContext.dateFrom,dateTo:g.searchContext.dateTo,adults:g.searchContext.adults,children:g.searchContext.children,searchRequestJson:g.jsonRequest}),o=O.replace(/\[SELECT_ROOM\].*?\[\/SELECT_ROOM\]/s,"").trim();return Response.json({message:o+"\n\n"+(w?`××¢×•×œ×”! ×©××¨×ª×™ ××ª ×”×—×“×¨ ×¢×‘×•×¨×š.
×¢×›×©×™×• ×× ×™ ×¦×¨×™×š ×›××” ×¤×¨×˜×™×:
- ×©× ××œ×
- ×“×•×"×œ
- ××¡×¤×¨ ×˜×œ×¤×•×Ÿ`:`Great! I've reserved the room for you.
Now I need some details:
- Full name
- Email
- Phone number`),bookingData:{type:"prebook_complete",data:{preBookData:t,selectedRoom:e}}})}catch(e){return console.error("[v0] PreBook error:",e),Response.json({message:w?"×”×™×™×ª×” ×‘×¢×™×” ×‘×©××™×¨×ª ×”×—×“×¨. ×× × × ×¡×” ×©×•×‘ ××• ×‘×—×¨ ×—×“×¨ ××—×¨.":"There was an issue reserving the room. Please try again or select another room."})}}let j=O.match(/\[BOOK\](.*?)\[\/BOOK\]/s);if(j&&g?.preBookData&&g?.selectedRoom&&g?.jsonRequest){console.log("[v0] Completing booking...");try{let e=JSON.parse(j[1]),t=await p({token:g.preBookData.token,preBookId:g.preBookData.preBookId,customer:e,searchRequestJson:g.jsonRequest,roomCode:g.selectedRoom.code,adults:g.searchContext?.adults||2,children:g.searchContext?.children||[]});if(t.bookingId&&t.supplierReference&&r.emailService.isEnabled())try{let o=JSON.parse(g.jsonRequest),a=o.dates?.from||new Date().toISOString(),s=o.dates?.to||new Date().toISOString(),i=Math.ceil((new Date(s).getTime()-new Date(a).getTime())/864e5);r.emailService.sendBookingConfirmation({to:e.email,customerName:`${e.firstName} ${e.lastName}`,bookingId:t.bookingId,supplierReference:t.supplierReference,hotelName:g.selectedRoom?.hotelName||S,roomType:g.selectedRoom?.roomName||"Room",checkIn:(0,n.format)(new Date(a),"MMM dd, yyyy"),checkOut:(0,n.format)(new Date(s),"MMM dd, yyyy"),nights:i,adults:g.searchContext?.adults||2,children:g.searchContext?.children?.length||0,totalPrice:g.preBookData?.netPrice||0,currency:o.currencies?.[0]||"USD",language:d}).then(e=>{e.success?console.log("[AI Chat] âœ… Confirmation email sent",{bookingId:t.bookingId,emailId:e.emailId}):console.warn("[AI Chat] âš ï¸ Email failed (non-critical)",e.error)}).catch(e=>{console.error("[AI Chat] Email error (non-critical):",e)})}catch(e){console.error("[AI Chat] Failed to parse search request for email:",e)}let o=O.replace(/\[BOOK\].*?\[\/BOOK\]/s,"").trim();return Response.json({message:o+"\n\n"+(w?`ğŸ‰ ×”×”×–×× ×” ×”×•×©×œ××” ×‘×”×¦×œ×—×”!

××¡×¤×¨ ×”×–×× ×”: ${t.bookingId}
××¡××›×ª×: ${t.supplierReference}

×§×™×‘×œ×ª ××™×©×•×¨ ×‘××™×™×œ ${e.email}`:`ğŸ‰ Booking completed successfully!

Booking ID: ${t.bookingId}
Reference: ${t.supplierReference}

You've received confirmation at ${e.email}`),bookingData:{type:"booking_complete",data:{bookingId:t.bookingId,supplierReference:t.supplierReference}}})}catch(e){return console.error("[v0] Book error:",e),Response.json({message:w?"×”×™×™×ª×” ×‘×¢×™×” ×‘×¡×™×•× ×”×”×–×× ×”. ×× × × ×¡×” ×©×•×‘ ××• ×¦×•×¨ ×§×©×¨ ×¢× ×”×ª××™×›×”.":"There was an issue completing the booking. Please try again or contact support."})}}let T=O.replace(/\[SEARCH\].*?\[\/SEARCH\]/s,"").replace(/\[SELECT_ROOM\].*?\[\/SELECT_ROOM\]/s,"").replace(/\[BOOK\].*?\[\/BOOK\]/s,"").trim();return Response.json({message:T,sessionId:y,hasMemory:b.messages.length>0,messageCount:b.metadata.messageCount,adminMode:l.ChatMemoryService.isAdminMode(y)})}catch(e){return console.error("[v0] AI Chat error:",e),Response.json({message:"Sorry, an error occurred. Please try again."},{status:500})}}process.env.TAVILY_API_KEY,e.s(["POST",()=>g]),o()}catch(e){o(e)}},!1),991683,e=>e.a(async(t,o)=>{try{var a=e.i(747909),s=e.i(174017),r=e.i(996250),i=e.i(759756),n=e.i(561916),l=e.i(114444),c=e.i(837092),d=e.i(869741),u=e.i(316795),h=e.i(487718),m=e.i(995169),p=e.i(47587),g=e.i(666012),f=e.i(570101),y=e.i(626937),b=e.i(10372),v=e.i(193695);e.i(52474);var w=e.i(257297),S=e.i(326259),I=t([S]);[S]=I.then?(await I)():I;let k=new a.AppRouteRouteModule({definition:{kind:s.RouteKind.APP_ROUTE,page:"/api/ai/booking-chat/route",pathname:"/api/ai/booking-chat",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/app/api/ai/booking-chat/route.ts",nextConfigOutput:"",userland:S}),{workAsyncStorage:C,workUnitAsyncStorage:E,serverHooks:O}=k;function R(){return(0,r.patchFetch)({workAsyncStorage:C,workUnitAsyncStorage:E})}async function A(e,t,o){k.isDev&&(0,i.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let a="/api/ai/booking-chat/route";a=a.replace(/\/index$/,"")||"/";let r=await k.prepare(e,t,{srcPage:a,multiZoneDraftMode:!1});if(!r)return t.statusCode=400,t.end("Bad Request"),null==o.waitUntil||o.waitUntil.call(o,Promise.resolve()),null;let{buildId:S,params:I,nextConfig:R,parsedUrl:A,isDraftMode:C,prerenderManifest:E,routerServerContext:O,isOnDemandRevalidate:x,revalidateOnlyGenerated:D,resolvedPathname:j,clientReferenceManifest:T,serverActionsManifest:M}=r,$=(0,d.normalizeAppPath)(a),N=!!(E.dynamicRoutes[$]||E.routes[j]),P=async()=>((null==O?void 0:O.render404)?await O.render404(e,t,A,!1):t.end("This page could not be found"),null);if(N&&!C){let e=!!E.routes[j],t=E.dynamicRoutes[$];if(t&&!1===t.fallback&&!e){if(R.experimental.adapterPath)return await P();throw new v.NoFallbackError}}let B=null;!N||k.isDev||C||(B=j,B="/index"===B?"/":B);let H=!0===k.isDev||!N,F=N&&!H;M&&T&&(0,l.setReferenceManifestsSingleton)({page:a,clientReferenceManifest:T,serverActionsManifest:M,serverModuleMap:(0,c.createServerModuleMap)({serverActionsManifest:M})});let _=e.method||"GET",z=(0,n.getTracer)(),Y=z.getActiveScopeSpan(),L={params:I,prerenderManifest:E,renderOpts:{experimental:{authInterrupts:!!R.experimental.authInterrupts},cacheComponents:!!R.cacheComponents,supportsDynamicResponse:H,incrementalCache:(0,i.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:R.cacheLife,waitUntil:o.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,o,a)=>k.onRequestError(e,t,a,O)},sharedContext:{buildId:S}},q=new u.NodeNextRequest(e),U=new u.NodeNextResponse(t),J=h.NextRequestAdapter.fromNodeNextRequest(q,(0,h.signalFromNodeResponse)(t));try{let r=async e=>k.handle(J,L).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let o=z.getRootSpanAttributes();if(!o)return;if(o.get("next.span_type")!==m.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${o.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let s=o.get("next.route");if(s){let t=`${_} ${s}`;e.setAttributes({"next.route":s,"http.route":s,"next.span_name":t}),e.updateName(t)}else e.updateName(`${_} ${a}`)}),l=!!(0,i.getRequestMeta)(e,"minimalMode"),c=async i=>{var n,c;let d=async({previousCacheEntry:s})=>{try{if(!l&&x&&D&&!s)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let a=await r(i);e.fetchMetrics=L.renderOpts.fetchMetrics;let n=L.renderOpts.pendingWaitUntil;n&&o.waitUntil&&(o.waitUntil(n),n=void 0);let c=L.renderOpts.collectedTags;if(!N)return await (0,g.sendResponse)(q,U,a,L.renderOpts.pendingWaitUntil),null;{let e=await a.blob(),t=(0,f.toNodeOutgoingHttpHeaders)(a.headers);c&&(t[b.NEXT_CACHE_TAGS_HEADER]=c),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let o=void 0!==L.renderOpts.collectedRevalidate&&!(L.renderOpts.collectedRevalidate>=b.INFINITE_CACHE)&&L.renderOpts.collectedRevalidate,s=void 0===L.renderOpts.collectedExpire||L.renderOpts.collectedExpire>=b.INFINITE_CACHE?void 0:L.renderOpts.collectedExpire;return{value:{kind:w.CachedRouteKind.APP_ROUTE,status:a.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:o,expire:s}}}}catch(t){throw(null==s?void 0:s.isStale)&&await k.onRequestError(e,t,{routerKind:"App Router",routePath:a,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:F,isOnDemandRevalidate:x})},O),t}},u=await k.handleResponse({req:e,nextConfig:R,cacheKey:B,routeKind:s.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:E,isRoutePPREnabled:!1,isOnDemandRevalidate:x,revalidateOnlyGenerated:D,responseGenerator:d,waitUntil:o.waitUntil,isMinimalMode:l});if(!N)return null;if((null==u||null==(n=u.value)?void 0:n.kind)!==w.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==u||null==(c=u.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});l||t.setHeader("x-nextjs-cache",x?"REVALIDATED":u.isMiss?"MISS":u.isStale?"STALE":"HIT"),C&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let h=(0,f.fromNodeOutgoingHttpHeaders)(u.value.headers);return l&&N||h.delete(b.NEXT_CACHE_TAGS_HEADER),!u.cacheControl||t.getHeader("Cache-Control")||h.get("Cache-Control")||h.set("Cache-Control",(0,y.getCacheControlHeader)(u.cacheControl)),await (0,g.sendResponse)(q,U,new Response(u.value.body,{headers:h,status:u.value.status||200})),null};Y?await c(Y):await z.withPropagatedContext(e.headers,()=>z.trace(m.BaseServerSpan.handleRequest,{spanName:`${_} ${a}`,kind:n.SpanKind.SERVER,attributes:{"http.method":_,"http.target":e.url}},c))}catch(t){if(t instanceof v.NoFallbackError||await k.onRequestError(e,t,{routerKind:"App Router",routePath:$,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:F,isOnDemandRevalidate:x})}),N)throw t;return await (0,g.sendResponse)(q,U,new Response(null,{status:500})),null}}e.s(["handler",()=>A,"patchFetch",()=>R,"routeModule",()=>k,"serverHooks",()=>O,"workAsyncStorage",()=>C,"workUnitAsyncStorage",()=>E]),o()}catch(e){o(e)}},!1)];

//# sourceMappingURL=_45e6e946._.js.map