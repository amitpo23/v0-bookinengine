{"version":3,"sources":["../../../node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../node_modules/next/src/server/route-modules/app-page/vendored/rsc/react.ts","../../../node_modules/next-auth/providers/google.js","../../../lib/auth.ts"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-rsc']!.React\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = Google;\nfunction Google(options) {\n  return {\n    id: \"google\",\n    name: \"Google\",\n    type: \"oauth\",\n    wellKnown: \"https://accounts.google.com/.well-known/openid-configuration\",\n    authorization: {\n      params: {\n        scope: \"openid email profile\"\n      }\n    },\n    idToken: true,\n    checks: [\"pkce\", \"state\"],\n    profile(profile) {\n      return {\n        id: profile.sub,\n        name: profile.name,\n        email: profile.email,\n        image: profile.picture\n      };\n    },\n    style: {\n      logo: \"/google.svg\",\n      bg: \"#fff\",\n      text: \"#000\"\n    },\n    options\n  };\n}","import { NextAuthOptions } from 'next-auth'\nimport GoogleProvider from 'next-auth/providers/google'\nimport { supabaseAdmin } from './supabase'\n\nexport const authOptions: NextAuthOptions = {\n  providers: [\n    GoogleProvider({\n      clientId: process.env.GOOGLE_CLIENT_ID!,\n      clientSecret: process.env.GOOGLE_CLIENT_SECRET!,\n    }),\n  ],\n\n  callbacks: {\n    async signIn({ user, account }) {\n      if (!user.email) return false\n\n      try {\n        // Check if user exists in Supabase\n        const { data: existingUser } = await supabaseAdmin\n          .from('users')\n          .select('*')\n          .eq('email', user.email)\n          .single()\n\n        if (!existingUser) {\n          // Create new user in Supabase\n          await supabaseAdmin.from('users').insert({\n            email: user.email,\n            name: user.name,\n            image: user.image,\n            google_id: account?.providerAccountId,\n          })\n        } else {\n          // Update existing user\n          await supabaseAdmin\n            .from('users')\n            .update({\n              name: user.name,\n              image: user.image,\n              google_id: account?.providerAccountId,\n            })\n            .eq('email', user.email)\n        }\n\n        return true\n      } catch (error) {\n        console.error('Error in signIn callback:', error)\n        return false\n      }\n    },\n\n    async session({ session, token }) {\n      if (session.user) {\n        // Fetch additional user data from Supabase\n        const { data: userData } = await supabaseAdmin\n          .from('users')\n          .select('*')\n          .eq('email', session.user.email)\n          .single()\n\n        if (userData) {\n          session.user.id = userData.id\n          session.user.address = userData.address\n          session.user.city = userData.city\n          session.user.phone = userData.phone\n        }\n      }\n\n      return session\n    },\n  },\n\n  pages: {\n    signIn: '/', // Redirect to home page for sign in\n    error: '/', // Error page\n  },\n\n  session: {\n    strategy: 'jwt',\n  },\n\n  secret: process.env.NEXTAUTH_SECRET,\n}\n\n// Extend NextAuth types\ndeclare module 'next-auth' {\n  interface Session {\n    user: {\n      id: string\n      name?: string | null\n      email?: string | null\n      image?: string | null\n      phone?: string | null\n      address?: string | null\n      city?: string | null\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","vendored","React"],"mappings":"43BA0BQG,EAAOC,OAAO,CAAGC,EAAQ,CAAA,CAAA,IAAA,iCC1BjCF,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRI,QAAQ,CAAC,YAAY,CAAEC,KAAK,gVCA9B,OAAO,cAAc,CAAC,EAAS,aAAc,CAC3C,OAAO,CACT,GACA,EAAQ,OAAO,CACf,EADkB,OACT,AAAO,CAAO,EACrB,MAAO,CACL,GAAI,SACJ,KAAM,SACN,KAAM,QACN,UAAW,+DACX,cAAe,CACb,OAAQ,CACN,MAAO,sBACT,CACF,EACA,SAAS,EACT,OAAQ,CAAC,OAAQ,QAAQ,SACzB,AAAQ,IACC,CACL,EAFW,CAEP,EAAQ,GAAG,CACf,KAAM,EAAQ,IAAI,CAClB,MAAO,EAAQ,KAAK,CACpB,MAAO,EAAQ,OAAO,CACxB,EAEF,MAAO,CACL,KAAM,cACN,GAAI,OACJ,KAAM,MACR,UACA,CACF,CACF,0BCjCA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEO,IAAM,EAA+B,CAC1C,UAAW,CACT,CAAA,EAAA,EAAA,OAAA,AAAc,EAAC,CACb,SAAU,QAAQ,GAAG,CAAC,gBAAgB,CACtC,aAAc,QAAQ,GAAG,CAAC,oBAAoB,AAChD,GACD,CAED,UAAW,CACT,MAAM,OAAO,MAAE,CAAI,SAAE,CAAO,CAAE,EAC5B,GAAI,CAAC,EAAK,KAAK,CAAE,OAAO,EAExB,GAAI,CAEF,GAAM,CAAE,KAAM,CAAY,CAAE,CAAG,MAAM,EAAA,aAAa,CAC/C,IAAI,CAAC,SACL,MAAM,CAAC,KACP,EAAE,CAAC,QAAS,EAAK,KAAK,EACtB,MAAM,GAsBT,OApBK,EAUH,MAAM,EAAA,IAVW,SAUE,CAChB,IAAI,CAAC,SACL,MAAM,CAAC,CACN,KAAM,EAAK,IAAI,CACf,MAAO,EAAK,KAAK,CACjB,UAAW,GAAS,iBACtB,GACC,EAAE,CAAC,QAAS,EAAK,KAAK,EAfzB,MAAM,EAAA,aAAa,CAAC,IAAI,CAAC,SAAS,MAAM,CAAC,CACvC,MAAO,EAAK,KAAK,CACjB,KAAM,EAAK,IAAI,CACf,MAAO,EAAK,KAAK,CACjB,UAAW,GAAS,iBACtB,IAaK,CACT,CAAE,MAAO,EAAO,CAEd,OADA,QAAQ,KAAK,CAAC,4BAA6B,IACpC,CACT,CACF,EAEA,MAAM,QAAQ,SAAE,CAAO,OAAE,CAAK,CAAE,EAC9B,GAAI,EAAQ,IAAI,CAAE,CAEhB,GAAM,CAAE,KAAM,CAAQ,CAAE,CAAG,MAAM,EAAA,aAAa,CAC3C,IAAI,CAAC,SACL,MAAM,CAAC,KACP,EAAE,CAAC,QAAS,EAAQ,IAAI,CAAC,KAAK,EAC9B,MAAM,GAEL,IACF,EAAQ,IAAI,AADA,CACC,EAAE,CAAG,EAAS,EAAE,CAC7B,EAAQ,IAAI,CAAC,OAAO,CAAG,EAAS,OAAO,CACvC,EAAQ,IAAI,CAAC,IAAI,CAAG,EAAS,IAAI,CACjC,EAAQ,IAAI,CAAC,KAAK,CAAG,EAAS,KAAK,CAEvC,CAEA,OAAO,CACT,CACF,EAEA,MAAO,CACL,OAAQ,IACR,MAAO,GACT,EAEA,QAAS,CACP,SAAU,KACZ,EAEA,OAAQ,QAAQ,GAAG,CAAC,eAAe,AACrC","ignoreList":[0,1,2]}