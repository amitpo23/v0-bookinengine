module.exports=[918622,(e,r,t)=>{r.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},556704,(e,r,t)=>{r.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},832319,(e,r,t)=>{r.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},324725,(e,r,t)=>{r.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},193695,(e,r,t)=>{r.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},442315,(e,r,t)=>{"use strict";r.exports=e.r(918622)},347540,(e,r,t)=>{"use strict";r.exports=e.r(442315).vendored["react-rsc"].React},323831,e=>{"use strict";var r=e.i(224389);let t=[],s=null,o="\x1b[0m",a="\x1b[2m",n="\x1b[31m",i="\x1b[32m",l="\x1b[33m";function c(e,r=200){return e?e.length<=r?e:e.substring(0,r)+"...":""}class d{static instance;enabled=!0;constructor(){}static getInstance(){return d.instance||(d.instance=new d),d.instance}setEnabled(e){this.enabled=e}formatLogForConsole(e){var r;let t=new Date(e.timestamp).toLocaleTimeString("he-IL"),s=function(e){switch(e){case"api":return"ðŸŒ";case"medici":return"ðŸ¨";case"booking":return"ðŸ“‹";case"auth":return"ðŸ”";case"system":return"âš™ï¸";default:return"ðŸ“"}}(e.category),c=function(e){switch(e){case"debug":return a;case"info":return"\x1b[36m";case"warn":return l;case"error":return n;default:return"\x1b[37m"}}(e.level),d=`${a}[${t}]${o} ${s} ${c}[${e.level.toUpperCase()}]${o} `;if(d+=`\x1b[1m${e.action}${o}`,e.method&&e.endpoint){let r="GET"===e.method?i:"POST"===e.method?"\x1b[34m":"PUT"===e.method?l:n;d+=` ${r}${e.method}${o} ${e.endpoint}`}if(e.statusCode){let r=e.statusCode<300?i:e.statusCode<400?l:n;d+=` ${r}[${e.statusCode}]${o}`}return e.duration&&(d+=` \x1b[35m(${(r=e.duration)<1e3?`${r}ms`:`${(r/1e3).toFixed(2)}s`})${o}`),d}async log(e){if(!this.enabled)return;let r={...e,timestamp:new Date().toISOString()};console.log(this.formatLogForConsole(r)),"error"===e.level&&e.error&&console.error(`${n}  Error: ${e.error}${o}`),e.requestBody&&("debug"===e.level||"error"===e.level)&&console.log(`${a}  Request: ${c(JSON.stringify(e.requestBody))}${o}`),e.responseBody&&"error"===e.level&&console.log(`${a}  Response: ${c(JSON.stringify(e.responseBody))}${o}`),t.push(r),t.length>1e3&&t.shift(),this.saveToSupabase(r).catch(()=>{})}async saveToSupabase(e){let t=(!s&&process.env.NEXT_PUBLIC_SUPABASE_URL&&process.env.SUPABASE_SERVICE_KEY&&(s=(0,r.createClient)(process.env.NEXT_PUBLIC_SUPABASE_URL,process.env.SUPABASE_SERVICE_KEY)),s);if(t)try{await t.from("api_logs").insert({timestamp:e.timestamp,level:e.level,category:e.category,action:e.action,method:e.method,endpoint:e.endpoint,request_body:e.requestBody,response_body:e.responseBody,status_code:e.statusCode,duration_ms:e.duration,user_id:e.userId,session_id:e.sessionId,ip_address:e.ip,user_agent:e.userAgent,error_message:e.error,metadata:e.metadata})}catch(e){}}debug(e,r,t){this.log({level:"debug",category:e,action:r,metadata:t})}info(e,r,t){this.log({level:"info",category:e,action:r,metadata:t})}warn(e,r,t){this.log({level:"warn",category:e,action:r,metadata:t})}error(e,r,t,s){this.log({level:"error",category:e,action:r,error:t,metadata:s})}async logApiRequest(e){let r=e.statusCode>=500?"error":e.statusCode>=400?"warn":"info";await this.log({level:r,category:"api",action:"API Request",...e})}async logMediciCall(e){let r=e.statusCode>=500?"error":e.statusCode>=400?"warn":"info";await this.log({level:r,category:"medici",method:"POST",...e})}getRecentLogs(e=100,r){let s=[...t].reverse();return r&&(s=s.filter(e=>(!r.level||e.level===r.level)&&(!r.category||e.category===r.category)&&(!r.action||!!e.action.includes(r.action)))),s.slice(0,e)}clearBuffer(){t.length=0}}let u=d.getInstance();e.s(["apiLogger",0,u])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__d7b266e0._.js.map