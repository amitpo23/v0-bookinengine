module.exports=[23301,e=>{"use strict";let t={id:"hotel-search",name:"Hotel Search",nameHe:"חיפוש מלונות",description:"Search for available hotels with real-time pricing and availability",descriptionHe:"חיפוש מלונות זמינים עם תמחור וזמינות בזמן אמת",category:"search",capabilities:["search"],isEnabled:!0,priority:1,icon:"search",requiredPermissions:["booking:read"],tools:[{name:"search_hotels",description:"Search for available hotel rooms with pricing and availability",descriptionHe:"חיפוש חדרי מלון זמינים עם מחירים וזמינות",parameters:[{name:"destination",type:"string",description:"City or destination name",required:!0},{name:"checkIn",type:"date",description:"Check-in date (YYYY-MM-DD)",required:!0},{name:"checkOut",type:"date",description:"Check-out date (YYYY-MM-DD)",required:!0},{name:"adults",type:"number",description:"Number of adults",required:!0,default:2},{name:"children",type:"array",description:"Array of children ages",required:!1,default:[]},{name:"rooms",type:"number",description:"Number of rooms",required:!1,default:1},{name:"stars",type:"array",description:"Filter by star rating (1-5)",required:!1},{name:"maxPrice",type:"number",description:"Maximum price per night",required:!1},{name:"amenities",type:"array",description:"Required amenities",required:!1}],handler:"handlers/booking.searchHotels",isAsync:!0,timeout:3e4,retryConfig:{maxRetries:3,delayMs:1e3,exponentialBackoff:!0}},{name:"get_hotel_details",description:"Get detailed information about a specific hotel",descriptionHe:"קבלת מידע מפורט על מלון ספציפי",parameters:[{name:"hotelId",type:"string",description:"Hotel ID",required:!0}],handler:"handlers/booking.getHotelDetails",isAsync:!0,timeout:15e3}]},r={id:"destination-search",name:"Destination Search",nameHe:"חיפוש יעדים",description:"Search and get information about travel destinations",descriptionHe:"חיפוש וקבלת מידע על יעדי נסיעות",category:"search",capabilities:["search","knowledge-base"],isEnabled:!0,priority:2,icon:"map-pin",requiredPermissions:["search:read"],tools:[{name:"search_destinations",description:"Search for travel destinations by name or criteria",parameters:[{name:"query",type:"string",description:"Search query",required:!0},{name:"type",type:"string",description:"Destination type: city, beach, mountain, etc.",required:!1}],handler:"handlers/search.searchDestinations",isAsync:!0,timeout:1e4},{name:"get_destination_info",description:"Get detailed information about a destination",parameters:[{name:"destination",type:"string",description:"Destination name",required:!0},{name:"topics",type:"array",description:"Info topics: weather, attractions, safety, cuisine",required:!1}],handler:"handlers/search.getDestinationInfo",isAsync:!0,timeout:15e3}]},n={id:"prebook",name:"Hotel Pre-booking",nameHe:"הזמנה מוקדמת",description:"Pre-book a room to confirm availability and lock the price",descriptionHe:"הזמנה מוקדמת לחדר לאישור זמינות ונעילת מחיר",category:"booking",capabilities:["prebook"],isEnabled:!0,priority:3,icon:"clock",requiredPermissions:["booking:write"],tools:[{name:"prebook_room",description:"Pre-book a room to confirm availability and lock price temporarily",descriptionHe:"הזמנה מוקדמת של חדר לאישור זמינות ונעילת מחיר",parameters:[{name:"hotelId",type:"string",description:"Hotel ID",required:!0},{name:"roomCode",type:"string",description:"Room code from search results",required:!0},{name:"checkIn",type:"date",description:"Check-in date",required:!0},{name:"checkOut",type:"date",description:"Check-out date",required:!0},{name:"adults",type:"number",description:"Number of adults",required:!0},{name:"children",type:"array",description:"Children ages",required:!1}],handler:"handlers/booking.prebookRoom",isAsync:!0,timeout:3e4}]},i={id:"booking",name:"Hotel Booking",nameHe:"הזמנת מלון",description:"Complete hotel booking with customer details and payment",descriptionHe:"השלמת הזמנת מלון עם פרטי לקוח ותשלום",category:"booking",capabilities:["booking","payment-processing"],isEnabled:!0,priority:4,icon:"check-circle",requiredPermissions:["booking:write","payment:process"],tools:[{name:"complete_booking",description:"Complete the booking with customer details and payment",descriptionHe:"השלמת ההזמנה עם פרטי לקוח ותשלום",parameters:[{name:"prebookToken",type:"string",description:"Token from prebook",required:!0},{name:"customer",type:"object",description:"Customer details",required:!0},{name:"guests",type:"array",description:"Guest list",required:!0},{name:"specialRequests",type:"string",description:"Special requests",required:!1},{name:"paymentMethod",type:"string",description:"Payment method",required:!1}],handler:"handlers/booking.completeBooking",isAsync:!0,timeout:6e4},{name:"get_booking_status",description:"Get the status of an existing booking",parameters:[{name:"bookingId",type:"string",description:"Booking ID or confirmation number",required:!0}],handler:"handlers/booking.getBookingStatus",isAsync:!0,timeout:15e3}]},o={id:"cancellation",name:"Booking Cancellation",nameHe:"ביטול הזמנה",description:"Cancel or modify existing bookings",descriptionHe:"ביטול או שינוי הזמנות קיימות",category:"booking",capabilities:["cancellation","modification"],isEnabled:!0,priority:5,icon:"x-circle",requiredPermissions:["booking:cancel"],tools:[{name:"cancel_booking",description:"Cancel an existing booking",descriptionHe:"ביטול הזמנה קיימת",parameters:[{name:"bookingId",type:"string",description:"Booking ID",required:!0},{name:"reason",type:"string",description:"Cancellation reason",required:!1}],handler:"handlers/booking.cancelBooking",isAsync:!0,timeout:3e4},{name:"get_cancellation_policy",description:"Get cancellation policy and potential penalties",parameters:[{name:"bookingId",type:"string",description:"Booking ID",required:!0}],handler:"handlers/booking.getCancellationPolicy",isAsync:!0,timeout:1e4},{name:"modify_booking",description:"Modify an existing booking (dates, guests, room)",parameters:[{name:"bookingId",type:"string",description:"Booking ID",required:!0},{name:"modifications",type:"object",description:"Changes to apply",required:!0}],handler:"handlers/booking.modifyBooking",isAsync:!0,timeout:45e3}]},s={id:"price-monitoring",name:"Price Monitoring",nameHe:"מעקב מחירים",description:"Track and analyze hotel prices over time",descriptionHe:"מעקב וניתוח מחירי מלונות לאורך זמן",category:"analysis",capabilities:["price-tracking","analytics"],isEnabled:!0,priority:6,icon:"trending-down",requiredPermissions:["monitoring:read","monitoring:write"],tools:[{name:"track_price",description:"Start tracking price for a hotel",parameters:[{name:"hotelId",type:"string",description:"Hotel ID",required:!0},{name:"checkIn",type:"date",description:"Check-in date",required:!0},{name:"checkOut",type:"date",description:"Check-out date",required:!0},{name:"targetPrice",type:"number",description:"Alert when price drops below",required:!1},{name:"notifyEmail",type:"string",description:"Email for alerts",required:!1}],handler:"handlers/monitoring.trackPrice",isAsync:!0,timeout:15e3},{name:"get_price_history",description:"Get historical price data",parameters:[{name:"hotelId",type:"string",description:"Hotel ID",required:!0},{name:"days",type:"number",description:"Number of days of history",required:!1,default:30}],handler:"handlers/monitoring.getPriceHistory",isAsync:!0,timeout:1e4},{name:"analyze_price_trends",description:"Analyze price trends and predict best booking time",parameters:[{name:"hotelId",type:"string",description:"Hotel ID",required:!0},{name:"travelDates",type:"object",description:"Travel date range",required:!0}],handler:"handlers/monitoring.analyzeTrends",isAsync:!0,timeout:2e4}]},a={id:"notifications",name:"Notifications",nameHe:"התראות",description:"Send booking confirmations and notifications",descriptionHe:"שליחת אישורי הזמנה והתראות",category:"communication",capabilities:["email-notification","sms-notification"],isEnabled:!0,priority:7,icon:"bell",requiredPermissions:["notifications:send"],tools:[{name:"send_confirmation_email",description:"Send booking confirmation email",parameters:[{name:"bookingId",type:"string",description:"Booking ID",required:!0},{name:"recipientEmail",type:"string",description:"Recipient email",required:!0}],handler:"handlers/notifications.sendConfirmationEmail",isAsync:!0,timeout:15e3},{name:"send_sms",description:"Send SMS notification",parameters:[{name:"phoneNumber",type:"string",description:"Phone number (E.164)",required:!0},{name:"message",type:"string",description:"Message content",required:!0}],handler:"handlers/notifications.sendSms",isAsync:!0,timeout:1e4}]},l={id:"voice",name:"Voice Interaction",nameHe:"אינטראקציה קולית",description:"Handle voice calls with speech-to-text and text-to-speech",descriptionHe:"טיפול בשיחות קוליות עם המרת דיבור לטקסט וטקסט לדיבור",category:"communication",capabilities:["voice-interaction","real-time-streaming"],isEnabled:!0,priority:8,icon:"phone",requiredPermissions:["voice:read","voice:write"],tools:[{name:"initiate_call",description:"Initiate outbound phone call",parameters:[{name:"phoneNumber",type:"string",description:"Phone number (E.164)",required:!0},{name:"purpose",type:"string",description:"Call purpose",required:!0},{name:"language",type:"string",description:"Call language",required:!1,default:"he-IL"}],handler:"handlers/voice.initiateCall",isAsync:!0,timeout:12e4},{name:"transfer_to_agent",description:"Transfer call to human agent",parameters:[{name:"reason",type:"string",description:"Transfer reason",required:!0},{name:"queue",type:"string",description:"Target queue",required:!1}],handler:"handlers/voice.transferToAgent",isAsync:!0,timeout:3e4}]},c={id:"customer-support",name:"Customer Support",nameHe:"תמיכת לקוחות",description:"Handle customer inquiries and complaints",descriptionHe:"טיפול בפניות ותלונות לקוחות",category:"support",capabilities:["knowledge-base","handoff-to-human"],isEnabled:!0,priority:9,icon:"headphones",requiredPermissions:["support:read","support:write"],tools:[{name:"search_faq",description:"Search FAQ for answers",parameters:[{name:"question",type:"string",description:"Customer question",required:!0}],handler:"handlers/support.searchFaq",isAsync:!0,timeout:5e3},{name:"create_ticket",description:"Create support ticket",parameters:[{name:"subject",type:"string",description:"Ticket subject",required:!0},{name:"description",type:"string",description:"Issue description",required:!0},{name:"priority",type:"string",description:"Priority: low, medium, high",required:!1,default:"medium"}],handler:"handlers/support.createTicket",isAsync:!0,timeout:1e4},{name:"escalate_to_human",description:"Escalate conversation to human agent",parameters:[{name:"reason",type:"string",description:"Escalation reason",required:!0},{name:"urgency",type:"string",description:"Urgency level",required:!1}],handler:"handlers/support.escalateToHuman",isAsync:!0,timeout:15e3}]},d={id:"loyalty",name:"Loyalty Program",nameHe:"תוכנית נאמנות",description:"Manage loyalty points and rewards",descriptionHe:"ניהול נקודות נאמנות ותגמולים",category:"personalization",capabilities:["loyalty-points","analytics"],isEnabled:!0,priority:10,icon:"star",requiredPermissions:["loyalty:read","loyalty:write"],tools:[{name:"get_loyalty_balance",description:"Get loyalty points balance",parameters:[{name:"userId",type:"string",description:"User ID",required:!0}],handler:"handlers/loyalty.getBalance",isAsync:!0,timeout:5e3},{name:"redeem_points",description:"Redeem loyalty points for rewards",parameters:[{name:"userId",type:"string",description:"User ID",required:!0},{name:"points",type:"number",description:"Points to redeem",required:!0},{name:"rewardType",type:"string",description:"Reward type",required:!0}],handler:"handlers/loyalty.redeemPoints",isAsync:!0,timeout:15e3},{name:"apply_discount",description:"Apply member discount to booking",parameters:[{name:"bookingId",type:"string",description:"Booking ID",required:!0},{name:"userId",type:"string",description:"User ID",required:!0}],handler:"handlers/loyalty.applyDiscount",isAsync:!0,timeout:1e4}]},u={id:"preferences",name:"User Preferences",nameHe:"העדפות משתמש",description:"Learn and apply user preferences",descriptionHe:"לימוד ויישום העדפות משתמש",category:"personalization",capabilities:["analytics"],isEnabled:!0,priority:11,icon:"settings",requiredPermissions:["user:read","user:write"],tools:[{name:"get_preferences",description:"Get user preferences",parameters:[{name:"userId",type:"string",description:"User ID",required:!0}],handler:"handlers/preferences.getPreferences",isAsync:!0,timeout:5e3},{name:"update_preferences",description:"Update user preferences",parameters:[{name:"userId",type:"string",description:"User ID",required:!0},{name:"preferences",type:"object",description:"Preferences to update",required:!0}],handler:"handlers/preferences.updatePreferences",isAsync:!0,timeout:1e4},{name:"get_recommendations",description:"Get personalized hotel recommendations",parameters:[{name:"userId",type:"string",description:"User ID",required:!0},{name:"destination",type:"string",description:"Destination",required:!0},{name:"dates",type:"object",description:"Travel dates",required:!0}],handler:"handlers/preferences.getRecommendations",isAsync:!0,timeout:15e3}]},p=[t,r,n,i,o,s,a,l,c,d,u];e.s(["allSkills",0,p,"bookingSkill",0,i,"cancellationSkill",0,o,"customerSupportSkill",0,c,"destinationSearchSkill",0,r,"hotelSearchSkill",0,t,"loyaltySkill",0,d,"notificationSkill",0,a,"prebookSkill",0,n,"preferencesSkill",0,u,"priceMonitoringSkill",0,s,"voiceSkill",0,l])},60859,e=>{"use strict";var t=e.i(23301);let r=[{id:"hotel-booking-agent",type:"hotel-booking",name:"Hotel Booking Agent",nameHe:"סוכן הזמנות מלון",description:"Complete hotel booking agent with search, prebook, and booking capabilities",descriptionHe:"סוכן הזמנות מלון מלא עם יכולות חיפוש, הזמנה מוקדמת והזמנה",version:"1.0.0",icon:"building-2",color:"blue",skills:[t.hotelSearchSkill,t.prebookSkill,t.bookingSkill,t.cancellationSkill,t.notificationSkill],capabilities:["search","prebook","booking","cancellation","email-notification"],modelConfig:{provider:"groq",model:"llama-3.3-70b-versatile",temperature:.7,maxTokens:4096,topP:.9},persona:{name:"Alex",nameHe:"אלכס",role:"Senior Booking Agent",roleHe:"סוכן הזמנות בכיר",personality:["professional","helpful","efficient","knowledgeable"],communicationStyle:"friendly-professional",expertise:["hotel bookings","travel planning","customer service"],languages:["en","he","ar"]},prompts:{systemPrompt:`You are Alex, a senior hotel booking agent. Your role is to help customers find and book the perfect hotel accommodations.

CORE RESPONSIBILITIES:
1. Search for hotels based on customer requirements
2. Present options clearly with pricing and key features
3. Guide customers through the booking process
4. Handle special requests and preferences
5. Provide cancellation and modification assistance

BOOKING FLOW:
1. Gather requirements: destination, dates, guests, preferences
2. Search for available hotels using search_hotels
3. Present top 3-5 options with key details
4. When customer selects, use prebook_room to confirm availability
5. Collect customer details and complete booking
6. Send confirmation email

GUIDELINES:
- Always confirm dates and guest count before searching
- Present prices clearly in the customer's preferred currency
- Highlight cancellation policies
- Be proactive about special offers

LANGUAGE: Respond in the same language the customer uses.`,systemPromptHe:`אתה אלכס, סוכן הזמנות מלון בכיר. תפקידך לעזור ללקוחות למצוא ולהזמין את המלון המושלם.

תחומי אחריות:
1. חיפוש מלונות לפי דרישות הלקוח
2. הצגת אפשרויות ברורה עם מחירים ותכונות
3. ליווי לקוחות בתהליך ההזמנה
4. טיפול בבקשות מיוחדות
5. סיוע בביטולים ושינויים

זרימת הזמנה:
1. איסוף דרישות: יעד, תאריכים, אורחים
2. חיפוש מלונות זמינים
3. הצגת 3-5 אפשרויות מובילות
4. הזמנה מוקדמת לבדיקת זמינות
5. איסוף פרטי לקוח והשלמת הזמנה
6. שליחת אישור במייל`,greetingMessage:"Hello! I'm Alex, your hotel booking assistant. How can I help you find the perfect accommodation today?",greetingMessageHe:`שלום! אני אלכס, עוזר ההזמנות שלך. איך אוכל לעזור לך למצוא את המלון המושלם היום?`,errorMessages:{noResults:"I couldn't find any hotels matching your criteria. Would you like to adjust your search?",bookingFailed:"There was an issue completing your booking. Let me try again.",timeout:"The search is taking longer than expected. Please wait a moment.",general:"Something went wrong. Let me help you with that."}},config:{maxConversationTurns:50,contextWindowSize:20,enableMemory:!0,enableLogging:!0,logLevel:"info",enableAnalytics:!0,responseTimeout:3e4,autoSave:!0},integrations:{hotelApi:{enabled:!0,provider:"medici"},payment:{enabled:!0,provider:"stripe",supportedMethods:["card","apple_pay","google_pay"]}}},{id:"price-monitor-agent",type:"price-monitor",name:"Price Monitor Agent",nameHe:"סוכן מעקב מחירים",description:"Automated price monitoring with alerts and trend analysis",descriptionHe:"מעקב מחירים אוטומטי עם התראות וניתוח מגמות",version:"1.0.0",icon:"trending-down",color:"green",skills:[t.hotelSearchSkill,t.priceMonitoringSkill,t.notificationSkill],capabilities:["search","price-tracking","analytics","email-notification"],modelConfig:{provider:"groq",model:"llama-3.1-8b-instant",temperature:.3,maxTokens:2048},persona:{name:"Atlas",nameHe:"אטלס",role:"Price Analyst",roleHe:"אנליסט מחירים",personality:["analytical","precise","data-driven","proactive"],communicationStyle:"informative-concise",expertise:["price analysis","market trends","deal detection"],languages:["en","he"]},prompts:{systemPrompt:`You are Atlas, a price monitoring specialist. You track hotel prices and help users book at the best time.

CAPABILITIES:
1. Track prices for specific hotels and dates
2. Analyze historical pricing patterns
3. Predict optimal booking windows
4. Alert users to significant price drops

INSIGHTS TO PROVIDE:
- Price trends (rising, falling, stable)
- Best time to book
- Comparison with similar hotels
- Seasonal patterns

Be concise and data-driven. Present numbers clearly.`,greetingMessage:"Hi! I'm Atlas, your price monitoring assistant. I can track hotel prices and alert you to the best deals. What would you like to monitor?",greetingMessageHe:`שלום! אני אטלס, עוזר מעקב המחירים שלך. אני יכול לעקוב אחר מחירי מלונות ולהתריע על העסקאות הטובות ביותר. מה תרצה לעקוב?`,errorMessages:{noResults:"I couldn't find pricing data for this hotel.",bookingFailed:"Unable to start price tracking.",timeout:"Data retrieval is taking longer than expected.",general:"Something went wrong with the analysis."}},config:{maxConversationTurns:30,contextWindowSize:15,enableMemory:!0,enableLogging:!0,logLevel:"info",enableAnalytics:!0,responseTimeout:2e4,autoSave:!0}},{id:"customer-support-agent",type:"customer-support",name:"Customer Support Agent",nameHe:"סוכן תמיכת לקוחות",description:"Customer support for booking issues and inquiries",descriptionHe:"תמיכת לקוחות לבעיות הזמנה ובירורים",version:"1.0.0",icon:"headphones",color:"purple",skills:[t.cancellationSkill,t.customerSupportSkill,t.notificationSkill],capabilities:["cancellation","modification","knowledge-base","handoff-to-human"],modelConfig:{provider:"groq",model:"llama-3.3-70b-versatile",temperature:.5,maxTokens:2048},persona:{name:"Sophie",nameHe:"סופי",role:"Customer Support Specialist",roleHe:"מומחית תמיכת לקוחות",personality:["empathetic","patient","solution-oriented","calm"],communicationStyle:"understanding-helpful",expertise:["issue resolution","policy expertise","customer advocacy"],languages:["en","he","ar","ru"]},prompts:{systemPrompt:`You are Sophie, a customer support specialist. You handle booking issues with empathy and efficiency.

PRIORITIES:
1. Acknowledge the customer's concern
2. Apologize sincerely when appropriate
3. Take ownership of the issue
4. Find the best possible solution
5. Follow up to ensure satisfaction

COMMON ISSUES:
- Booking modifications and cancellations
- Refund requests
- Complaint resolution
- Policy clarification

ESCALATION: Escalate to human agent when:
- Customer explicitly requests
- Legal/safety concerns
- High-value customer at risk
- Unable to resolve after 3 attempts

Always validate the customer's feelings and offer solutions, not excuses.`,greetingMessage:"Hello, I'm Sophie from customer support. I'm here to help with any concerns about your booking. How can I assist you?",greetingMessageHe:`שלום, אני סופי מתמיכת הלקוחות. אני כאן לעזור עם כל שאלה בנוגע להזמנה שלך. במה אוכל לסייע?`,errorMessages:{noResults:"I couldn't find that booking. Could you double-check the confirmation number?",bookingFailed:"I'm having trouble processing that. Let me connect you with a specialist.",timeout:"This is taking a moment. Please hold on.",general:"I apologize for the inconvenience. Let me look into this."}},config:{maxConversationTurns:40,contextWindowSize:25,enableMemory:!0,enableLogging:!0,logLevel:"info",enableAnalytics:!0,responseTimeout:25e3,autoSave:!0}},{id:"voice-booking-agent",type:"voice-agent",name:"Voice Booking Agent",nameHe:"סוכן הזמנות קולי",description:"Voice-enabled agent for phone-based hotel bookings",descriptionHe:"סוכן קולי להזמנות מלון טלפוניות",version:"1.0.0",icon:"phone",color:"orange",skills:[t.hotelSearchSkill,t.prebookSkill,t.bookingSkill,t.voiceSkill],capabilities:["search","prebook","booking","voice-interaction","sms-notification"],modelConfig:{provider:"openai",model:"gpt-4o",temperature:.7,maxTokens:1024},persona:{name:"Sam",nameHe:"סם",role:"Voice Booking Specialist",roleHe:"מומחה הזמנות קולי",personality:["clear","patient","efficient","friendly"],communicationStyle:"conversational-clear",expertise:["phone bookings","audio clarity","efficient communication"],languages:["en","he"],voiceId:"he-IL-HilaNeural"},prompts:{systemPrompt:`You are Sam, a voice booking specialist handling phone calls for hotel reservations.

VOICE GUIDELINES:
1. Speak clearly and at moderate pace
2. Confirm information by repeating key details
3. Use phonetic spelling for important codes
4. Break complex information into digestible parts
5. Allow pauses for customer responses

CALL FLOW:
1. Greet and identify yourself
2. Determine: new booking, modification, or cancellation
3. Gather requirements step by step
4. Confirm all details before proceeding
5. Provide confirmation number clearly
6. Offer to send SMS summary

Keep sentences short. Avoid jargon.`,greetingMessage:"Thank you for calling! This is Sam, your booking assistant. How can I help you today?",greetingMessageHe:`תודה שהתקשרת! כאן סם, עוזר ההזמנות שלך. איך אוכל לעזור לך היום?`,errorMessages:{noResults:"I couldn't find any hotels for those dates. Would you like to try different dates?",bookingFailed:"I'm having trouble completing the booking. Let me try again.",timeout:"Please hold on a moment while I search.",general:"I apologize, there seems to be an issue. Let me help you with that."}},config:{maxConversationTurns:60,contextWindowSize:15,enableMemory:!0,enableLogging:!0,logLevel:"info",enableAnalytics:!0,responseTimeout:1e4,autoSave:!0,enableVoice:!0,voiceConfig:{sttProvider:"azure",ttsProvider:"azure",voiceId:"he-IL-HilaNeural",language:"he-IL",prosodyRate:.95}}},{id:"concierge-agent",type:"concierge",name:"Hotel Concierge",nameHe:"קונסיירז' מלון",description:"In-stay concierge for guest services and recommendations",descriptionHe:"קונסיירז' לשירותי אורחים והמלצות",version:"1.0.0",icon:"sparkles",color:"gold",skills:[t.destinationSearchSkill,t.customerSupportSkill,t.notificationSkill],capabilities:["knowledge-base","search","sms-notification"],modelConfig:{provider:"groq",model:"llama-3.3-70b-versatile",temperature:.6,maxTokens:2048},persona:{name:"James",nameHe:"ג'יימס",role:"Head Concierge",roleHe:"ראש הקונסיירז'",personality:["sophisticated","attentive","resourceful","discrete"],communicationStyle:"formal-elegant",expertise:["local dining","entertainment","transportation","special requests"],languages:["en","he","fr","it","de"]},prompts:{systemPrompt:`You are James, the head concierge at a luxury hotel. You provide impeccable service with extensive local knowledge.

SERVICES:
- Restaurant reservations and recommendations
- Transportation arrangements
- Entertainment and event tickets
- Local tours and experiences
- Special occasion arrangements
- Room service coordination

STANDARDS:
- Maintain highest professionalism
- Anticipate guest needs
- Know local establishments personally
- Handle requests with discretion
- Provide multiple options

Never say "no" - always offer alternatives.`,greetingMessage:"Good day. I'm James, your concierge. How may I be of service during your stay?",greetingMessageHe:`יום טוב. אני ג'יימס, הקונסיירז' שלך. במה אוכל לסייע במהלך שהייתך?`,errorMessages:{noResults:"I'm having difficulty finding that. Let me suggest some alternatives.",bookingFailed:"I apologize, but I'm unable to arrange that at the moment. May I offer another option?",timeout:"Please allow me a moment to arrange this for you.",general:"I apologize for any inconvenience. Allow me to assist you personally."}},config:{maxConversationTurns:40,contextWindowSize:20,enableMemory:!0,enableLogging:!0,logLevel:"info",enableAnalytics:!0,responseTimeout:2e4,autoSave:!0}},{id:"group-booking-agent",type:"group-booking",name:"Group Booking Agent",nameHe:"סוכן הזמנות קבוצתיות",description:"Specialized agent for corporate and group bookings",descriptionHe:"סוכן מתמחה בהזמנות לחברות וקבוצות",version:"1.0.0",icon:"users",color:"indigo",skills:[t.hotelSearchSkill,t.prebookSkill,t.bookingSkill,t.loyaltySkill],capabilities:["search","prebook","booking","analytics","loyalty-points"],modelConfig:{provider:"groq",model:"llama-3.3-70b-versatile",temperature:.6,maxTokens:4096},persona:{name:"David",nameHe:"דוד",role:"Corporate Sales Manager",roleHe:"מנהל מכירות לעסקים",personality:["professional","negotiator","strategic","relationship-focused"],communicationStyle:"business-professional",expertise:["corporate travel","group rates","contract negotiation","event planning"],languages:["en","he"]},prompts:{systemPrompt:`You are David, a corporate sales manager specializing in group and business travel.

EXPERTISE:
1. Conference and event accommodations
2. Corporate rate negotiations
3. Multiple room blocks
4. Meeting room requirements
5. Group amenities

DISCOVERY:
- Company/Organization name
- Event type and purpose
- Number of rooms needed
- Date flexibility
- Budget constraints
- Meeting room requirements

NEGOTIATION:
- Volume discounts (10+ rooms)
- Complimentary upgrades
- Meeting room rates
- Breakfast inclusions
- Payment terms

Provide itemized quotes and comparison options.`,greetingMessage:"Hello, I'm David from our corporate booking team. Whether you're planning a conference, retreat, or team event, I'm here to find the perfect solution. What brings you to us today?",greetingMessageHe:`שלום, אני דוד מצוות ההזמנות לעסקים. בין אם אתה מתכנן כנס, יום גיבוש או אירוע צוות - אני כאן למצוא את הפתרון המושלם. מה מביא אותך אלינו?`,errorMessages:{noResults:"I couldn't find availability for those requirements. Let me check alternative dates or venues.",bookingFailed:"There was an issue with the group booking. Let me work on this personally.",timeout:"Group bookings take a bit longer to process. Please bear with me.",general:"I apologize for the inconvenience. Let me assist you directly."}},config:{maxConversationTurns:60,contextWindowSize:30,enableMemory:!0,enableLogging:!0,logLevel:"info",enableAnalytics:!0,responseTimeout:45e3,autoSave:!0}},{id:"loyalty-manager-agent",type:"loyalty-manager",name:"Loyalty Manager",nameHe:"מנהל נאמנות",description:"Manage loyalty program, points, and member benefits",descriptionHe:"ניהול תוכנית נאמנות, נקודות והטבות חברים",version:"1.0.0",icon:"star",color:"yellow",skills:[t.loyaltySkill,t.preferencesSkill,t.notificationSkill],capabilities:["loyalty-points","analytics","email-notification"],modelConfig:{provider:"groq",model:"llama-3.1-8b-instant",temperature:.5,maxTokens:2048},persona:{name:"Emma",nameHe:"אמה",role:"Loyalty Program Manager",roleHe:"מנהלת תוכנית נאמנות",personality:["enthusiastic","rewarding","helpful","knowledgeable"],communicationStyle:"friendly-encouraging",expertise:["loyalty programs","rewards optimization","member benefits"],languages:["en","he"]},prompts:{systemPrompt:`You are Emma, the loyalty program manager. You help members maximize their rewards and benefits.

SERVICES:
1. Points balance inquiries
2. Rewards redemption
3. Tier status and benefits
4. Points earning opportunities
5. Member-exclusive offers

UPSELLING:
- Promote tier upgrades
- Highlight point-earning opportunities
- Showcase exclusive member deals
- Encourage repeat bookings

Be enthusiastic about rewards and make members feel valued.`,greetingMessage:"Hi! I'm Emma, your loyalty program assistant. I'm here to help you make the most of your membership rewards. How can I assist you today?",greetingMessageHe:`היי! אני אמה, עוזרת תוכנית הנאמנות שלך. אני כאן לעזור לך להפיק את המרב מהטבות החברות. איך אוכל לעזור?`,errorMessages:{noResults:"I couldn't find your loyalty account. Let me help you locate it.",bookingFailed:"There was an issue processing your rewards. Let me fix that.",timeout:"Just a moment while I check your account.",general:"I apologize for the inconvenience. Let me help you with your rewards."}},config:{maxConversationTurns:30,contextWindowSize:15,enableMemory:!0,enableLogging:!0,logLevel:"info",enableAnalytics:!0,responseTimeout:15e3,autoSave:!0}}];e.s(["allTemplates",0,r,"getTemplateById",0,e=>r.find(t=>t.id===e)])},79414,e=>{"use strict";let t,r,n,i,o,s,a,l,c,d,u="0.37.0",p=!1;var m,h,g,f,y,b,w,k,S,v,x,A,I,q,E,R=e.i(49514),C=e.i(24361),P=e.i(69087),T=e.i(56760),H=e.i(74238),_=e.i(70418);let L=(0,C.deprecate)(()=>{},'Constructor "entries" argument is not spec-compliant and will be removed in next major release.');var M=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class D{constructor(e){m.add(this),h.set(this,new Map),e&&(L(),e.forEach(({name:e,value:t,fileName:r})=>this.append(e,t,r)))}static[(h=new WeakMap,m=new WeakSet,Symbol.hasInstance)](e){return!!(e&&(0,_.isFunction)(e.constructor)&&"FormData"===e[Symbol.toStringTag]&&(0,_.isFunction)(e.append)&&(0,_.isFunction)(e.set)&&(0,_.isFunction)(e.get)&&(0,_.isFunction)(e.getAll)&&(0,_.isFunction)(e.has)&&(0,_.isFunction)(e.delete)&&(0,_.isFunction)(e.entries)&&(0,_.isFunction)(e.values)&&(0,_.isFunction)(e.keys)&&(0,_.isFunction)(e[Symbol.iterator])&&(0,_.isFunction)(e.forEach))}append(e,t,r){M(this,m,"m",g).call(this,{name:e,fileName:r,append:!0,rawValue:t,argsLength:arguments.length})}set(e,t,r){M(this,m,"m",g).call(this,{name:e,fileName:r,append:!1,rawValue:t,argsLength:arguments.length})}get(e){let t=M(this,h,"f").get(String(e));return t?t[0]:null}getAll(e){let t=M(this,h,"f").get(String(e));return t?t.slice():[]}has(e){return M(this,h,"f").has(String(e))}delete(e){M(this,h,"f").delete(String(e))}*keys(){for(let e of M(this,h,"f").keys())yield e}*entries(){for(let e of this.keys())for(let t of this.getAll(e))yield[e,t]}*values(){for(let[,e]of this)yield e}[(g=function({name:e,rawValue:t,append:r,fileName:n,argsLength:i}){let o,s=r?"append":"set";if(i<2)throw TypeError(`Failed to execute '${s}' on 'FormData': 2 arguments required, but only ${i} present.`);if(e=String(e),(0,T.isFile)(t))o=void 0===n?t:new P.File([t],n,{type:t.type,lastModified:t.lastModified});else if(t instanceof H.Blob)o=new P.File([t],void 0===n?"blob":n,{type:t.type});else if(n)throw TypeError(`Failed to execute '${s}' on 'FormData': parameter 2 is not of type 'Blob'.`);else o=String(t);let a=M(this,h,"f").get(e);a&&r?a.push(o):M(this,h,"f").set(e,[o])},Symbol.iterator)](){return this.entries()}forEach(e,t){for(let[r,n]of this)e.call(t,n,r,this)}get[Symbol.toStringTag](){return"FormData"}[C.inspect.custom](){return this[Symbol.toStringTag]}}var O=e.i(34502),$=e.i(6983),B=e.i(2157);let F="abcdefghijklmnopqrstuvwxyz0123456789",j=function(){let e=16,t="";for(;e--;)t+=F[Math.random()*F.length|0];return t},U=function(e){if("object"!==Object.prototype.toString.call(e).slice(8,-1).toLowerCase())return!1;let t=Object.getPrototypeOf(e);return null==t||(t.constructor&&t.constructor.toString())===Object.toString()},N=e=>String(e).replace(/\r|\n/g,(e,t,r)=>"\r"===e&&"\n"!==r[t+1]||"\n"===e&&"\r"!==r[t-1]?"\r\n":e),W=e=>String(e).replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/"/g,"%22"),z=e=>!!(e&&"object"==typeof e&&"function"==typeof e.constructor&&"File"===e[Symbol.toStringTag]&&"function"==typeof e.stream&&null!=e.name&&null!=e.size&&null!=e.lastModified);var G=function(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},X=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};let V={enableAdditionalHeaders:!1};class Y{constructor(e,t,r){let n;if(f.add(this),y.set(this,"\r\n"),b.set(this,void 0),w.set(this,void 0),k.set(this,"-".repeat(2)),S.set(this,new TextEncoder),v.set(this,void 0),x.set(this,void 0),A.set(this,void 0),!(e=>!!(e&&"function"==typeof e.constructor&&"FormData"===e[Symbol.toStringTag]&&"function"==typeof e.append&&"function"==typeof e.getAll&&"function"==typeof e.entries&&"function"==typeof e[Symbol.iterator]))(e))throw TypeError("Expected first argument to be a FormData instance.");if(U(t)?r=t:n=t,n||(n=j()),"string"!=typeof n)throw TypeError("Expected boundary argument to be a string.");if(r&&!U(r))throw TypeError("Expected options argument to be an object.");G(this,x,e,"f"),G(this,A,{...V,...r},"f"),G(this,b,X(this,S,"f").encode(X(this,y,"f")),"f"),G(this,w,X(this,b,"f").byteLength,"f"),this.boundary=`form-data-boundary-${n}`,this.contentType=`multipart/form-data; boundary=${this.boundary}`,G(this,v,X(this,S,"f").encode(`${X(this,k,"f")}${this.boundary}${X(this,k,"f")}${X(this,y,"f").repeat(2)}`),"f"),this.contentLength=String(this.getContentLength()),this.headers=Object.freeze({"Content-Type":this.contentType,"Content-Length":this.contentLength}),Object.defineProperties(this,{boundary:{writable:!1,configurable:!1},contentType:{writable:!1,configurable:!1},contentLength:{writable:!1,configurable:!1},headers:{writable:!1,configurable:!1}})}getContentLength(){let e=0;for(let[t,r]of X(this,x,"f")){let n=z(r)?r:X(this,S,"f").encode(N(r));e+=X(this,f,"m",I).call(this,t,n).byteLength,e+=z(n)?n.size:n.byteLength,e+=X(this,w,"f")}return e+X(this,v,"f").byteLength}*values(){for(let[e,t]of X(this,x,"f").entries()){let r=z(t)?t:X(this,S,"f").encode(N(t));yield X(this,f,"m",I).call(this,e,r),yield r,yield X(this,b,"f")}yield X(this,v,"f")}async *encode(){for(let e of this.values())z(e)?yield*e.stream():yield e}[(y=new WeakMap,b=new WeakMap,w=new WeakMap,k=new WeakMap,S=new WeakMap,v=new WeakMap,x=new WeakMap,A=new WeakMap,f=new WeakSet,I=function(e,t){let r="";return r+=`${X(this,k,"f")}${this.boundary}${X(this,y,"f")}Content-Disposition: form-data; name="${W(e)}"`,z(t)&&(r+=`; filename="${W(t.name)}"${X(this,y,"f")}Content-Type: ${t.type||"application/octet-stream"}`),!0===X(this,A,"f").enableAdditionalHeaders&&(r+=`${X(this,y,"f")}Content-Length: ${z(t)?t.size:t.byteLength}`),X(this,S,"f").encode(`${r}${X(this,y,"f").repeat(2)}`)},Symbol.iterator)](){return this.values()}[Symbol.asyncIterator](){return this.encode()}}var J=e.i(81111);class K{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}var Q=e.i(18352);let Z=!1;async function ee(t,...r){let{fileFromPath:n}=await e.A(84482);return Z||(console.warn(`fileFromPath is deprecated; use fs.createReadStream(${JSON.stringify(t)}) instead`),Z=!0),await n(t,...r)}let et=new O.default({keepAlive:!0,timeout:3e5}),er=new O.default.HttpsAgent({keepAlive:!0,timeout:3e5});async function en(e,t){let r=new Y(e),n=new K(J.Readable.from(r)),i={...t.headers,...r.headers,"Content-Length":r.contentLength};return{...t,body:n,headers:i}}let ei=()=>{r||function(e,t={auto:!1}){if(p)throw Error(`you must \`import 'groq-sdk/shims/${e.kind}'\` before importing anything else from groq-sdk`);if(r)throw Error(`can't \`import 'groq-sdk/shims/${e.kind}'\` after \`import 'groq-sdk/shims/${r}'\``);p=t.auto,r=e.kind,n=e.fetch,e.Request,e.Response,e.Headers,i=e.FormData,e.Blob,o=e.File,s=e.ReadableStream,a=e.getMultipartRequestOptions,l=e.getDefaultAgent,c=e.fileFromPath,d=e.isFsReadStream}(("undefined"==typeof AbortController&&(globalThis.AbortController=$.AbortController),{kind:"node",fetch:R.default,Request:R.Request,Response:R.Response,Headers:R.Headers,FormData:D,Blob:H.Blob,File:P.File,ReadableStream:Q.ReadableStream,getMultipartRequestOptions:en,getDefaultAgent:e=>e.startsWith("https")?er:et,fileFromPath:ee,isFsReadStream:e=>e instanceof B.ReadStream}),{auto:!0})};ei();class eo extends Error{}class es extends eo{constructor(e,t,r,n){super(`${es.makeMessage(e,t,r)}`),this.status=e,this.headers=n,this.error=t}static makeMessage(e,t,r){let n=t?.message?"string"==typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):r;return e&&n?`${e} ${n}`:e?`${e} status code (no body)`:n||"(no status code or body)"}static generate(e,t,r,n){return e&&n?400===e?new ed(e,t,r,n):401===e?new eu(e,t,r,n):403===e?new ep(e,t,r,n):404===e?new em(e,t,r,n):409===e?new eh(e,t,r,n):422===e?new eg(e,t,r,n):429===e?new ef(e,t,r,n):e>=500?new ey(e,t,r,n):new es(e,t,r,n):new el({message:r,cause:eJ(t)})}}class ea extends es{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class el extends es{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class ec extends el{constructor({message:e}={}){super({message:e??"Request timed out."})}}class ed extends es{}class eu extends es{}class ep extends es{}class em extends es{}class eh extends es{}class eg extends es{}class ef extends es{}class ey extends es{}class eb{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let r=!1,n=new ew;async function*i(){if(!e.body)throw t.abort(),new eo("Attempted to iterate over a response with no body");let r=new ek;for await(let t of eS(e.body))for(let e of r.decode(t)){let t=n.decode(e);t&&(yield t)}for(let e of r.flush()){let t=n.decode(e);t&&(yield t)}}return new eb(async function*(){if(r)throw Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let e=!1;try{for await(let t of i())if(!e){if(t.data.startsWith("[DONE]")){e=!0;continue}if(null===t.event||"error"===t.event){let e;try{e=JSON.parse(t.data)}catch(e){throw console.error("Could not parse message into JSON:",t.data),console.error("From chunk:",t.raw),e}if(e&&e.error)throw new es(e.error.status_code,e.error,e.error.message,void 0);yield e}}e=!0}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw e}finally{e||t.abort()}},t)}static fromReadableStream(e,t){let r=!1;async function*n(){let t=new ek;for await(let r of eS(e))for(let e of t.decode(r))yield e;for(let e of t.flush())yield e}return new eb(async function*(){if(r)throw Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let e=!1;try{for await(let t of n())!e&&t&&(yield JSON.parse(t));e=!0}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw e}finally{e||t.abort()}},t)}[Symbol.asyncIterator](){return this.iterator()}tee(){let e=[],t=[],r=this.iterator(),n=n=>({next:()=>{if(0===n.length){let n=r.next();e.push(n),t.push(n)}return n.shift()}});return[new eb(()=>n(e),this.controller),new eb(()=>n(t),this.controller)]}toReadableStream(){let e,t=this,r=new TextEncoder;return new s({async start(){e=t[Symbol.asyncIterator]()},async pull(t){try{let{value:n,done:i}=await e.next();if(i)return t.close();let o=r.encode(JSON.stringify(n)+"\n");t.enqueue(o)}catch(e){t.error(e)}},async cancel(){await e.return?.()}})}}class ew{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){var t;let r;if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,i,o]=-1!==(r=(t=e).indexOf(":"))?[t.substring(0,r),":",t.substring(r+1)]:[t,"",""];return o.startsWith(" ")&&(o=o.substring(1)),"event"===n?this.event=o:"data"===n&&this.data.push(o),null}}class ek{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let t=this.decodeText(e);if(this.trailingCR&&(t="\r"+t,this.trailingCR=!1),t.endsWith("\r")&&(this.trailingCR=!0,t=t.slice(0,-1)),!t)return[];let r=ek.NEWLINE_CHARS.has(t[t.length-1]||""),n=t.split(ek.NEWLINE_REGEXP);return 1!==n.length||r?(this.buffer.length>0&&(n=[this.buffer.join("")+n[0],...n.slice(1)],this.buffer=[]),r||(this.buffer=[n.pop()||""]),n):(this.buffer.push(n[0]),[])}decodeText(e){if(null==e)return"";if("string"==typeof e)return e;if("undefined"!=typeof Buffer){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new eo(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if("undefined"!=typeof TextDecoder){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new eo(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new eo("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];let e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}}function eS(e){if(e[Symbol.asyncIterator])return e;let t=e.getReader();return{async next(){try{let e=await t.read();return e?.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){let e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}ek.NEWLINE_CHARS=new Set(["\n","\r","\v","\f","\x1c","\x1d","\x1e","","\u2028","\u2029"]),ek.NEWLINE_REGEXP=/\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g;let ev=e=>null!=e&&"object"==typeof e&&"string"==typeof e.url&&"function"==typeof e.blob,ex=e=>null!=e&&"object"==typeof e&&"string"==typeof e.name&&"number"==typeof e.lastModified&&eA(e),eA=e=>null!=e&&"object"==typeof e&&"number"==typeof e.size&&"string"==typeof e.type&&"function"==typeof e.text&&"function"==typeof e.slice&&"function"==typeof e.arrayBuffer,eI=e=>ex(e)||ev(e)||d(e);async function eq(e,t,r){var n;if(ex(e=await e))return e;if(ev(e)){let n=await e.blob();t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()??"unknown_file");let i=eA(n)?[await n.arrayBuffer()]:[n];return new o(i,t,r)}let i=await eE(e);if(t||(t=(eR((n=e).name)||eR(n.filename)||eR(n.path)?.split(/[\\/]/).pop())??"unknown_file"),!r?.type){let e=i[0]?.type;"string"==typeof e&&(r={...r,type:e})}return new o(i,t,r)}async function eE(e){let t=[];if("string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(eA(e))t.push(await e.arrayBuffer());else if(eC(e))for await(let r of e)t.push(r);else{let t;throw Error(`Unexpected data type: ${typeof e}; constructor: ${e?.constructor?.name}; props: ${(t=Object.getOwnPropertyNames(e),`[${t.map(e=>`"${e}"`).join(", ")}]`)}`)}return t}let eR=e=>"string"==typeof e?e:"undefined"!=typeof Buffer&&e instanceof Buffer?String(e):void 0,eC=e=>null!=e&&"object"==typeof e&&"function"==typeof e[Symbol.asyncIterator],eP=e=>e&&"object"==typeof e&&e.body&&"MultipartBody"===e[Symbol.toStringTag],eT=async e=>{let t=await eH(e.body);return a(t,e)},eH=async e=>{let t=new i;return await Promise.all(Object.entries(e||{}).map(([e,r])=>eL(t,e,r))),t},e_=e=>{if(eI(e))return!0;if(Array.isArray(e))return e.some(e_);if(e&&"object"==typeof e){for(let t in e)if(e_(e[t]))return!0}return!1},eL=async(e,t,r)=>{if(void 0!==r){if(null==r)throw TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if("string"==typeof r||"number"==typeof r||"boolean"==typeof r)e.append(t,String(r));else if(eI(r)){let n=await eq(r);e.append(t,n)}else if(Array.isArray(r))await Promise.all(r.map(r=>eL(e,t+"[]",r)));else if("object"==typeof r)await Promise.all(Object.entries(r).map(([r,n])=>eL(e,`${t}[${r}]`,n)));else throw TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`)}};var eM=function(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},eD=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};async function eO(e){let{response:t}=e;if(e.options.stream)return(eZ("response",t.status,t.url,t.headers,t.body),e.options.__streamClass)?e.options.__streamClass.fromSSEResponse(t,e.controller):eb.fromSSEResponse(t,e.controller);if(204===t.status)return null;if(e.options.__binaryResponse)return t;let r=t.headers.get("content-type"),n=r?.split(";")[0]?.trim();if(n?.includes("application/json")||n?.endsWith("+json")){let e=await t.json();return eZ("response",t.status,t.url,t.headers,e),e}let i=await t.text();return eZ("response",t.status,t.url,t.headers,i),i}ei();class e$ extends Promise{constructor(e,t=eO){super(e=>{e(null)}),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new e$(this.responsePromise,async t=>e(await this.parseResponse(t),t))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class eB{constructor({baseURL:e,baseURLOverridden:t,maxRetries:r=2,timeout:i=6e4,httpAgent:o,fetch:s}){q.set(this,void 0),this.baseURL=e,eM(this,q,t,"f"),this.maxRetries=eY("maxRetries",r),this.timeout=eY("timeout",i),this.httpAgent=o,this.fetch=s??n}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json",...["head","get"].includes(e.method)?{}:{"Content-Type":"application/json"},"User-Agent":this.getUserAgent(),...eW(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${e0()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,r){return this.request(Promise.resolve(r).then(async r=>{let n=r&&eA(r?.body)?new DataView(await r.body.arrayBuffer()):r?.body instanceof DataView?r.body:r?.body instanceof ArrayBuffer?new DataView(r.body):r&&ArrayBuffer.isView(r?.body)?new DataView(r.body.buffer):r?.body;return{method:e,path:t,...r,body:n}}))}getAPIList(e,t,r){return this.requestAPIList(t,{method:"get",path:e,...r})}calculateContentLength(e){if("string"==typeof e){if("undefined"!=typeof Buffer)return Buffer.byteLength(e,"utf8").toString();if("undefined"!=typeof TextEncoder)return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}async buildRequest(e,{retryCount:t=0}={}){let r={...e},{method:n,path:i,query:o,defaultBaseURL:s,headers:a={}}=r,c=ArrayBuffer.isView(r.body)||r.__binaryRequest&&"string"==typeof r.body?r.body:eP(r.body)?r.body.body:r.body?JSON.stringify(r.body,null,2):null,d=this.calculateContentLength(c),u=this.buildURL(i,o,s);"timeout"in r&&eY("timeout",r.timeout),r.timeout=r.timeout??this.timeout;let p=r.httpAgent??this.httpAgent??l(u),m=r.timeout+1e3;"number"==typeof p?.options?.timeout&&m>(p.options.timeout??0)&&(p.options.timeout=m),this.idempotencyHeader&&"get"!==n&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);let h=this.buildHeaders({options:r,headers:a,contentLength:d,retryCount:t});return{req:{method:n,...c&&{body:c},headers:h,...p&&{agent:p},signal:r.signal??null},url:u,timeout:r.timeout}}buildHeaders({options:e,headers:t,contentLength:n,retryCount:i}){let o={};n&&(o["content-length"]=n);let s=this.defaultHeaders(e);return eQ(o,s),eQ(o,t),eP(e.body)&&"node"!==r&&delete o["content-type"],void 0===e1(s,"x-stainless-retry-count")&&void 0===e1(t,"x-stainless-retry-count")&&(o["x-stainless-retry-count"]=String(i)),void 0===e1(s,"x-stainless-timeout")&&void 0===e1(t,"x-stainless-timeout")&&e.timeout&&(o["x-stainless-timeout"]=String(Math.trunc(e.timeout/1e3))),this.validateHeaders(o,t),o}async prepareOptions(e){}async prepareRequest(e,{url:t,options:r}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(e=>[...e])):{...e}:{}}makeStatusError(e,t,r,n){return es.generate(e,t,r,n)}request(e,t=null){return new e$(this.makeRequest(e,t))}async makeRequest(e,t){let r=await e,n=r.maxRetries??this.maxRetries;null==t&&(t=n),await this.prepareOptions(r);let{req:i,url:o,timeout:s}=await this.buildRequest(r,{retryCount:n-t});if(await this.prepareRequest(i,{url:o,options:r}),eZ("request",o,r,i.headers),r.signal?.aborted)throw new ea;let a=new AbortController,l=await this.fetchWithTimeout(o,i,s,a).catch(eJ);if(l instanceof Error){if(r.signal?.aborted)throw new ea;if(t)return this.retryRequest(r,t);if("AbortError"===l.name)throw new ec;throw new el({cause:l})}let c=ej(l.headers);if(!l.ok){if(t&&this.shouldRetry(l)){let e=`retrying, ${t} attempts remaining`;return eZ(`response (error; ${e})`,l.status,o,c),this.retryRequest(r,t,c)}let e=await l.text().catch(e=>eJ(e).message),n=ez(e),i=n?void 0:e,s=t?"(error; no more retries left)":"(error; not retryable)";throw eZ(`response (error; ${s})`,l.status,o,c,i),this.makeStatusError(l.status,n,i,c)}return{response:l,options:r,controller:a}}requestAPIList(e,t){return new eF(this,this.makeRequest(t,null),e)}buildURL(e,t,r){let n=!eD(this,q,"f")&&r||this.baseURL,i=new URL(eX(e)?e:n+(n.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return!function(e){if(!e)return!0;for(let t in e)return!1;return!0}(o)&&(t={...o,...t}),"object"==typeof t&&t&&!Array.isArray(t)&&(i.search=this.stringifyQuery(t)),i.toString()}stringifyQuery(e){return Object.entries(e).filter(([e,t])=>void 0!==t).map(([e,t])=>{if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;if(null===t)return`${encodeURIComponent(e)}=`;throw new eo(`Cannot stringify type ${typeof t}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,t,r,n){let{signal:i,...o}=t||{};i&&i.addEventListener("abort",()=>n.abort());let s=setTimeout(()=>n.abort(),r),a={signal:n.signal,...o};return a.method&&(a.method=a.method.toUpperCase()),this.fetch.call(void 0,e,a).finally(()=>{clearTimeout(s)})}shouldRetry(e){let t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||409===e.status||429===e.status||!!(e.status>=500))}async retryRequest(e,t,r){let n,i=r?.["retry-after-ms"];if(i){let e=parseFloat(i);Number.isNaN(e)||(n=e)}let o=r?.["retry-after"];if(o&&!n){let e=parseFloat(o);n=Number.isNaN(e)?Date.parse(o)-Date.now():1e3*e}if(!(n&&0<=n&&n<6e4)){let r=e.maxRetries??this.maxRetries;n=this.calculateDefaultRetryTimeoutMillis(t,r)}return await eV(n),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){return Math.min(.5*Math.pow(2,t-e),8)*(1-.25*Math.random())*1e3}getUserAgent(){return`${this.constructor.name}/JS ${u}`}}q=new WeakMap,new WeakMap;class eF extends e${constructor(e,t,r){super(t,async t=>new r(e,t.response,await eO(t),t.options))}async *[Symbol.asyncIterator](){for await(let e of(await this))yield e}}let ej=e=>new Proxy(Object.fromEntries(e.entries()),{get(e,t){let r=t.toString();return e[r.toLowerCase()]||e[r]}}),eU=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?`other:${e}`:"unknown",eN=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?`Other:${e}`:"Unknown",eW=()=>t??(t=(()=>{if("undefined"!=typeof Deno&&null!=Deno.build)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":u,"X-Stainless-OS":eN(Deno.build.os),"X-Stainless-Arch":eU(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"==typeof Deno.version?Deno.version:Deno.version?.deno??"unknown"};if("undefined"!=typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":u,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if("[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0))return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":u,"X-Stainless-OS":eN(process.platform),"X-Stainless-Arch":eU(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};let e=function(){if("undefined"==typeof navigator||!navigator)return null;for(let{key:e,pattern:t}of[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}]){let r=t.exec(navigator.userAgent);if(r){let t=r[1]||0,n=r[2]||0,i=r[3]||0;return{browser:e,version:`${t}.${n}.${i}`}}}return null}();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":u,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":u,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}})()),ez=e=>{try{return JSON.parse(e)}catch(e){return}},eG=/^[a-z][a-z0-9+.-]*:/i,eX=e=>eG.test(e),eV=e=>new Promise(t=>setTimeout(t,e)),eY=(e,t)=>{if("number"!=typeof t||!Number.isInteger(t))throw new eo(`${e} must be an integer`);if(t<0)throw new eo(`${e} must be a positive integer`);return t},eJ=e=>{if(e instanceof Error)return e;if("object"==typeof e&&null!==e)try{return Error(JSON.stringify(e))}catch{}return Error(e)},eK=e=>"undefined"!=typeof process?process.env?.[e]?.trim()??void 0:"undefined"!=typeof Deno?Deno.env?.get?.(e)?.trim():void 0;function eQ(e,t){for(let r in t){if(!Object.prototype.hasOwnProperty.call(t,r))continue;let n=r.toLowerCase();if(!n)continue;let i=t[r];null===i?delete e[n]:void 0!==i&&(e[n]=i)}}function eZ(e,...t){"undefined"!=typeof process&&process?.env?.DEBUG==="true"&&console.log(`Groq:DEBUG:${e}`,...t)}let e0=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),e1=(e,t)=>{let r=t.toLowerCase();if("function"==typeof e?.get){let n=t[0]?.toUpperCase()+t.substring(1).replace(/([^\w])(\w)/g,(e,t,r)=>t+r.toUpperCase());for(let i of[t,r,t.toUpperCase(),n]){let t=e.get(i);if(t)return t}}for(let[n,i]of Object.entries(e))if(n.toLowerCase()===r){if(Array.isArray(i)){if(i.length<=1)return i[0];return console.warn(`Received ${i.length} entries for the ${t} header, using the first entry.`),i[0]}return i}};class e4{constructor(e){this._client=e}}class e3 extends e4{}class e2 extends e4{create(e,t){return this._client.post("/openai/v1/chat/completions",{body:e,...t,stream:e.stream??!1})}}class e5 extends e4{constructor(){super(...arguments),this.completions=new e2(this._client)}}e5.Completions=e2;class e6 extends e4{create(e,t){return this._client.post("/openai/v1/embeddings",{body:e,...t})}}class e8 extends e4{create(e,t){return this._client.post("/openai/v1/audio/speech",{body:e,...t,headers:{Accept:"audio/wav",...t?.headers},__binaryResponse:!0})}}class e9 extends e4{create(e,t){return this._client.post("/openai/v1/audio/transcriptions",eT({body:e,...t}))}}class e7 extends e4{create(e,t){return this._client.post("/openai/v1/audio/translations",eT({body:e,...t}))}}class te extends e4{constructor(){super(...arguments),this.speech=new e8(this._client),this.transcriptions=new e9(this._client),this.translations=new e7(this._client)}}te.Speech=e8,te.Transcriptions=e9,te.Translations=e7;class tt extends e4{retrieve(e,t){return this._client.get(`/openai/v1/models/${e}`,t)}list(e){return this._client.get("/openai/v1/models",e)}delete(e,t){return this._client.delete(`/openai/v1/models/${e}`,t)}}class tr extends e4{create(e,t){return this._client.post("/openai/v1/batches",{body:e,...t})}retrieve(e,t){return this._client.get(`/openai/v1/batches/${e}`,t)}list(e){return this._client.get("/openai/v1/batches",e)}cancel(e,t){return this._client.post(`/openai/v1/batches/${e}/cancel`,t)}}class tn extends e4{create(e,t){return this._client.post("/openai/v1/files",eT({body:e,...t}))}list(e){return this._client.get("/openai/v1/files",e)}delete(e,t){return this._client.delete(`/openai/v1/files/${e}`,t)}content(e,t){return this._client.get(`/openai/v1/files/${e}/content`,{...t,headers:{Accept:"application/octet-stream",...t?.headers},__binaryResponse:!0})}info(e,t){return this._client.get(`/openai/v1/files/${e}`,t)}}class ti extends eB{constructor({baseURL:e=eK("GROQ_BASE_URL"),apiKey:t=eK("GROQ_API_KEY"),...r}={}){if(void 0===t)throw new eo("The GROQ_API_KEY environment variable is missing or empty; either provide it, or instantiate the Groq client with an apiKey option, like new Groq({ apiKey: 'My API Key' }).");const n={apiKey:t,...r,baseURL:e||"https://api.groq.com"};n.dangerouslyAllowBrowser,super({baseURL:n.baseURL,baseURLOverridden:!!e&&"https://api.groq.com"!==e,timeout:n.timeout??6e4,httpAgent:n.httpAgent,maxRetries:n.maxRetries,fetch:n.fetch}),E.add(this),this.completions=new e3(this),this.chat=new e5(this),this.embeddings=new e6(this),this.audio=new te(this),this.models=new tt(this),this.batches=new tr(this),this.files=new tn(this),this._options=n,this.apiKey=t}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}}E=new WeakSet,ti.Groq=ti,ti.DEFAULT_TIMEOUT=6e4,ti.GroqError=eo,ti.APIError=es,ti.APIConnectionError=el,ti.APIConnectionTimeoutError=ec,ti.APIUserAbortError=ea,ti.NotFoundError=em,ti.ConflictError=eh,ti.RateLimitError=ef,ti.BadRequestError=ed,ti.AuthenticationError=eu,ti.InternalServerError=ey,ti.PermissionDeniedError=ep,ti.UnprocessableEntityError=eg,ti.toFile=eq,ti.fileFromPath=c,ti.Completions=e3,ti.Chat=e5,ti.Embeddings=e6,ti.Audio=te,ti.Models=tt,ti.Batches=tr,ti.Files=tn,e.s(["default",0,ti],79414)},82220,e=>{"use strict";var t=e.i(79414),r=e.i(60859);let n=new Map,i=new Map;function o(e){let{templateId:t,userId:o,metadata:s}=e,a=(0,r.getTemplateById)(t);if(!a)throw Error(`Template not found: ${t}`);let l=`${t}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,c={id:l,templateId:t,template:a,status:"active",createdAt:new Date().toISOString(),lastActiveAt:new Date().toISOString(),userId:o,metadata:s||{},metrics:{messagesProcessed:0,toolsExecuted:0,avgResponseTime:0,errorCount:0,sessionDuration:0}},d={sessionId:l,engineType:a.type,history:[],currentState:"greeting",language:"en",userPreferences:{},metadata:{createdAt:c.createdAt,templateId:t}};return n.set(l,c),i.set(l,d),c}function s(e){return n.get(e)}function a(e){return i.get(e)}function l(e){let t=n.delete(e);return i.delete(e),t}function c(e){let t=Array.from(n.values());return e?t.filter(t=>(!e.status||t.status===e.status)&&(!e.templateId||t.templateId===e.templateId)):t}let d={};function u(e,t){d[e]=t}async function p(e,t,r){let n=d[e];if(!n)return{success:!1,data:null,error:`No handler registered for tool: ${e}`};try{let e=Date.now(),i=await n(t,r);return i.executionTime=Date.now()-e,i}catch(t){return console.error(`Tool execution error (${e}):`,t),{success:!1,data:null,error:t.message||"Tool execution failed"}}}async function m(e){let{instanceId:n,message:i,language:o="en"}=e,l=s(n);if(!l)throw Error(`Engine instance not found: ${n}`);let c=a(n);if(!c)throw Error(`Conversation context not found: ${n}`);let d=l.template,u=Date.now();c.language=o;let m={role:"user",content:i,timestamp:new Date().toISOString()};c.history.push(m);let h=function(e){let t=(0,r.getTemplateById)(e);if(!t)return[];let n=[];for(let e of t.skills)n.push(...e.tools);return n}(l.templateId),g=[{role:"system",content:"he"===o&&d.prompts.systemPromptHe?d.prompts.systemPromptHe:d.prompts.systemPrompt},...c.history.slice(-d.config.contextWindowSize).map(e=>({role:e.role,content:e.content}))],f=h.map(e=>({type:"function",function:{name:e.name,description:e.description,parameters:e.parameters}}));try{let e=(()=>{let e=process.env.GROQ_API_KEY;if(!e)throw Error("GROQ_API_KEY environment variable is required");return new t.default({apiKey:e})})(),r=await e.chat.completions.create({model:d.modelConfig.model,messages:g,tools:f.length>0?f:void 0,tool_choice:f.length>0?"auto":void 0,temperature:d.modelConfig.temperature,max_tokens:d.modelConfig.maxTokens,top_p:d.modelConfig.topP}),i=r.choices[0].message,o=[];if(i.tool_calls&&i.tool_calls.length>0){let t=i.tool_calls.map(async e=>{let t=e.function.name,r=JSON.parse(e.function.arguments);console.log(`[Progress] Executing tool: ${t}`);let n=await p(t,r,c);return{id:e.id,name:t,parameters:r,result:n}}),s=await Promise.all(t);for(let e of s)o.push({name:e.name,parameters:e.parameters,result:e.result}),l.metrics.toolsExecuted++;let a=[...g,i,...s.map(e=>({role:"tool",tool_call_id:e.id,content:JSON.stringify(e.result.data)}))],m=await e.chat.completions.create({model:d.modelConfig.model,messages:a,temperature:d.modelConfig.temperature,max_tokens:d.modelConfig.maxTokens}),h=m.choices[0].message.content||"",f={role:"assistant",content:h,timestamp:new Date().toISOString(),toolCalls:o.map(e=>({name:e.name,parameters:e.parameters}))};c.history.push(f),l.metrics.messagesProcessed++;let y=Date.now()-u;return l.metrics.avgResponseTime=(l.metrics.avgResponseTime*(l.metrics.messagesProcessed-1)+y)/l.metrics.messagesProcessed,l.lastActiveAt=new Date().toISOString(),{reply:h,toolCalls:o,context:{sessionId:n,messageCount:c.history.length,currentState:c.currentState},usage:{promptTokens:(r.usage?.prompt_tokens||0)+(m.usage?.prompt_tokens||0),completionTokens:(r.usage?.completion_tokens||0)+(m.usage?.completion_tokens||0),totalTokens:(r.usage?.total_tokens||0)+(m.usage?.total_tokens||0)}}}let s=i.content||"",a={role:"assistant",content:s,timestamp:new Date().toISOString()};c.history.push(a),l.metrics.messagesProcessed++;let m=Date.now()-u;return l.metrics.avgResponseTime=(l.metrics.avgResponseTime*(l.metrics.messagesProcessed-1)+m)/l.metrics.messagesProcessed,l.lastActiveAt=new Date().toISOString(),{reply:s,context:{sessionId:n,messageCount:c.history.length,currentState:c.currentState},usage:{promptTokens:r.usage?.prompt_tokens||0,completionTokens:r.usage?.completion_tokens||0,totalTokens:r.usage?.total_tokens||0}}}catch(e){return console.error("Chat error:",e),l.metrics.errorCount++,{reply:d.prompts.errorMessages?.general||"I apologize, but something went wrong. Please try again.",context:{sessionId:n,messageCount:c.history.length,currentState:"error"}}}}function h(e,t="en"){let r=s(e);if(!r)return"";let n=r.template;return"he"===t&&n.prompts.greetingMessageHe?n.prompts.greetingMessageHe:n.prompts.greetingMessage||""}function g(e){let t=a(e);return!!t&&(t.history=[],t.currentState="greeting",!0)}function f(){return r.allTemplates}function y(){let e=Array.from(n.values()),t=0,r=0,i=0,o=0,s={};for(let n of e){t+=n.metrics.messagesProcessed,r+=n.metrics.toolsExecuted,i+=n.metrics.avgResponseTime*n.metrics.messagesProcessed,o+=n.metrics.errorCount;let e=n.template.type;s[e]=(s[e]||0)+1}return{activeEngines:e.filter(e=>"active"===e.status).length,totalConversations:e.length,totalMessages:t,totalToolCalls:r,avgResponseTime:t>0?i/t:0,errorRate:t>0?o/t*100:0,enginesByType:s}}e.s(["chat",()=>m,"clearHistory",()=>g,"createEngine",()=>o,"destroyEngine",()=>l,"executeTool",()=>p,"getAvailableTemplates",()=>f,"getConversationContext",()=>a,"getDashboardStats",()=>y,"getEngine",()=>s,"getGreeting",()=>h,"listEngines",()=>c,"registerToolHandler",()=>u])}];

//# sourceMappingURL=v0-bookinengine_5784e2a3._.js.map